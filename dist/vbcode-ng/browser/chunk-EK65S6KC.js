import{a as Be}from"./chunk-ZAFHSMYH.js";import{b as ke}from"./chunk-FDGFYOMM.js";import"./chunk-7S7ENXZH.js";import{a as Ie}from"./chunk-HA7JOEXM.js";import{a as Pe}from"./chunk-QAVGAAVW.js";import{d as z,h as K,i as Z}from"./chunk-OPJQ2HU6.js";import"./chunk-HOEGX7HV.js";import{D as $,E as j,I as be,J as Me,w as q,y as Te}from"./chunk-PBBD6Q2O.js";import{b as Ce,d as L,g as D,h as xe,i as J,k as d,m as ve,n as he,p as ge,q as ye,r as we,s as Se,u as U,v as H}from"./chunk-NQBBWANC.js";import{e as de}from"./chunk-4ORLU33K.js";import{b as pe,c as ce,f as ue}from"./chunk-E7WDJHTT.js";import{a as _e}from"./chunk-XGPREJ5I.js";import{a as Ge}from"./chunk-ZJ67X65J.js";import{U as Ee}from"./chunk-KB2SVANO.js";import{I as se,M as fe,N as Fe,s as oe,u as re,v as le,z as me}from"./chunk-ZURVRTZ6.js";import{$c as B,Ab as R,Jc as N,Lc as A,Mb as x,Mc as te,Nb as v,Ob as S,Oc as p,Pb as Y,Pc as s,Qb as y,Qc as ie,Rb as w,Rc as ne,Sb as _,Tb as r,Ub as a,Vb as f,Xc as ae,ac as b,eb as X,ec as M,gb as n,gc as C,ma as F,qc as k,ta as G,ua as T,va as V,vc as m,wc as u,xb as O,xc as h,yc as ee}from"./chunk-BYLMW57F.js";import"./chunk-SECEFDB3.js";import{i as I}from"./chunk-GK2WYAVW.js";var Le=(()=>{let t=class t{transform(o,l){return o?o.filter(c=>c.id!==l):null}};t.\u0275fac=function(l){return new(l||t)},t.\u0275pipe=R({name:"pristineEvent",type:t,pure:!0});let e=t;return e})();var Ve=(()=>{let t=class t{transform(o,l,c){if(!o)return[];let g=Object.values(l).map(P=>P.value),E=o.filter(P=>!g.includes(P?.id))||[],Ne=o.find(P=>P?.id===l[c].value);return[...E,Ne]}};t.\u0275fac=function(l){return new(l||t)},t.\u0275pipe=R({name:"pristine",type:t,pure:!1});let e=t;return e})();function He(e,t){if(e&1&&(r(0,"mat-option",1),m(1),a()),e&2){let i=t.$implicit;_("value",i==null?null:i.id),n(),ee(" ",i==null?null:i.trikot," - ",i==null?null:i.name," ")}}var Oe=(()=>{let t=class t{constructor(){this.index=B.required(),this.home_team_start_rotation=B.required(),this.playerList=B.required(),this.attendees=B.required(),this.attendeesPlayer=ae(()=>this.attendees()?.map(o=>this.playerList().find(l=>l.id===o)))}};t.\u0275fac=function(l){return new(l||t)},t.\u0275cmp=O({type:t,selectors:[["app-single-roation-form-control"]],hostAttrs:[1,"flex","flex-col"],inputs:{index:[1,"index"],home_team_start_rotation:[1,"home_team_start_rotation"],playerList:[1,"playerList"],attendees:[1,"attendees"]},decls:7,vars:6,consts:[[3,"formControl"],[3,"value"]],template:function(l,c){if(l&1&&(r(0,"mat-form-field")(1,"mat-label"),m(2),a(),r(3,"mat-select",0),y(4,He,2,3,"mat-option",1,S),p(6,"pristine"),a()()),l&2){n(2),u(c.index());let g=c.home_team_start_rotation().controls;n(),_("formControl",g[c.index()]),n(),w(ne(6,2,c.attendeesPlayer(),g,c.index()))}},dependencies:[j,$,q,Z,K,z,U,D,H,ge,Ve],encapsulation:2});let e=t;return e})();var qe=()=>["Private","Public"],W=(e,t)=>[e,t],Re=()=>[4,3,2,5,6,1],$e=(e,t,i)=>[e,t,i];function je(e,t){e&1&&(m(0),p(1,"transloco")),e&2&&h(" ",s(1,1,"create-a-new-training")," ")}function ze(e,t){e&1&&(m(0),p(1,"transloco")),e&2&&h(" ",s(1,1,"create-a-new-game")," ")}function Ke(e,t){if(e&1&&x(0,je,2,3)(1,ze,2,3),e&2){let i=C();v(i.createGameForm.controls.event_type.value==="training"?0:1)}}function Ze(e,t){e&1&&(m(0),p(1,"transloco")),e&2&&h(" ",s(1,1,"edit-a-training")," ")}function Je(e,t){e&1&&(m(0),p(1,"transloco")),e&2&&h(" ",s(1,1,"edit-a-game")," ")}function Qe(e,t){if(e&1&&x(0,Ze,2,3)(1,Je,2,3),e&2){let i=C();v(i.createGameForm.controls.event_type.value==="training"?0:1)}}function We(e,t){if(e&1&&(r(0,"mat-option",17),m(1),a()),e&2){let i=t.$implicit;_("value",i),n(),h(" ",i," ")}}function Xe(e,t){if(e&1&&(r(0,"mat-option",17),m(1),a()),e&2){let i=t.$implicit;_("value",i.id),n(),h(" ",i.name," ")}}function Ye(e,t){if(e&1&&f(0,"app-attendees-select-form-control",26),e&2){let i=C(2);_("playerList",i.playerList)("attendees",i.createGameForm.controls.attendees)}}function et(e,t){if(e&1&&f(0,"app-single-roation-form-control",32),e&2){let i=t.$implicit,o=C(3);_("playerList",o.playerList)("index",i)("attendees",o.createGameForm.controls.attendees.value)("home_team_start_rotation",o.createGameForm.controls.home_team_start_rotation)}}function tt(e,t){e&1&&(r(0,"span",29),m(1),p(2,"transloco"),a(),r(3,"p",30),m(4,"Bezieht sich nur auf Satz 1 solange diese noch nicht Satzweise abgepasst werden kann"),a(),r(5,"div",31),y(6,et,1,4,"app-single-roation-form-control",32,S),a()),e&2&&(n(),u(s(2,1,"start-rotation")),n(5),w(N(3,Re)))}function it(e,t){if(e&1&&(r(0,"mat-option",17),m(1),a()),e&2){let i=t.$implicit;_("value",i.id),n(),h(" ",i.name," ")}}function nt(e,t){if(e&1&&f(0,"app-single-roation-form-control",33),e&2){let i=t.$implicit,o=C(3);_("playerList",o.playerList)("attendees",o.createGameForm.controls.attendees.value)("index",i)("home_team_start_rotation",o.createGameForm.controls.away_team_start_rotation)}}function at(e,t){e&1&&(r(0,"span",29),m(1),p(2,"transloco"),a(),r(3,"div",31),y(4,nt,1,4,"app-single-roation-form-control",33,S),a()),e&2&&(n(),u(s(2,1,"start-rotation")),n(3),w(N(3,Re)))}function ot(e,t){if(e&1){let i=b();f(0,"hr"),r(1,"span",23),m(2),p(3,"transloco"),a(),r(4,"mat-form-field",9)(5,"mat-label"),m(6),p(7,"transloco"),a(),r(8,"mat-select",24,1),M("valueChange",function(l){G(i);let c=C();return T(c.OnHomeTeamChange(l))}),y(10,Xe,2,2,"mat-option",17,S),a(),r(12,"mat-hint")(13,"a",25),m(14),p(15,"transloco"),a()()(),x(16,Ye,1,2,"app-attendees-select-form-control",26),x(17,tt,8,4),f(18,"hr",20),r(19,"div",27)(20,"mat-form-field",9)(21,"mat-label"),m(22),p(23,"transloco"),a(),r(24,"mat-select",28,2),y(26,it,2,2,"mat-option",17,S),p(28,"pristineEvent"),a()(),x(29,at,6,4),a()}if(e&2){let i=k(9),o=k(25),l=C();n(2),u(s(3,8,"home")),n(4),u(s(7,10,"home-team")),n(4),w(l.teams),n(3),_("routerLink",A(19,W,l.ROUTES.root+l.ROUTES.teams,i.value)),n(),h(" ",s(15,12,"edit-this-team")," "),n(2),v(l.createGameForm.controls.home_team.valid?16:-1),n(),v(i.value?17:-1),n(5),u(s(23,14,"away-team")),n(4),w(ie(28,16,l.teams,i.value)),n(3),v(o.value?29:-1)}}function rt(e,t){if(e&1&&(r(0,"mat-option",17),m(1),a()),e&2){let i=t.$implicit;_("value",i.id),n(),h(" ",i.name," ")}}function lt(e,t){if(e&1&&f(0,"app-attendees-select-form-control",26),e&2){let i=C(2);_("playerList",i.playerList)("attendees",i.createGameForm.controls.attendees)}}function mt(e,t){if(e&1){let i=b();f(0,"hr"),r(1,"span",23),m(2),p(3,"transloco"),a(),r(4,"mat-form-field",9)(5,"mat-label"),m(6),p(7,"transloco"),a(),r(8,"mat-select",24,3),M("valueChange",function(l){G(i);let c=C();return T(c.OnHomeTeamChange(l))}),y(10,rt,2,2,"mat-option",17,S),a(),r(12,"mat-hint")(13,"a",25),m(14),p(15,"transloco"),a()()(),x(16,lt,1,2,"app-attendees-select-form-control",26)}if(e&2){let i=k(9),o=C();n(2),u(s(3,5,"select-team")),n(4),u(s(7,7,"team")),n(4),w(o.teams),n(3),_("routerLink",A(11,W,o.ROUTES.root+o.ROUTES.teams,i.value)),n(),h(" ",s(15,9,"edit-this-team")," "),n(2),v(o.createGameForm.controls.home_team.valid?16:-1)}}function pt(e,t){e&1&&(V(),r(0,"svg",46)(1,"title"),m(2,"youtube"),a(),f(3,"path",48),a())}function ct(e,t){e&1&&(V(),r(0,"svg",47)(1,"title"),m(2,"video-outline"),a(),f(3,"path",49),a())}function st(e,t){if(e&1&&(r(0,"li",44)(1,"a",45),x(2,pt,4,0,":svg:svg",46)(3,ct,4,0,":svg:svg",47),a()()),e&2){let i=t.$implicit;n(),_("href",i,X),n(),v(i.includes("youtube")?2:3)}}function dt(e,t){if(e&1){let i=b();r(0,"div",37)(1,"div",38)(2,"mat-form-field",9)(3,"mat-label"),m(4),p(5,"transloco"),a(),f(6,"input",39),a()(),r(7,"div",38)(8,"mat-form-field",9)(9,"mat-label"),m(10),p(11,"transloco"),a(),f(12,"input",40),a()()(),r(13,"div",41)(14,"input",42,5),M("keydown.enter",function(l){G(i);let c=k(15),g=C(2);return T(g.addMediaLink(l,c))}),a(),r(16,"ul",43),y(17,st,4,2,"li",44,S),a()()}if(e&2){let i=C(2);n(4),h("",s(5,2,"result-home")," "),n(6),h("",s(11,4,"result-away")," "),n(7),w(i.createGameForm.controls.media_links.value)}}function ut(e,t){if(e&1&&(r(0,"label",34)(1,"span",35),m(2),p(3,"transloco"),a(),f(4,"input",36,4),a(),x(6,dt,19,6)),e&2){let i=C();n(2),u(s(3,2,"event-finished")),n(4),v(6)}}function _t(e,t){if(e&1){let i=b();r(0,"a",22),m(1),p(2,"transloco"),a(),r(3,"button",50),M("click",function(){G(i);let l=C();return T(l.deleteGame())}),V(),r(4,"svg",51),f(5,"path",52),a(),m(6),p(7,"transloco"),a()}if(e&2){let i=C();_("routerLink",te(7,$e,i.ROUTES.root,i.ROUTES.roationPlaner,i.createGameForm.controls.id.value)),n(),u(s(2,3,"See Rotation Preview")),n(5),h(" ",s(7,5,"delete-game")," ")}}var Wt=(()=>{let t=class t{constructor(){this.ROUTES=_e,this.route=F(oe),this.router=F(re),this.snack=F(Pe),this.eventsService=F(Ge),this.supabase=F(Fe),this.playerService=F(Ee),this.teamService=F(Ie),this.session=se(fe.session),this.teams=[],this.players=this.playerService.getPlayers(),this.playerList=[],this.createGameForm=new J({id:new d(void 0),title:new d("",L.required),date:new d(new Date,L.required),event_type:new d("game",L.required),media_links:new d([""]),attendees:new d([]),result_home:new d(void 0),result_away:new d(void 0),home_team:new d(void 0),home_team_start_rotation:new J({1:new d(null),2:new d(null),3:new d(null),4:new d(null),5:new d(null),6:new d(null)}),away_team_start_rotation:new Se([new d(null),new d(null),new d(null),new d(null),new d(null),new d(null)]),away_team:new d(void 0),owner:new d(this.session()?.user.id||"",L.required),shared_with:new d([]),visibility:new d("Private")})}addMediaLink(o,l){o.preventDefault();let g=o.target?.value;if(!g)return;let E=this.createGameForm.controls.media_links.value;E&&E.length>0?this.createGameForm.controls.media_links.setValue([...E,g]):this.createGameForm.controls.media_links.setValue([g]),l.value=""}createGame(){return I(this,null,function*(){let o=this.createGameForm.value;try{yield this.eventsService.createEvent(o),this.snack.open("Event create","open",{duration:5e3}).onAction().subscribe(()=>{})}catch(l){this.snack.open("Error creating Event:"+l,"OK",{duration:2e3})}})}deleteGame(){return I(this,null,function*(){let o=this.createGameForm.controls.id.value;if(!(!o||!confirm("M\xF6chten Sie dieses Spiel wirklich l\xF6schen? Diese Aktion kann nicht r\xFCckg\xE4ngig gemacht werden.")))try{yield this.eventsService.deleteEvent(o),this.snack.open("Spiel erfolgreich gel\xF6scht","OK",{duration:3e3}),this.router.navigate([this.ROUTES.root,this.ROUTES.games])}catch(c){this.snack.open("Fehler beim L\xF6schen des Spiels: "+c,"OK",{duration:3e3})}})}OnHomeTeamChange(o){return I(this,null,function*(){if(!o)return;let l=yield this.teamService.getTeam(o);this.playerList=yield this.playerService.getPlayerList(l.players)})}ngOnInit(){return I(this,null,function*(){this.route.data.subscribe(o=>{o.game&&this.createGameForm.patchValue(o.game);let l=this.createGameForm.controls.home_team.value;l&&this.OnHomeTeamChange(l)}),this.teams=yield this.teamService.getTeams()})}};t.\u0275fac=function(l){return new(l||t)},t.\u0275cmp=O({type:t,selectors:[["app-create-game-page"]],decls:47,vars:36,consts:[["form",""],["homeTeam",""],["awayTeam",""],["trainingTeam",""],["eventFinished",""],["inMedia",""],[1,"flex","flex-col","items-start","gap-4","md:gap-8","h-full","p-4","md:p-8","max-w-4xl","mx-auto","w-full"],[1,"text-xl","md:text-2xl","font-bold"],[1,"flex","flex-col","w-full",3,"submit","formGroup"],[1,"w-full"],["matInput","","formControlName","title"],[1,"flex","flex-col","md:flex-row","md:justify-between","gap-4","md:gap-0"],[1,"w-full","md:w-1/3"],["formControlName","event_type"],["value","game"],["value","training"],["formControlName","visibility"],[3,"value"],["matInput","","type","date","formControlName","date"],[1,"btn","w-full","md:w-auto",3,"type"],[1,"my-4"],[1,"flex","flex-col","gap-2","w-full"],[1,"btn","btn-outline","btn-secondary","w-full","md:w-auto",3,"routerLink"],[1,"text-lg"],["formControlName","home_team",3,"valueChange"],[3,"routerLink"],[3,"playerList","attendees"],[1,""],["formControlName","away_team"],[1,"text-sm","md:text-md","font-medium"],[1,"text-xs","md:text-sm","text-gray-600"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-2"],[3,"playerList","index","attendees","home_team_start_rotation"],[3,"playerList","attendees","index","home_team_start_rotation"],[1,"label","cursor-pointer"],[1,"label-text"],["type","checkbox",1,"toggle"],[1,"flex","flex-col","md:flex-row","gap-2","md:gap-4","w-full"],[1,"w-full","md:w-1/2"],["matInput","","type","number","formControlName","result_home"],["matInput","","type","number","formControlName","result_away"],[1,"flex","flex-col","gap-2"],["type","text","placeholder","Enter link here",1,"input","input-bordered","input-primary","w-full",3,"keydown.enter"],[1,"flex","flex-wrap","gap-2","my-2"],[1,"flex"],["target","_blank",1,"btn","btn-xs","w-12","h-12",3,"href"],["width","48","height","48"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["d","M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.5,18.78 17.18,18.84C15.88,18.91 14.69,18.94 13.59,18.94L12,19C7.81,19 5.2,18.84 4.17,18.56C3.27,18.31 2.69,17.73 2.44,16.83C2.31,16.36 2.22,15.73 2.16,14.93C2.09,14.13 2.06,13.44 2.06,12.84L2,12C2,9.81 2.16,8.2 2.44,7.17C2.69,6.27 3.27,5.69 4.17,5.44C4.64,5.31 5.5,5.22 6.82,5.16C8.12,5.09 9.31,5.06 10.41,5.06L12,5C16.19,5 18.8,5.16 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z",1,"fill-[#FF0000]"],["d","M15,8V16H5V8H15M16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5V7A1,1 0 0,0 16,6Z",1,"fill-secondary"],["type","button",1,"btn","btn-outline","btn-error","w-full","md:w-auto",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(l,c){if(l&1){let g=b();r(0,"div",6)(1,"span",7),x(2,Ke,2,1)(3,Qe,2,1),a(),r(4,"form",8,0),M("submit",function(){return G(g),T(c.createGame())}),r(6,"mat-form-field",9)(7,"mat-label"),m(8),p(9,"transloco"),a(),f(10,"input",10),a(),r(11,"div",11)(12,"mat-form-field",12)(13,"mat-label"),m(14),p(15,"transloco"),a(),r(16,"mat-select",13)(17,"mat-option",14),m(18),p(19,"transloco"),a(),r(20,"mat-option",15),m(21),p(22,"transloco"),a()()(),r(23,"mat-form-field",12)(24,"mat-label"),m(25),p(26,"transloco"),a(),r(27,"mat-select",16),y(28,We,2,2,"mat-option",17,Y),a()(),r(30,"mat-form-field",12)(31,"mat-label"),m(32),p(33,"transloco"),a(),f(34,"input",18),a()(),x(35,ot,30,22),x(36,mt,17,14),x(37,ut,7,4),r(38,"button",19),m(39),p(40,"transloco"),a()(),f(41,"hr",20),r(42,"div",21)(43,"a",22),m(44),p(45,"transloco"),a(),x(46,_t,8,11),a()()}l&2&&(n(2),v(c.createGameForm.controls.id.value?3:2),n(2),_("formGroup",c.createGameForm),n(4),u(s(9,16,"title")),n(6),u(s(15,18,"event-type")),n(4),u(s(19,20,"game")),n(3),u(s(22,22,"training")),n(4),u(s(26,24,"visibility")),n(3),w(N(32,qe)),n(4),u(s(33,26,"date")),n(3),v(c.createGameForm.controls.event_type.value==="game"?35:-1),n(),v(c.createGameForm.controls.event_type.value==="training"?36:-1),n(),v(c.createGameForm.controls.event_type.value==="game"?37:-1),n(),_("type","submit"),n(),u(s(40,28,"submit")),n(4),_("routerLink",A(33,W,c.ROUTES.root,c.ROUTES.games)),n(),u(s(45,30,"see-all-your-games-here")),n(2),v(c.createGameForm.controls.id.value?46:-1))},dependencies:[j,$,q,Te,de,Me,be,U,ve,Ce,he,D,xe,H,ye,we,ke,Z,K,z,ue,me,le,ce,Oe,Be,pe,Le],encapsulation:2});let e=t;return e})();export{Wt as CreateGamePageComponent};
