import{c as _e}from"./chunk-4NRCP73X.js";import{a as Ce}from"./chunk-UCMJBKKC.js";import{d as ke}from"./chunk-R2ZM2E6V.js";import"./chunk-ZFZKSUX3.js";import{a as ae,b as ne,c as oe,e as re,f as le}from"./chunk-IMJO6HOY.js";import{d as ye,h as Ee,i as be}from"./chunk-SSIQHUNB.js";import"./chunk-OIDJDANF.js";import{a as ge}from"./chunk-EZLJX4BM.js";import{B as ue,C as he,u as Se}from"./chunk-2T77MEFP.js";import{g as pe,k as L,p as me,v as ve}from"./chunk-6PY7AWBK.js";import{b as te,e as ie}from"./chunk-SDY2E75B.js";import{b as W,c as Y,e as se,f as ce}from"./chunk-ZXWJ2HWB.js";import{a as Z,b as ee}from"./chunk-5IUMP6MF.js";import{a as de}from"./chunk-XGPREJ5I.js";import"./chunk-Q2CI2HOH.js";import{a as fe}from"./chunk-YVU4E3LK.js";import{T as xe}from"./chunk-QYFRUT7D.js";import{f as z,i as H,s as X,u as q,v as J,z as Q}from"./chunk-WGJEK5TU.js";import{Hc as U,Kc as N,Mb as b,Nb as C,Nc as s,Oc as c,Pc as R,Qb as T,Rb as F,Sb as E,Tb as i,Ub as t,Vb as _,gb as e,gc as y,ma as M,sc as D,vc as a,wc as l,xb as j,xc as I,yc as k}from"./chunk-2HMN3K3N.js";import"./chunk-SECEFDB3.js";import{i as V}from"./chunk-GK2WYAVW.js";var Ae=(p,x)=>[p,x],K=(p,x)=>x.event.id;function Be(p,x){if(p&1&&(i(0,"span",7),a(1),t()),p&2){let o=y();e(),l(o.player.roles.join(", "))}}function Ie(p,x){p&1&&(i(0,"div",8),_(1,"div",10),t())}function we(p,x){p&1&&(i(0,"div",9)(1,"mat-icon"),a(2,"info"),t(),i(3,"span"),a(4),s(5,"transloco"),t()()),p&2&&(e(4),l(c(5,1,"no-performance-data")))}function Pe(p,x){if(p&1&&_(0,"div",26),p&2){let o=y(2);E("options",o.gradeChartOptions)}}function Oe(p,x){if(p&1&&_(0,"div",26),p&2){let o=y(2);E("options",o.actionGradeChartOptions)}}function Ge(p,x){if(p&1&&_(0,"div",26),p&2){let o=y(3);E("options",o.actionEvolutionChartOptions)}}function Me(p,x){if(p&1&&_(0,"div",26),p&2){let o=y(3);E("options",o.actionGradeEvolutionChartOptions)}}function De(p,x){if(p&1&&(i(0,"tr")(1,"td"),a(2),s(3,"date"),t(),i(4,"td")(5,"div",74)(6,"span"),a(7),t(),i(8,"span",75),a(9),s(10,"transloco"),s(11,"transloco"),t()()(),i(12,"td",76),a(13),t(),i(14,"td",68),a(15),t(),i(16,"td",69),a(17),t(),i(18,"td",70),a(19),t(),i(20,"td",71),a(21),t(),i(22,"td",72),a(23),t(),i(24,"td",73),a(25),t(),i(26,"td",67)(27,"span",77),a(28),t()()()),p&2){let o=y().$implicit,n=y(3);e(2),l(R(3,21,o.event.date,"short")),e(5),l(o.event.title),e(),D("badge-primary",o.event.event_type==="game")("badge-success",o.event.event_type==="training"),e(),I(" ",o.event.event_type==="training"?c(10,24,"training"):c(11,26,"game")," "),e(4),l(n.getActionTotal(o,n.selectedAction.value)),e(2),l(n.getActionGrade(o,n.selectedAction.value,"aces")),e(2),l(n.getActionGrade(o,n.selectedAction.value,"excellent")),e(2),l(n.getActionGrade(o,n.selectedAction.value,"good")),e(2),l(n.getActionGrade(o,n.selectedAction.value,"ok")),e(2),l(n.getActionGrade(o,n.selectedAction.value,"poor")),e(2),l(n.getActionGrade(o,n.selectedAction.value,"errors")),e(2),D("badge-success",n.getActionEfficiencyValue(o,n.selectedAction.value)>=70)("badge-warning",n.getActionEfficiencyValue(o,n.selectedAction.value)>=50&&n.getActionEfficiencyValue(o,n.selectedAction.value)<70)("badge-error",n.getActionEfficiencyValue(o,n.selectedAction.value)<50),e(),I(" ",n.getActionEfficiencyValue(o,n.selectedAction.value),"% ")}}function Te(p,x){if(p&1&&b(0,De,29,28,"tr"),p&2){let o=x.$implicit,n=y(3);C(n.getActionTotal(o,n.selectedAction.value)>0?0:-1)}}function Fe(p,x){if(p&1&&(i(0,"mat-card",11)(1,"mat-card-header")(2,"mat-card-title"),a(3),s(4,"transloco"),t()(),i(5,"mat-card-content")(6,"mat-form-field",57)(7,"mat-label"),a(8),s(9,"transloco"),t(),i(10,"mat-select",51)(11,"mat-option",58),a(12),s(13,"transloco"),t(),i(14,"mat-option",59),a(15),s(16,"transloco"),t(),i(17,"mat-option",60),a(18),s(19,"transloco"),t(),i(20,"mat-option",61),a(21),s(22,"transloco"),t(),i(23,"mat-option",62),a(24),s(25,"transloco"),t(),i(26,"mat-option",63),a(27),s(28,"transloco"),t()()(),i(29,"div",64)(30,"div")(31,"h3",23),a(32),s(33,"transloco"),t(),b(34,Ge,1,1,"div",26),t(),i(35,"div")(36,"h3",23),a(37),s(38,"transloco"),t(),b(39,Me,1,1,"div",26),t()(),i(40,"div",65)(41,"table",66)(42,"thead")(43,"tr")(44,"th"),a(45),s(46,"transloco"),t(),i(47,"th"),a(48),s(49,"transloco"),t(),i(50,"th",67),a(51),s(52,"transloco"),t(),i(53,"th",68),a(54),s(55,"transloco"),t(),i(56,"th",69),a(57),s(58,"transloco"),t(),i(59,"th",70),a(60),s(61,"transloco"),t(),i(62,"th",71),a(63),s(64,"transloco"),t(),i(65,"th",72),a(66),s(67,"transloco"),t(),i(68,"th",73),a(69),s(70,"transloco"),t(),i(71,"th",67),a(72),s(73,"transloco"),t()()(),i(74,"tbody"),T(75,Te,1,1,null,null,K),t()()()()()),p&2){let o=y(2);e(3),l(c(4,23,"performance-evolution")),e(5),l(c(9,25,"select-action-type")),e(2),E("formControl",o.selectedAction),e(2),l(c(13,27,"serves")),e(3),l(c(16,29,"receives")),e(3),l(c(19,31,"attacks")),e(3),l(c(22,33,"blocks")),e(3),l(c(25,35,"defenses")),e(3),l(c(28,37,"sets")),e(5),l(c(33,39,"efficiency-over-time")),e(2),C(o.actionEvolutionChartOptions?34:-1),e(3),l(c(38,41,"grade-evolution")),e(2),C(o.actionGradeEvolutionChartOptions?39:-1),e(6),l(c(46,43,"date")),e(3),l(c(49,45,"event")),e(3),l(c(52,47,"total")),e(3),l(c(55,49,"aces")),e(3),l(c(58,51,"excellent")),e(3),l(c(61,53,"good")),e(3),l(c(64,55,"ok")),e(3),l(c(67,57,"poor")),e(3),l(c(70,59,"errors")),e(3),l(c(73,61,"efficiency")),e(3),F(o.filteredPerformances)}}function Re(p,x){if(p&1&&(i(0,"mat-option",80),a(1),s(2,"date"),i(3,"span",81),a(4),s(5,"transloco"),s(6,"transloco"),t()()),p&2){let o=x.$implicit;E("value",o),e(),k(" ",o.event.title," (",R(2,8,o.event.date,"short"),") "),e(2),D("badge-primary",o.event.event_type==="game")("badge-success",o.event.event_type==="training"),e(),I(" ",o.event.event_type==="training"?c(5,11,"training"):c(6,13,"game")," ")}}function Le(p,x){if(p&1&&_(0,"div",24),p&2){let o=y(3);E("options",o.comparisonChartOptions)}}function Ve(p,x){if(p&1&&(i(0,"mat-card",11)(1,"mat-card-header")(2,"mat-card-title"),a(3),s(4,"transloco"),t()(),i(5,"mat-card-content")(6,"mat-form-field",78)(7,"mat-label"),a(8),s(9,"transloco"),t(),i(10,"mat-select",79),T(11,Re,7,15,"mat-option",80,K),t()(),b(13,Le,1,1,"div",24),t()()),p&2){let o=y(2);e(3),l(c(4,4,"session-comparison")),e(5),l(c(9,6,"select-sessions-to-compare")),e(2),E("formControl",o.selectedSessionsControl),e(),F(o.filteredPerformances),e(2),C(o.comparisonChartOptions?13:-1)}}function Ke(p,x){if(p&1&&(i(0,"div",56)(1,"div",82)(2,"div",83)(3,"div",84)(4,"h3",85),a(5),t(),i(6,"span",77),a(7),s(8,"transloco"),s(9,"transloco"),t()(),i(10,"p",7),a(11),s(12,"date"),t()(),i(13,"div",86)(14,"div")(15,"div",87),a(16),t(),i(17,"div",88),a(18),s(19,"transloco"),t()(),i(20,"div")(21,"div",89),a(22),t(),i(23,"div",88),a(24),s(25,"transloco"),t()(),i(26,"div")(27,"div",90),a(28),t(),i(29,"div",88),a(30),s(31,"transloco"),t()()()(),_(32,"div",91),i(33,"div",92)(34,"div",93)(35,"div",94),a(36),t(),i(37,"div",88),a(38),s(39,"transloco"),t()(),i(40,"div",95)(41,"div",96),a(42),t(),i(43,"div",88),a(44),s(45,"transloco"),t()(),i(46,"div",97)(47,"div",98),a(48),t(),i(49,"div",88),a(50),s(51,"transloco"),t()(),i(52,"div",99)(53,"div",100),a(54),t(),i(55,"div",88),a(56),s(57,"transloco"),t()(),i(58,"div",101)(59,"div",102),a(60),t(),i(61,"div",88),a(62),s(63,"transloco"),t()(),i(64,"div",103)(65,"div",104),a(66),t(),i(67,"div",88),a(68),s(69,"transloco"),t()()()()),p&2){let o=x.$implicit,n=y(2);e(5),l(o.event.title),e(),D("badge-primary",o.event.event_type==="game")("badge-success",o.event.event_type==="training"),e(),I(" ",o.event.event_type==="training"?c(8,32,"training"):c(9,34,"game")," "),e(4),l(R(12,36,o.event.date,"full")),e(5),l(o.totalActions),e(2),l(c(19,39,"actions")),e(4),l(o.gradeStats.aces),e(2),l(c(25,41,"aces")),e(3),D("text-success",o.efficiency>=70)("text-warning",o.efficiency>=50&&o.efficiency<70)("text-error",o.efficiency<50),e(),I(" ",o.efficiency,"% "),e(2),l(c(31,43,"efficiency")),e(2),E("options",n.getEventSpiderChartOptions(o)),e(4),l(o.actionStats.serves),e(2),l(c(39,45,"serves")),e(4),l(o.actionStats.receives),e(2),l(c(45,47,"receives")),e(4),l(o.actionStats.attacks),e(2),l(c(51,49,"attacks")),e(4),l(o.actionStats.blocks),e(2),l(c(57,51,"blocks")),e(4),l(o.actionStats.defenses),e(2),l(c(63,53,"defenses")),e(4),l(o.actionStats.sets),e(2),l(c(69,55,"sets"))}}function $e(p,x){if(p&1&&(i(0,"mat-card",11)(1,"mat-card-header")(2,"mat-card-title"),a(3),s(4,"transloco"),t()(),i(5,"mat-card-content")(6,"div",12)(7,"div",13)(8,"div",14),a(9),s(10,"transloco"),t(),i(11,"div",15),a(12),t()(),i(13,"div",13)(14,"div",14),a(15),s(16,"transloco"),t(),i(17,"div",16),a(18),t()(),i(19,"div",13)(20,"div",14),a(21),s(22,"transloco"),t(),i(23,"div",17),a(24),t()(),i(25,"div",13)(26,"div",14),a(27),s(28,"transloco"),s(29,"transloco"),t(),i(30,"div",18)(31,"span",19),a(32),t(),i(33,"span",20),a(34,"/"),t(),i(35,"span",21),a(36),t()()()(),i(37,"div",22)(38,"h3",23),a(39),s(40,"transloco"),t(),_(41,"div",24),t()()(),i(42,"div",25)(43,"mat-card")(44,"mat-card-header")(45,"mat-card-title"),a(46),s(47,"transloco"),t()(),i(48,"mat-card-content"),b(49,Pe,1,1,"div",26),t()(),i(50,"mat-card")(51,"mat-card-header")(52,"mat-card-title"),a(53),s(54,"transloco"),t()(),i(55,"mat-card-content"),b(56,Oe,1,1,"div",26),t()()(),i(57,"mat-card",11)(58,"mat-card-header")(59,"mat-card-title"),a(60),s(61,"transloco"),t()(),i(62,"mat-card-content")(63,"div",27)(64,"div",28)(65,"div",29),a(66),s(67,"transloco"),t(),i(68,"div",30),a(69),t(),i(70,"div",31)(71,"span",19),a(72),s(73,"transloco"),t(),a(74," / "),i(75,"span",21),a(76),s(77,"transloco"),t()()(),i(78,"div",32)(79,"div",33),a(80),s(81,"transloco"),t(),i(82,"div",34),a(83),t(),i(84,"div",35),a(85),s(86,"transloco"),t()(),i(87,"div",36)(88,"div",37),a(89),s(90,"transloco"),t(),i(91,"div",38),a(92),t(),i(93,"div",31)(94,"span",19),a(95),s(96,"transloco"),t(),a(97," / "),i(98,"span",21),a(99),s(100,"transloco"),t()()(),i(101,"div",39)(102,"div",40),a(103),s(104,"transloco"),t(),i(105,"div",41),a(106),t(),i(107,"div",42),a(108),s(109,"transloco"),t()(),i(110,"div",43)(111,"div",44),a(112),s(113,"transloco"),t(),i(114,"div",45),a(115),t()(),i(116,"div",46)(117,"div",47),a(118),s(119,"transloco"),t(),i(120,"div",48),a(121),t()()()()(),i(122,"div",49)(123,"mat-form-field",50)(124,"mat-label"),a(125),s(126,"transloco"),t(),i(127,"mat-select",51)(128,"mat-option",52),a(129),s(130,"transloco"),t(),i(131,"mat-option",53),a(132),s(133,"transloco"),t(),i(134,"mat-option",54),a(135),s(136,"transloco"),t()()()(),b(137,Fe,77,63,"mat-card",11),b(138,Ve,14,8,"mat-card",11),i(139,"mat-card")(140,"mat-card-header")(141,"mat-card-title"),a(142),s(143,"transloco"),t()(),i(144,"mat-card-content")(145,"div",55),T(146,Ke,70,57,"div",56,K),t()()()),p&2){let o=y();e(3),l(c(4,50,"overall-statistics")),e(6),l(c(10,52,"total-events")),e(3),l(o.performances.length),e(3),l(c(16,54,"total-actions")),e(3),l(o.overallStats.totalActions),e(3),l(c(22,56,"avg-efficiency")),e(3),I("",o.overallStats.avgEfficiency,"%"),e(3),k("",c(28,58,"aces")," / ",c(29,60,"errors")),e(5),l(o.overallStats.totalAces),e(4),l(o.overallStats.totalErrors),e(3),l(c(40,62,"performance-distribution")),e(2),E("options",o.overallSpiderChartOptions),e(5),l(c(47,64,"grade-distribution")),e(3),C(o.gradeChartOptions?49:-1),e(4),l(c(54,66,"action-efficiency")),e(3),C(o.actionGradeChartOptions?56:-1),e(4),l(c(61,68,"action-breakdown")),e(6),l(c(67,70,"serves")),e(3),l(o.overallStats.totalServes),e(3),k("",o.overallStats.serveAces," ",c(73,72,"aces")),e(4),k("",o.overallStats.serveErrors," ",c(77,74,"errors")),e(4),l(c(81,76,"receives")),e(3),l(o.overallStats.totalReceives),e(2),k("",o.overallStats.receiveErrors," ",c(86,78,"errors")),e(4),l(c(90,80,"attacks")),e(3),l(o.overallStats.totalAttacks),e(3),k("",o.overallStats.attackKills," ",c(96,82,"kills")),e(4),k("",o.overallStats.attackErrors," ",c(100,84,"errors")),e(4),l(c(104,86,"blocks")),e(3),l(o.overallStats.totalBlocks),e(2),k("",o.overallStats.blockKills," ",c(109,88,"kills")),e(4),l(c(113,90,"defenses")),e(3),l(o.overallStats.totalDefenses),e(3),l(c(119,92,"sets")),e(3),l(o.overallStats.totalSets),e(4),l(c(126,94,"filter-by-type")),e(2),E("formControl",o.eventTypeFilter),e(2),l(c(130,96,"all-events")),e(3),l(c(133,98,"games")),e(3),l(c(136,100,"training-sessions")),e(2),C(o.filteredPerformances.length>1?137:-1),e(),C(o.filteredPerformances.length>1?138:-1),e(4),l(c(143,102,"event-by-event-performance")),e(4),F(o.filteredPerformances)}}var St=(()=>{let x=class x{constructor(){this.route=M(X),this.router=M(q),this.playerService=M(xe),this.eventsService=M(fe),this.actionsService=M(ge),this.ROUTES=de,this.performances=[],this.isLoading=!0,this.eventTypeFilter=new L("all"),this.selectedSessionsControl=new L([]),this.overallSpiderChartOptions=null,this.comparisonChartOptions=null,this.overallStats={totalActions:0,totalAces:0,totalErrors:0,avgEfficiency:0,totalServes:0,totalReceives:0,totalAttacks:0,totalBlocks:0,totalDefenses:0,totalSets:0,serveAces:0,serveErrors:0,receiveErrors:0,attackKills:0,attackErrors:0,blockKills:0},this.gradeChartOptions=null,this.actionGradeChartOptions=null,this.selectedAction=new L("serve"),this.actionEvolutionChartOptions=null,this.actionGradeEvolutionChartOptions=null}get filteredPerformances(){let n=this.eventTypeFilter.value;return n==="all"?this.performances:this.performances.filter(r=>r.event.event_type===n)}ngOnInit(){return V(this,null,function*(){let n=this.route.snapshot.params.id;if(!n){this.router.navigate([this.ROUTES.root,this.ROUTES.teams]);return}yield this.loadPlayerData(n),this.eventTypeFilter.valueChanges.subscribe(()=>{this.selectedSessionsControl.setValue([])}),this.selectedSessionsControl.valueChanges.subscribe(r=>{r&&r.length>0?this.updateComparisonChart(r):this.comparisonChartOptions=null}),this.selectedAction.valueChanges.subscribe(()=>{this.generateActionEvolutionCharts()})})}loadPlayerData(n){return V(this,null,function*(){try{this.isLoading=!0,this.player=yield this.playerService.getPlayer(n);let d=(yield this.eventsService.getEvents()).filter(m=>m.attendees.includes(n));this.performances=[];for(let m of d){let S=(yield this.actionsService.getActionsOfEvent(m.id)).filter(u=>u.player_id.id===n);if(S.length>0){let u=this.calculateEventPerformance(m,S);this.performances.push(u)}}this.performances.sort((m,v)=>new Date(v.event.date).getTime()-new Date(m.event.date).getTime()),this.calculateOverallStats(),this.generateOverallSpiderChart(),this.generateActionEvolutionCharts()}catch(r){console.error("Error loading player data:",r)}finally{this.isLoading=!1}})}calculateEventPerformance(n,r){let d={serves:r.filter(g=>g.kind==="S").length,receives:r.filter(g=>g.kind==="R").length,attacks:r.filter(g=>g.kind==="A").length,blocks:r.filter(g=>g.kind==="B").length,defenses:r.filter(g=>g.kind==="D").length,sets:r.filter(g=>g.kind==="E").length},m={aces:r.filter(g=>g.grade==="#").length,excellent:r.filter(g=>g.grade==="!").length,good:r.filter(g=>g.grade==="+").length,ok:r.filter(g=>g.grade==="/").length,poor:r.filter(g=>g.grade==="-").length,errors:r.filter(g=>g.grade==="=").length},v={serve:this.calculateGradeBreakdownForAction(r,"S"),receive:this.calculateGradeBreakdownForAction(r,"R"),attack:this.calculateGradeBreakdownForAction(r,"A"),block:this.calculateGradeBreakdownForAction(r,"B"),defense:this.calculateGradeBreakdownForAction(r,"D"),set:this.calculateGradeBreakdownForAction(r,"E")},S=r.length,u=m.aces+m.excellent+m.good,w=S>0?Math.round(u/S*100):0,P=this.calculateActionEfficiency(r,"S"),O=this.calculateActionEfficiency(r,"R"),G=this.calculateActionEfficiency(r,"A"),f=this.calculateActionEfficiency(r,"B"),B=this.calculateActionEfficiency(r,"D"),A=this.calculateActionEfficiency(r,"E");return{event:n,actions:r,actionStats:d,gradeStats:m,actionGradeBreakdown:v,totalActions:S,efficiency:w,serveEfficiency:P,receiveEfficiency:O,attackEfficiency:G,blockEfficiency:f,defenseEfficiency:B,setEfficiency:A}}calculateGradeBreakdownForAction(n,r){let d=n.filter(m=>m.kind===r);return{aces:d.filter(m=>m.grade==="#").length,excellent:d.filter(m=>m.grade==="!").length,good:d.filter(m=>m.grade==="+").length,ok:d.filter(m=>m.grade==="/").length,poor:d.filter(m=>m.grade==="-").length,errors:d.filter(m=>m.grade==="=").length}}calculateActionEfficiency(n,r){let d=n.filter(v=>v.kind===r);if(d.length===0)return 0;let m=d.filter(v=>v.grade==="#"||v.grade==="!"||v.grade==="+").length;return Math.round(m/d.length*100)}calculateOverallStats(){let n=0,r=0,d=0,m=0,v=0,S=0,u=0,w=0,P=0,O=0,G=0,f=0,B=0,A=0,g=0,$=0;for(let h of this.performances)n+=h.totalActions,r+=h.gradeStats.aces,d+=h.gradeStats.errors,m+=h.efficiency,v+=h.actionStats.serves,S+=h.actionStats.receives,u+=h.actionStats.attacks,w+=h.actionStats.blocks,P+=h.actionStats.defenses,O+=h.actionStats.sets,G+=h.actionGradeBreakdown.serve.aces,f+=h.actionGradeBreakdown.serve.errors,B+=h.actionGradeBreakdown.receive.errors,A+=h.actionGradeBreakdown.attack.aces,g+=h.actionGradeBreakdown.attack.errors,$+=h.actionGradeBreakdown.block.aces;this.overallStats={totalActions:n,totalAces:r,totalErrors:d,avgEfficiency:this.performances.length>0?Math.round(m/this.performances.length):0,totalServes:v,totalReceives:S,totalAttacks:u,totalBlocks:w,totalDefenses:P,totalSets:O,serveAces:G,serveErrors:f,receiveErrors:B,attackKills:A,attackErrors:g,blockKills:$},this.generateGradeChart(),this.generateActionGradeChart()}generateGradeChart(){let n=0,r=0,d=0,m=0,v=0,S=0;for(let u of this.performances)n+=u.gradeStats.aces,r+=u.gradeStats.excellent,d+=u.gradeStats.good,m+=u.gradeStats.ok,v+=u.gradeStats.poor,S+=u.gradeStats.errors;this.gradeChartOptions={title:{text:"Overall Grade Distribution",left:"center"},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",radius:"60%",data:[{value:n,name:"Aces",itemStyle:{color:"#10b981"}},{value:r,name:"Excellent",itemStyle:{color:"#3b82f6"}},{value:d,name:"Good",itemStyle:{color:"#8b5cf6"}},{value:m,name:"OK",itemStyle:{color:"#f59e0b"}},{value:v,name:"Poor",itemStyle:{color:"#ef4444"}},{value:S,name:"Errors",itemStyle:{color:"#dc2626"}}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}generateActionGradeChart(){let n=this.overallStats.totalServes>0?(this.overallStats.serveAces/this.overallStats.totalServes*100).toFixed(1):"0",r=this.overallStats.totalReceives>0?((this.overallStats.totalReceives-this.overallStats.receiveErrors)/this.overallStats.totalReceives*100).toFixed(1):"0",d=this.overallStats.totalAttacks>0?(this.overallStats.attackKills/this.overallStats.totalAttacks*100).toFixed(1):"0",m=this.overallStats.totalBlocks>0?(this.overallStats.blockKills/this.overallStats.totalBlocks*100).toFixed(1):"0";this.actionGradeChartOptions={title:{text:"Action Efficiency",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:["Serve","Receive","Attack","Block"]},yAxis:{type:"value",max:100,axisLabel:{formatter:"{value}%"}},series:[{name:"Efficiency",type:"bar",data:[{value:parseFloat(n),itemStyle:{color:"#3b82f6"}},{value:parseFloat(r),itemStyle:{color:"#10b981"}},{value:parseFloat(d),itemStyle:{color:"#f59e0b"}},{value:parseFloat(m),itemStyle:{color:"#8b5cf6"}}],label:{show:!0,position:"top",formatter:"{c}%"}}]}}generateOverallSpiderChart(){let n={serves:0,receives:0,attacks:0,blocks:0,defenses:0,sets:0};for(let d of this.performances)n.serves+=d.actionStats.serves,n.receives+=d.actionStats.receives,n.attacks+=d.actionStats.attacks,n.blocks+=d.actionStats.blocks,n.defenses+=d.actionStats.defenses,n.sets+=d.actionStats.sets;let r=Math.max(n.serves,n.receives,n.attacks,n.blocks,n.defenses,n.sets);this.overallSpiderChartOptions={title:{text:""},tooltip:{trigger:"item"},radar:{indicator:[{name:"Serves",max:r},{name:"Receives",max:r},{name:"Attacks",max:r},{name:"Blocks",max:r},{name:"Defenses",max:r},{name:"Sets",max:r}],radius:"70%"},series:[{type:"radar",data:[{value:[n.serves,n.receives,n.attacks,n.blocks,n.defenses,n.sets],name:"Overall Performance",areaStyle:{color:"rgba(59, 130, 246, 0.3)"},lineStyle:{color:"rgba(59, 130, 246, 1)",width:2},itemStyle:{color:"rgba(59, 130, 246, 1)"}}]}]}}getEventSpiderChartOptions(n){let r=n.actionStats,d=Math.max(r.serves,r.receives,r.attacks,r.blocks,r.defenses,r.sets,10);return{tooltip:{trigger:"item"},radar:{indicator:[{name:"Serves",max:d},{name:"Receives",max:d},{name:"Attacks",max:d},{name:"Blocks",max:d},{name:"Defenses",max:d},{name:"Sets",max:d}],radius:"65%"},series:[{type:"radar",data:[{value:[r.serves,r.receives,r.attacks,r.blocks,r.defenses,r.sets],name:n.event.title,areaStyle:{color:n.event.event_type==="game"?"rgba(99, 102, 241, 0.3)":"rgba(34, 197, 94, 0.3)"},lineStyle:{color:n.event.event_type==="game"?"rgba(99, 102, 241, 1)":"rgba(34, 197, 94, 1)",width:2},itemStyle:{color:n.event.event_type==="game"?"rgba(99, 102, 241, 1)":"rgba(34, 197, 94, 1)"}}]}]}}updateComparisonChart(n){if(n.length===0){this.comparisonChartOptions=null;return}let r=0;for(let v of n){let S=Math.max(v.actionStats.serves,v.actionStats.receives,v.actionStats.attacks,v.actionStats.blocks,v.actionStats.defenses,v.actionStats.sets);S>r&&(r=S)}let d=["rgba(59, 130, 246, 0.3)","rgba(34, 197, 94, 0.3)","rgba(168, 85, 247, 0.3)","rgba(251, 146, 60, 0.3)","rgba(236, 72, 153, 0.3)"],m=["rgba(59, 130, 246, 1)","rgba(34, 197, 94, 1)","rgba(168, 85, 247, 1)","rgba(251, 146, 60, 1)","rgba(236, 72, 153, 1)"];this.comparisonChartOptions={title:{text:"Session Comparison"},tooltip:{trigger:"item"},legend:{data:n.map(v=>v.event.title),bottom:0},radar:{indicator:[{name:"Serves",max:r},{name:"Receives",max:r},{name:"Attacks",max:r},{name:"Blocks",max:r},{name:"Defenses",max:r},{name:"Sets",max:r}],radius:"60%"},series:[{type:"radar",data:n.map((v,S)=>({value:[v.actionStats.serves,v.actionStats.receives,v.actionStats.attacks,v.actionStats.blocks,v.actionStats.defenses,v.actionStats.sets],name:v.event.title,areaStyle:{color:d[S%d.length]},lineStyle:{color:m[S%m.length],width:2},itemStyle:{color:m[S%m.length]}}))}]}}getActionTotal(n,r){let m={serve:"serves",receive:"receives",attack:"attacks",block:"blocks",defense:"defenses",set:"sets"}[r];return m?n.actionStats[m]:0}getActionGrade(n,r,d){let v={serve:"serve",receive:"receive",attack:"attack",block:"block",defense:"defense",set:"set"}[r];return v?n.actionGradeBreakdown[v][d]:0}getActionEfficiencyValue(n,r){let m={serve:"serveEfficiency",receive:"receiveEfficiency",attack:"attackEfficiency",block:"blockEfficiency",defense:"defenseEfficiency",set:"setEfficiency"}[r];return m?n[m]:0}generateActionEvolutionCharts(){let n=this.selectedAction.value;if(!n)return;let d=[...this.filteredPerformances].sort((f,B)=>new Date(f.event.date).getTime()-new Date(B.event.date).getTime()).filter(f=>this.getActionTotal(f,n)>0);if(d.length===0){this.actionEvolutionChartOptions=null,this.actionGradeEvolutionChartOptions=null;return}let m=d.map(f=>new Date(f.event.date).toLocaleDateString()),v=d.map(f=>this.getActionEfficiencyValue(f,n));this.actionEvolutionChartOptions={title:{text:""},tooltip:{trigger:"axis",formatter:f=>{let A=f[0];return`${A.name}<br/>${A.seriesName}: ${A.value}%`}},xAxis:{type:"category",data:m,axisLabel:{rotate:45,interval:0}},yAxis:{type:"value",min:0,max:100,axisLabel:{formatter:"{value}%"}},grid:{bottom:80,left:50,right:30},series:[{name:"Efficiency",type:"line",data:v,smooth:!0,lineStyle:{width:3,color:"#3b82f6"},itemStyle:{color:"#3b82f6"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(59, 130, 246, 0.5)"},{offset:1,color:"rgba(59, 130, 246, 0.1)"}]}},markLine:{silent:!0,lineStyle:{color:"#f59e0b",type:"dashed"},data:[{yAxis:70,name:"Target"}],label:{formatter:"Target: {c}%"}}}]};let S=d.map(f=>this.getActionGrade(f,n,"aces")),u=d.map(f=>this.getActionGrade(f,n,"excellent")),w=d.map(f=>this.getActionGrade(f,n,"good")),P=d.map(f=>this.getActionGrade(f,n,"ok")),O=d.map(f=>this.getActionGrade(f,n,"poor")),G=d.map(f=>this.getActionGrade(f,n,"errors"));this.actionGradeEvolutionChartOptions={title:{text:""},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["Aces","Excellent","Good","OK","Poor","Errors"],bottom:0},xAxis:{type:"category",data:m,axisLabel:{rotate:45,interval:0}},yAxis:{type:"value"},grid:{bottom:80,left:50,right:30},series:[{name:"Aces",type:"bar",stack:"total",data:S,itemStyle:{color:"#10b981"}},{name:"Excellent",type:"bar",stack:"total",data:u,itemStyle:{color:"#3b82f6"}},{name:"Good",type:"bar",stack:"total",data:w,itemStyle:{color:"#8b5cf6"}},{name:"OK",type:"bar",stack:"total",data:P,itemStyle:{color:"#f59e0b"}},{name:"Poor",type:"bar",stack:"total",data:O,itemStyle:{color:"#ef4444"}},{name:"Errors",type:"bar",stack:"total",data:G,itemStyle:{color:"#dc2626"}}]}}};x.\u0275fac=function(r){return new(r||x)},x.\u0275cmp=j({type:x,selectors:[["app-player-detail-stats"]],features:[U([ee()])],decls:17,vars:11,consts:[[1,"flex","flex-col","p-4","md:p-6","max-w-7xl","mx-auto","w-full"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","mb-6","gap-4"],[1,"flex","items-center","gap-4"],["mat-icon-button","",3,"routerLink"],[1,"text-2xl","md:text-3xl","font-bold"],[1,"flex","items-center","gap-2","mt-1"],[1,"badge","badge-lg"],[1,"text-sm","text-gray-600"],[1,"flex","justify-center","items-center","py-20"],[1,"alert","alert-info"],[1,"loading","loading-spinner","loading-lg"],[1,"mb-6"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4","mb-6"],[1,"stat","bg-base-200","rounded-lg","p-4"],[1,"stat-title","text-sm"],[1,"stat-value","text-2xl","text-primary"],[1,"stat-value","text-2xl","text-secondary"],[1,"stat-value","text-2xl","text-success"],[1,"stat-value","text-2xl"],[1,"text-success"],[1,"text-sm","text-gray-500","mx-1"],[1,"text-error"],[1,"mt-4"],[1,"text-lg","font-semibold","mb-3"],["echarts","",1,"w-full","h-[400px]",3,"options"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-6"],["echarts","",1,"w-full","h-[350px]",3,"options"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-6","gap-4"],[1,"stat","bg-blue-50","rounded-lg","p-4"],[1,"stat-title","text-sm","text-blue-700"],[1,"stat-value","text-xl","text-blue-900"],[1,"stat-desc","text-xs"],[1,"stat","bg-green-50","rounded-lg","p-4"],[1,"stat-title","text-sm","text-green-700"],[1,"stat-value","text-xl","text-green-900"],[1,"stat-desc","text-xs","text-error"],[1,"stat","bg-purple-50","rounded-lg","p-4"],[1,"stat-title","text-sm","text-purple-700"],[1,"stat-value","text-xl","text-purple-900"],[1,"stat","bg-orange-50","rounded-lg","p-4"],[1,"stat-title","text-sm","text-orange-700"],[1,"stat-value","text-xl","text-orange-900"],[1,"stat-desc","text-xs","text-success"],[1,"stat","bg-yellow-50","rounded-lg","p-4"],[1,"stat-title","text-sm","text-yellow-700"],[1,"stat-value","text-xl","text-yellow-900"],[1,"stat","bg-pink-50","rounded-lg","p-4"],[1,"stat-title","text-sm","text-pink-700"],[1,"stat-value","text-xl","text-pink-900"],[1,"mb-4"],[1,"w-full","md:w-64"],[3,"formControl"],["value","all"],["value","game"],["value","training"],[1,"space-y-4"],[1,"border","rounded-lg","p-4","hover:shadow-md","transition-shadow"],[1,"w-full","md:w-64","mb-4"],["value","serve"],["value","receive"],["value","attack"],["value","block"],["value","defense"],["value","set"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"mt-6","overflow-x-auto"],[1,"table","table-zebra","w-full"],[1,"text-center"],[1,"text-center","text-green-600"],[1,"text-center","text-blue-600"],[1,"text-center","text-purple-600"],[1,"text-center","text-yellow-600"],[1,"text-center","text-orange-600"],[1,"text-center","text-red-600"],[1,"flex","items-center","gap-2"],[1,"badge","badge-sm"],[1,"text-center","font-semibold"],[1,"badge"],[1,"w-full","mb-4"],["multiple","",3,"formControl"],[3,"value"],[1,"badge","badge-sm","ml-2"],[1,"flex","flex-col","md:flex-row","md:justify-between","md:items-start","gap-4","mb-4"],[1,"flex-1"],[1,"flex","items-center","gap-2","mb-2"],[1,"text-lg","font-semibold"],[1,"grid","grid-cols-3","gap-4","text-center"],[1,"text-2xl","font-bold","text-primary"],[1,"text-xs","text-gray-600"],[1,"text-2xl","font-bold","text-success"],[1,"text-2xl","font-bold"],["echarts","",1,"w-full","h-[300px]",3,"options"],[1,"grid","grid-cols-2","md:grid-cols-6","gap-2","mt-4","pt-4","border-t"],[1,"text-center","p-2","bg-blue-50","rounded"],[1,"text-lg","font-semibold","text-blue-700"],[1,"text-center","p-2","bg-green-50","rounded"],[1,"text-lg","font-semibold","text-green-700"],[1,"text-center","p-2","bg-purple-50","rounded"],[1,"text-lg","font-semibold","text-purple-700"],[1,"text-center","p-2","bg-orange-50","rounded"],[1,"text-lg","font-semibold","text-orange-700"],[1,"text-center","p-2","bg-yellow-50","rounded"],[1,"text-lg","font-semibold","text-yellow-700"],[1,"text-center","p-2","bg-pink-50","rounded"],[1,"text-lg","font-semibold","text-pink-700"]],template:function(r,d){r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"mat-icon"),a(5,"arrow_back"),t()(),i(6,"div")(7,"h1",4),a(8),t(),i(9,"div",5)(10,"span",6),a(11),s(12,"transloco"),t(),b(13,Be,2,1,"span",7),t()()()(),b(14,Ie,2,0,"div",8)(15,we,6,3,"div",9)(16,$e,148,104),t()),r&2&&(e(3),E("routerLink",N(8,Ae,d.ROUTES.root,d.ROUTES.teams)),e(5),l(d.player==null?null:d.player.name),e(3),k("",c(12,6,"jersey-number"),": ",d.player==null?null:d.player.trikot),e(2),C(d.player&&d.player.roles&&d.player.roles.length>0?13:-1),e(),C(d.isLoading?14:d.performances.length===0?15:16))},dependencies:[H,Q,J,ve,pe,me,le,ae,oe,re,ne,ie,te,he,ue,Se,be,Ee,ye,_e,ke,ce,se,Ce,Y,Z,z,W],styles:["[_nghost-%COMP%]{display:block}"]});let p=x;return p})();export{St as PlayerDetailStatsPageComponent};
