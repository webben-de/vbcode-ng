import{a as Oe}from"./chunk-NV23LM2Q.js";import{b as Ve}from"./chunk-DHG4G2CP.js";import{a as Be}from"./chunk-7HDMFYW6.js";import{a as ke}from"./chunk-ZLX75YII.js";import{a as j,b as z}from"./chunk-BQXPBH5X.js";import{a as Ie,b as Le}from"./chunk-I27LZL2Y.js";import{a as H,b as Pe,e as q,f as $}from"./chunk-R2NFIBY2.js";import{b as Ce,d as R,f as N,g as he,h as W,j as s,l as xe,m as ye,o as ge,p as we,q as Se,r as Fe,t as A,u as D}from"./chunk-7U6GB7ED.js";import"./chunk-3ACIU7HM.js";import{d as Me}from"./chunk-XNXORNOT.js";import{b as de,c as ue,f as Ge}from"./chunk-LYPYQBPW.js";import{a as _e}from"./chunk-ZNAIGONW.js";import{a as Te}from"./chunk-KWBS3G3M.js";import{V as U,a as be}from"./chunk-ZV26CFN4.js";import{C as ve,D as Ee,i as me,k as pe,l as se,p as ce,y as fe}from"./chunk-EHXDS3RM.js";import{Ab as x,Ac as d,Bc as ne,Cc as ae,Da as I,Ea as L,Fa as K,Fb as f,Kb as y,Lb as g,Nb as w,Ob as S,Pa as T,Pb as a,Qb as i,Rb as v,Sc as oe,Tb as J,Wb as k,Yb as F,fc as B,fd as re,gb as Y,hc as p,ic as _,jb as n,jc as C,kc as ee,ld as le,na as h,pc as te,ta as M,tc as V,uc as O,wa as P,wc as Q,xc as ie,zc as c}from"./chunk-OIJTL5GY.js";import"./chunk-SECEFDB3.js";import{i as G}from"./chunk-GK2WYAVW.js";var Re=(()=>{let t=class t{transform(r,l){return r?r.filter(m=>m.id!==l):null}};t.\u0275fac=function(l){return new(l||t)},t.\u0275pipe=P({name:"pristineEvent",type:t,pure:!0,standalone:!0});let e=t;return e})();var Ne=(()=>{let t=class t{transform(r,l,m){if(!r)return[];let u=Object.values(l).map(b=>b.value),E=r.filter(b=>!u.includes(b?.id))||[],Z=r.find(b=>b?.id===l[m].value);return[...E,Z]}};t.\u0275fac=function(l){return new(l||t)},t.\u0275pipe=P({name:"pristine",type:t,pure:!1,standalone:!0});let e=t;return e})();function ze(e,t){if(e&1&&(a(0,"mat-option",1),p(1),i()),e&2){let o=t.$implicit;f("value",o==null?null:o.id),n(),ee(" ",o==null?null:o.trikot," - ",o==null?null:o.name," ")}}var Ae=(()=>{let t=class t{constructor(){this.index=T.required(),this.home_team_start_rotation=T.required(),this.playerList=T.required(),this.attendees=T.required(),this.attendeesPlayer=oe(()=>this.attendees()?.map(r=>this.playerList().find(l=>l.id===r)))}};t.\u0275fac=function(l){return new(l||t)},t.\u0275cmp=M({type:t,selectors:[["app-single-roation-form-control"]],hostAttrs:[1,"flex","flex-col"],inputs:{index:[1,"index"],home_team_start_rotation:[1,"home_team_start_rotation"],playerList:[1,"playerList"],attendees:[1,"attendees"]},standalone:!0,features:[V],decls:8,vars:6,consts:[[3,"formControl"],[3,"value"]],template:function(l,m){if(l&1&&(a(0,"mat-form-field")(1,"mat-label"),p(2),i(),te(3),a(4,"mat-select",0),w(5,ze,2,3,"mat-option",1,g),c(7,"pristine"),i()()),l&2){n(2),_(m.index());let u=m.home_team_start_rotation().controls;n(2),f("formControl",u[m.index()]),n(),S(ae(7,2,m.attendeesPlayer(),u,m.index()))}},dependencies:[$,q,H,z,j,U,A,N,D,ge,Ne],encapsulation:2});let e=t;return e})();var Ze=()=>["Private","Public"],De=(e,t)=>[e,t],Ue=()=>[4,3,2,5,6,1],Ke=(e,t,o)=>[e,t,o];function Je(e,t){e&1&&(p(0),c(1,"transloco")),e&2&&C(" ",d(1,1,"create-a-new-game")," ")}function Qe(e,t){e&1&&(p(0),c(1,"transloco")),e&2&&C(" ",d(1,1,"edit-a-game")," ")}function We(e,t){if(e&1&&(a(0,"mat-option",18),p(1),i()),e&2){let o=t.$implicit;f("value",o),n(),C(" ",o," ")}}function Xe(e,t){if(e&1&&(a(0,"mat-option",18),p(1),i()),e&2){let o=t.$implicit;f("value",o.id),n(),C(" ",o.name," ")}}function Ye(e,t){if(e&1&&v(0,"app-attendees-select-form-control",20),e&2){let o=F();f("playerList",o.playerList)("attendees",o.createGameForm.controls.attendees)}}function et(e,t){if(e&1&&v(0,"app-single-roation-form-control",32),e&2){let o=t.$implicit,r=F(2);f("playerList",r.playerList)("index",o)("attendees",r.createGameForm.controls.attendees.value)("home_team_start_rotation",r.createGameForm.controls.home_team_start_rotation)}}function tt(e,t){e&1&&(a(0,"span",30),p(1),c(2,"transloco"),i(),a(3,"p"),p(4,"Bezieht sich nur auf Satz 1 solange diese noch nicht Satzweise abgepasst werden kann"),i(),a(5,"div",31),w(6,et,1,4,"app-single-roation-form-control",32,g),i()),e&2&&(n(),_(d(2,1,"start-rotation")),n(5),S(O(3,Ue)))}function it(e,t){if(e&1&&(a(0,"mat-option",18),p(1),i()),e&2){let o=t.$implicit;f("value",o.id),n(),C(" ",o.name," ")}}function nt(e,t){if(e&1&&v(0,"app-single-roation-form-control",33),e&2){let o=t.$implicit,r=F(2);f("playerList",r.playerList)("attendees",r.createGameForm.controls.attendees.value)("index",o)("home_team_start_rotation",r.createGameForm.controls.away_team_start_rotation)}}function at(e,t){e&1&&(a(0,"span",30),p(1),c(2,"transloco"),i(),a(3,"div",31),w(4,nt,1,4,"app-single-roation-form-control",33,g),i()),e&2&&(n(),_(d(2,1,"start-rotation")),n(3),S(O(3,Ue)))}function ot(e,t){e&1&&(K(),a(0,"svg",42)(1,"title"),p(2,"youtube"),i(),v(3,"path",44),i())}function rt(e,t){e&1&&(K(),a(0,"svg",43)(1,"title"),p(2,"video-outline"),i(),v(3,"path",45),i())}function lt(e,t){if(e&1&&(a(0,"li",40)(1,"a",41),x(2,ot,4,0,":svg:svg",42)(3,rt,4,0,":svg:svg",43),i()()),e&2){let o=t.$implicit;n(),f("href",o,Y),n(),y(o.includes("youtube")?2:3)}}function mt(e,t){if(e&1){let o=J();a(0,"div",34)(1,"div",14)(2,"mat-form-field",8)(3,"mat-label"),p(4),c(5,"transloco"),i(),v(6,"input",35),i()(),a(7,"div",14)(8,"mat-form-field",8)(9,"mat-label"),p(10),c(11,"transloco"),i(),v(12,"input",36),i()()(),a(13,"div",37)(14,"input",38,4),k("keydown.enter",function(l){I(o);let m=B(15),u=F();return L(u.addMediaLink(l,m))}),i(),a(16,"ul",39),w(17,lt,4,2,"li",40,g),i()()}if(e&2){let o=F();n(4),C("",d(5,2,"result-home")," "),n(6),C("",d(11,4,"result-away")," "),n(7),S(o.createGameForm.controls.media_links.value)}}function pt(e,t){if(e&1&&(a(0,"a",29),p(1),c(2,"transloco"),i()),e&2){let o=F();f("routerLink",ie(4,Ke,o.ROUTES.root,o.ROUTES.roationPlaner,o.createGameForm.controls.id.value)),n(),_(d(2,2,"See Rotation Preview"))}}var Jt=(()=>{let t=class t{constructor(){this.ROUTES=_e,this.route=h(me),this.router=h(pe),this.snack=h(ke),this.eventsService=h(Te),this.supabase=h(Ee),this.playerService=h(be),this.teamService=h(Be),this.session=fe(ve.session),this.teams=[],this.players=this.playerService.getPlayers(),this.playerList=[],this.createGameForm=new W({id:new s(void 0),title:new s("",R.required),date:new s(new Date,R.required),media_links:new s([""]),attendees:new s([]),result_home:new s(void 0),result_away:new s(void 0),home_team:new s(void 0),home_team_start_rotation:new W({1:new s(null),2:new s(null),3:new s(null),4:new s(null),5:new s(null),6:new s(null)}),away_team_start_rotation:new Fe([new s(null),new s(null),new s(null),new s(null),new s(null),new s(null)]),away_team:new s(void 0),owner:new s(this.session().user.id,R.required),shared_with:new s([]),visibility:new s("Private")})}addMediaLink(r,l){r.preventDefault();let m=r.target?.value,u=this.createGameForm.controls.media_links.value;u&&u.length>0?this.createGameForm.controls.media_links.setValue([...u,m]):this.createGameForm.controls.media_links.setValue([m]),l.value=""}createGame(){return G(this,null,function*(){let r=this.createGameForm.value;try{yield this.eventsService.createEvent(r),this.snack.open("Event create","open",{duration:5e3}).onAction().subscribe(()=>{})}catch(l){this.snack.open("Error creating Event:"+l,"OK",{duration:2e3})}})}OnHomeTeamChange(r){return G(this,null,function*(){if(!r)return;let l=yield this.teamService.getTeam(r);this.playerList=yield this.playerService.getPlayerList(l.players)})}ngOnInit(){return G(this,null,function*(){this.route.data.subscribe(r=>{r.game&&this.createGameForm.patchValue(r.game),this.OnHomeTeamChange(this.createGameForm.controls.home_team.value)}),this.teams=yield this.teamService.getTeams()})}};t.\u0275fac=function(l){return new(l||t)},t.\u0275cmp=M({type:t,selectors:[["app-create-game-page"]],standalone:!0,features:[V],decls:69,vars:51,consts:[["form",""],["homeTeam",""],["awayTeam",""],["eventFinished",""],["inMedia",""],[1,"flex","flex-col","items-start","gap-8","h-full","p-8"],[1,"text-2xl","font-bold"],[1,"flex","flex-col","w-full",3,"submit","formGroup"],[1,"w-full"],["matInput","","formControlName","title"],[1,"flex","justify-between"],[1,"w-1/3"],["formControlName","visibility"],[3,"value",4,"ngFor","ngForOf"],[1,"w-1/2"],["matInput","","type","date","formControlName","date"],[1,"text-lg"],["formControlName","home_team",3,"valueChange"],[3,"value"],[3,"routerLink"],[3,"playerList","attendees"],[1,"my-2"],[1,""],["formControlName","away_team"],[1,"label","cursor-pointer"],[1,"label-text"],["type","checkbox",1,"toggle"],[1,"btn",3,"type"],[1,"flex","flex-col","gap-2"],[1,"btn","btn-outline","btn-secondary",3,"routerLink"],[1,"text-md"],[1,"grid","grid-cols-3"],[3,"playerList","index","attendees","home_team_start_rotation"],[3,"playerList","attendees","index","home_team_start_rotation"],[1,"flex","gap-2","w-full"],["matInput","","type","number","formControlName","result_home"],["matInput","","type","number","formControlName","result_away"],[1,"flex","flex-col"],["type","text","placeholder","Enter link here",1,"input","input-bordered","input-primary","w-full","max-w-xs",3,"keydown.enter"],[1,"flex","gap-2","h-8","my-4"],[1,"flex"],["target","_blank",1,"btn","btn-xs","w-12","h-12",3,"href"],["width","48","height","48"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["d","M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.5,18.78 17.18,18.84C15.88,18.91 14.69,18.94 13.59,18.94L12,19C7.81,19 5.2,18.84 4.17,18.56C3.27,18.31 2.69,17.73 2.44,16.83C2.31,16.36 2.22,15.73 2.16,14.93C2.09,14.13 2.06,13.44 2.06,12.84L2,12C2,9.81 2.16,8.2 2.44,7.17C2.69,6.27 3.27,5.69 4.17,5.44C4.64,5.31 5.5,5.22 6.82,5.16C8.12,5.09 9.31,5.06 10.41,5.06L12,5C16.19,5 18.8,5.16 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z",1,"fill-[#FF0000]"],["d","M15,8V16H5V8H15M16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5V7A1,1 0 0,0 16,6Z",1,"fill-secondary"]],template:function(l,m){if(l&1){let u=J();a(0,"div",5)(1,"span",6),x(2,Je,2,3)(3,Qe,2,3),i(),a(4,"form",7,0),k("submit",function(){return I(u),L(m.createGame())}),a(6,"mat-form-field",8)(7,"mat-label"),p(8),c(9,"transloco"),i(),v(10,"input",9),i(),a(11,"div",10)(12,"mat-form-field",11)(13,"mat-label"),p(14),c(15,"transloco"),i(),a(16,"mat-select",12),x(17,We,2,2,"mat-option",13),i()(),a(18,"mat-form-field",14)(19,"mat-label"),p(20),c(21,"transloco"),i(),v(22,"input",15),i()(),v(23,"hr"),a(24,"span",16),p(25),c(26,"transloco"),i(),a(27,"mat-form-field",8)(28,"mat-label"),p(29),c(30,"transloco"),i(),a(31,"mat-select",17,1),k("valueChange",function(Z){return I(u),L(m.OnHomeTeamChange(Z))}),w(33,Xe,2,2,"mat-option",18,g),i(),a(35,"mat-hint")(36,"a",19),p(37),c(38,"transloco"),i()()(),x(39,Ye,1,2,"app-attendees-select-form-control",20)(40,tt,8,4),v(41,"hr",21),a(42,"div",22)(43,"mat-form-field",8)(44,"mat-label"),p(45),c(46,"transloco"),i(),a(47,"mat-select",23,2),w(49,it,2,2,"mat-option",18,g),c(51,"pristineEvent"),i()(),x(52,at,6,4),i(),a(53,"label",24)(54,"span",25),p(55),c(56,"transloco"),i(),v(57,"input",26,3),i(),x(59,mt,19,6),a(60,"button",27),p(61),c(62,"transloco"),i()(),v(63,"hr"),a(64,"p",28)(65,"a",29),p(66),c(67,"transloco"),i(),x(68,pt,3,8,"a",29),i()()}if(l&2){let u=B(32),E=B(48);n(2),y(m.createGameForm.controls.id.value?3:2),n(2),f("formGroup",m.createGameForm),n(4),_(d(9,21,"title")),n(6),_(d(15,23,"visibility")),n(3),f("ngForOf",O(44,Ze)),n(3),_(d(21,25,"date")),n(5),_(d(26,27,"home")),n(4),_(d(30,29,"home-team")),n(4),S(m.teams),n(3),f("routerLink",Q(45,De,m.ROUTES.root+m.ROUTES.teams,u.value)),n(),C(" ",d(38,31,"edit-this-team")," "),n(2),y(m.createGameForm.controls.home_team.valid?39:-1),n(),y(u.value?40:-1),n(5),_(d(46,33,"away-team")),n(4),S(ne(51,35,m.teams,u.value)),n(3),y(E.value?52:-1),n(3),_(d(56,38,"event-finished")),n(4),y(59),n(),f("type","submit"),n(),_(d(62,40,"submit")),n(4),f("routerLink",Q(48,De,m.ROUTES.root,m.ROUTES.games)),n(),_(d(67,42,"see-all-your-games-here")),n(2),y(m.createGameForm.controls.id.value?68:-1)}},dependencies:[$,q,H,Pe,Me,Le,Ie,A,xe,Ce,ye,N,he,D,we,Se,Ve,z,j,U,Ge,le,re,ce,se,ue,de,Ae,Re,Oe],encapsulation:2});let e=t;return e})();export{Jt as CreateGamePageComponent};
