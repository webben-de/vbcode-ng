import{a as Ct,b as Vt}from"./chunk-HSIPPX3X.js";import{a as Et,b as wt}from"./chunk-NDCLUC4R.js";import{a as Rt,e as Mt,f as St}from"./chunk-CL4REFVJ.js";import{b as ut,f as _t,k as pt,n as mt,t as vt,u as ft}from"./chunk-LSGJARMQ.js";import"./chunk-3ACIU7HM.js";import{a as Nt}from"./chunk-BCCPXHBQ.js";import{a as xt,b as yt}from"./chunk-RHCUBNMR.js";import{b as lt,c as dt}from"./chunk-Z5LCR3JO.js";import{a as U}from"./chunk-ZNAIGONW.js";import{a as bt}from"./chunk-VPMAAHZC.js";import{H as Tt,Q as It,V as kt,a as gt}from"./chunk-IGCTOUO2.js";import{C as ct,e as st,f as at,i as nt,k as P,l as rt,p as ot,y as ht}from"./chunk-GTPAEQNT.js";import{$b as L,B as $,Da as B,Ea as O,Eb as u,Gb as N,Jb as y,Kb as S,Mb as E,Nb as w,Ob as l,Pa as k,Pb as o,Qb as v,Sb as K,Vb as C,Xb as f,ac as F,ba as q,bc as W,ec as J,fc as V,gc as c,gd as it,ha as G,hc as g,ia as Z,ib as n,ic as R,jc as X,kd as A,lc as j,mc as z,na as _,nc as H,oc as tt,sc as M,ta as I,ua as Y,vc as et,yc as p,zb as x,zc as m}from"./chunk-EGQDYXLC.js";import"./chunk-SECEFDB3.js";import{a as D,f as Ot,i as T}from"./chunk-GK2WYAVW.js";var At=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=Y({type:e}),e.\u0275inj=Z({imports:[Tt,It]});let i=e;return i})();var b=Ot(Nt());var Lt={title:"App Title",description:"App description",author:"Daniil Baunov",keywords:["Angular","meta tags","Angular Universal"],type:"website"},Pt=(()=>{let e=class e{constructor(){this.meta=_(st),this.titleService=_(at),this.router=_(P)}updateMetadata(t,a=!0){let s=D(D({},Lt),t),h=this.generateMetaDefinitions(s);this.meta.addTags([...h,{name:"robots",content:a?"index, follow":"noindex"},{name:"viewport",content:"width=device-width, initial-scale=1"},{"http-equiv":"Content-Type",content:"text/html; charset=utf-8"}]),this.titleService.setTitle(s.title)}generateMetaDefinitions(t){return[{name:"title",content:t.title},{property:"og:title",content:t.title},{name:"description",content:t.description},{property:"og:description",content:t.description},{name:"author",content:t.author},{property:"og:author",content:t.author},{name:"keywords",content:t.keywords.join(", ")},{property:"og:type",content:t.type}]}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Ut=(()=>{let e=class e{constructor(){this.currentRotation=k.required(),this.index=k.required(),this.toggleTrikot=k.required(),this.roatedPlayer=k.required(),this.rotationIndexMap=new Map().set(1,"4").set(2,"3").set(3,"2").set(4,"5").set(5,"6").set(6,"1"),this.rotationMap=new Map().set("1",new Map().set(1,4).set(2,3).set(3,2).set(4,5).set(5,6).set(6,1)).set("2",new Map().set(1,5).set(2,4).set(3,3).set(4,6).set(5,1).set(6,2)).set("3",new Map().set(1,6).set(2,5).set(3,4).set(4,1).set(5,2).set(6,3)).set("4",new Map().set(1,1).set(2,6).set(3,5).set(4,2).set(5,3).set(6,4)).set("5",new Map().set(1,2).set(2,1).set(3,6).set(4,3).set(5,4).set(6,5)).set("6",new Map().set(1,3).set(2,2).set(3,1).set(4,4).set(5,5).set(6,6))}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=I({type:e,selectors:[["app-grid-item"]],hostAttrs:[1,"p-5","border","border-1","flex","justify-center","items-center","h-full"],inputs:{currentRotation:[1,"currentRotation"],index:[1,"index"],toggleTrikot:[1,"toggleTrikot"],roatedPlayer:[1,"roatedPlayer"]},standalone:!0,features:[M],decls:8,vars:4,consts:[[1,"flex","flex-col","justify-center","items-center","gap-2"],[1,"bg-neutral","rounded-box","text-neutral-content","flex","flex-col","p-2"],[1,"countdown","font-league","text-5xl","text-center","text-primary"],[1,"swap","font-league","uppercase"]],template:function(a,s){if(a&1&&(l(0,"div",0),tt(1)(2),l(3,"div",1)(4,"span",2),v(5,"span"),o()(),l(6,"label",3),c(7),o()()),a&2){let h=s.rotationMap.get(s.currentRotation()),d=s.roatedPlayer().get(h.get(s.index()));n(5),V("--value:",s.toggleTrikot()?d==null?null:d.trikot:s.rotationIndexMap.get(s.index()),";"),n(2),R(" ",d==null?null:d.name," ")}},dependencies:[A],encapsulation:2});let i=e;return i})();var Ft=["rangeSlider"],Wt=(i,e)=>[i,e];function Xt(i,e){if(i&1&&(l(0,"mat-option",5),c(1),o()),i&2){let r=e.$implicit;u("value",r.id),n(),R(" ",r.title," ")}}function jt(i,e){if(i&1&&(l(0,"a",6),c(1),p(2,"transloco"),o()),i&2){let r=f();u("routerLink",et(4,Wt,r.ROUTES.root+r.ROUTES.editGame,r.selectedEvent)),n(),g(m(2,2,"edit-this-event"))}}function zt(i,e){i&1&&(l(0,"p"),c(1),p(2,"transloco"),o()),i&2&&(n(),g(m(2,1,"move-the-slider-preview-each-rotation-on-the-curt")))}function Ht(i,e){if(i&1&&(l(0,"div",16)(1,"div",17)(2,"span",18),v(3,"span"),o()(),l(4,"label",19),c(5),o()()),i&2){let r=e.$implicit;n(3),V("--value:",r==null?null:r.trikot,";"),n(2),R(" ",r==null?null:r.name," ")}}function Qt(i,e){if(i&1){let r=K();l(0,"div",7)(1,"h6",9),c(2),p(3,"transloco"),o(),l(4,"mat-slide-toggle",10,0)(6,"span",11),c(7),p(8,"transloco"),p(9,"transloco"),p(10,"transloco"),o()(),l(11,"div",12),v(12,"app-grid-item",13)(13,"app-grid-item",13)(14,"app-grid-item",13)(15,"app-grid-item",13)(16,"app-grid-item",13)(17,"app-grid-item",13),o(),l(18,"input",14,1),H("ngModelChange",function(a){B(r);let s=f();return z(s.rotationSlider,a)||(s.rotationSlider=a),O(a)}),C("ngModelChange",function(){B(r);let a=f();return O(a.hasMoved=!0)}),o(),x(20,zt,3,3,"p"),v(21,"hr"),l(22,"h3"),c(23,"Bank"),o(),l(24,"div",15),E(25,Ht,6,4,"div",16,S),o()()}if(i&2){let r=J(5),t=f();n(2),X("",m(3,33,"rotation"),": ",t.rotationSlider,""),n(2),u("checked",!0),n(3),X(" ",m(8,35,"show")," ",r.checked?m(9,37,"Trikotnumber"):m(10,39,"BasePosition"),""),n(5),u("currentRotation",t.slider)("index",1)("toggleTrikot",r.checked)("roatedPlayer",t.roatedPlayer),n(),u("currentRotation",t.slider)("index",2)("toggleTrikot",r.checked)("roatedPlayer",t.roatedPlayer),n(),u("currentRotation",t.slider)("index",3)("toggleTrikot",r.checked)("roatedPlayer",t.roatedPlayer),n(),u("currentRotation",t.slider)("index",4)("toggleTrikot",r.checked)("roatedPlayer",t.roatedPlayer),n(),u("currentRotation",t.slider)("index",5)("toggleTrikot",r.checked)("roatedPlayer",t.roatedPlayer),n(),u("currentRotation",t.slider)("index",6)("toggleTrikot",r.checked)("roatedPlayer",t.roatedPlayer),n(),N("tooltip",!t.hasMoved),j("ngModel",t.rotationSlider),n(2),y(t.hasMoved?-1:20),n(5),w(t.bank)}}function $t(i,e){i&1&&(l(0,"div",8)(1,"mat-icon",20),c(2,"swipe_up"),o(),l(3,"p"),c(4),p(5,"transloco"),o()()),i&2&&(n(4),g(m(5,1,"please-select-an-event-to-see-information-here")))}var Ke=(()=>{let e=class e{constructor(){this.ROUTES=U,this.router=_(P),this.meta=_(Pt),this.route=_(nt),this.eventService=_(bt),this.playerService=_(gt),this.session=ht(ct.session),this.events=this.eventService.getEvents(),this.roatedPlayer=new Map,this.rotationSlider=1,this.hasMoved=!1,this.bank=[]}get slider(){return String(this.rotationSlider)}ngOnInit(){return T(this,null,function*(){this.route.data.subscribe(t=>T(this,null,function*(){this.event=t.game,this.selectedEvent=this.event?.id,yield this.updateProps(),this.meta.updateMetadata({title:`${this.event?.title}-> Rotation Planer`,description:"Plan your rotation for your next game",type:"website"},!0)})),$(4e3).pipe(q(()=>!this.hasMoved)).subscribe(()=>{this.rotationSlider===6?this.rotationSlider=1:this.rotationSlider+=1})})}updateProps(){return T(this,null,function*(){let t=new Map;if(!this.event)return;this.router.navigate([U.root+U.roationPlaner,this.event.id]);let a=Object.entries(this.event?.home_team_start_rotation),s=Object.values(Object.fromEntries(a)),h=yield this.playerService.getPlayerList([...a.map(d=>d[1]),...(0,b.without)(this.event.attendees,...s)]);a.forEach(([d,Dt])=>{t.set(Number(d),h.find(Bt=>Bt.id===Dt))}),this.roatedPlayer=t,console.log((0,b.without)(this.event.attendees,...s)),this.bank=(0,b.without)(this.event.attendees,...s).map(d=>(0,b.find)(h,{id:d}))})}handleGameChange(t){return T(this,null,function*(){this.event=yield this.eventService.getEvent(t),this.updateProps()})}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=I({type:e,selectors:[["app-rotation-planer"]],viewQuery:function(a,s){if(a&1&&L(Ft,5),a&2){let h;F(h=W())&&(s.rangeSlider=h.first)}},hostAttrs:[1,"w-full","flex","h-full"],standalone:!0,features:[M],decls:14,vars:8,consts:[["toggleTrikot",""],["rangeSlider",""],[1,"flex","flex-col","w-full","h-full","p-5","justify-center","gap-8"],[1,"flex","flex-col"],["placeholder","Select Game",3,"ngModelChange","valueChange","ngModel"],[3,"value"],[3,"routerLink"],[1,"flex","flex-col","justify-evenly","gap-4"],[1,"flex","flex-col","items-center"],[1,"text-md"],[3,"checked"],[1,"!text-primary"],[1,"grid","grid-cols-3","gap-8","grid-rows-2","justify-center","border-2","p-8"],[3,"currentRotation","index","toggleTrikot","roatedPlayer"],["type","range","min","1","max","6","value","1","data-tip","move to stop auto-rotation",1,"tooltip","tooltip-open","tooltip-secondary",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-6","gap-2","grid-rows-1","justify-center"],[1,"flex","flex-col","justify-center","items-center","gap-2","border","border-1","p-3"],[1,"bg-neutral","rounded-box","text-neutral-content","flex","flex-col","p-2"],[1,"countdown","font-league","text-5xl","text-center","text-primary"],[1,"swap","font-league","uppercase"],[1,"!h-20"]],template:function(a,s){if(a&1&&(l(0,"div",2)(1,"div",3)(2,"mat-form-field")(3,"mat-label"),c(4),p(5,"transloco"),o(),l(6,"mat-select",4),H("ngModelChange",function(d){return z(s.selectedEvent,d)||(s.selectedEvent=d),d}),C("valueChange",function(d){return s.handleGameChange(d)}),E(7,Xt,2,2,"mat-option",5,S),p(9,"async"),o()(),x(10,jt,3,7,"a",6),o(),v(11,"hr"),x(12,Qt,27,41,"div",7)(13,$t,6,3,"div",8),o()),a&2){let h;n(4),g(m(5,4,"event")),n(2),j("ngModel",s.selectedEvent),n(),w(m(9,6,s.events)),n(3),y(((h=s.session())==null||h.user==null?null:h.user.id)===(s.event==null?null:s.event.owner)?10:-1),n(2),y(s.event?12:13)}},dependencies:[A,it,vt,ut,mt,_t,pt,ot,rt,ft,St,Mt,Rt,wt,Et,kt,At,Vt,Ct,yt,xt,Ut,dt,lt],encapsulation:2});let i=e;return i})();export{Ke as RotationPlanerPageComponent};
