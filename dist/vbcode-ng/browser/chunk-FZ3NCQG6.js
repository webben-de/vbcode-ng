import{b as Ye,c as Ir}from"./chunk-SECEFDB3.js";import{r as Ar}from"./chunk-EWYTQ76Z.js";import{$ as We,Ac as Gt,Cc as Or,D as se,F as Ke,Fa as Ut,Ha as br,I as Mt,J as Xe,La as F,M as gr,Ma as Sr,N as mr,Nc as Tr,Oc as xr,S as _r,Ta as Er,X as K,Z as yr,b as Ct,ba as vr,d as Be,fa as O,g as ye,h as Ve,i as qe,ia as x,k as pr,ka as y,kd as kr,l as He,la as S,m as J,o as Dt,oa as Lt,p as B,pa as wr,q as ze,r as $t,t as re,v as Je,va as Ft,z as Nt}from"./chunk-H7CKKUTN.js";import{a as b,b as Ge,g as h}from"./chunk-GAL4ENT6.js";var D="NGXS_META",Ht="NGXS_OPTIONS_META",Bt="NGXS_SELECTOR_META";function zt(n){if(!n.hasOwnProperty(D)){let e={name:null,actions:{},defaults:{},path:null,makeRootSelector(t){return t.getStateGetter(e.name)},children:[]};Object.defineProperty(n,D,{value:e})}return ne(n)}function ne(n){return n[D]}function jr(n){return n.hasOwnProperty(Bt)||Object.defineProperty(n,Bt,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),Jt(n)}function Jt(n){return n[Bt]}function Js(n,e){return n===e}function Ks(n,e,t){if(e===null||t===null||e.length!==t.length)return!1;let r=e.length;for(let s=0;s<r;s++)if(!n(e[s],t[s]))return!1;return!0}function Qe(n,e=Js){let t=null,r=null;function s(){return Ks(e,t,arguments)||(r=n.apply(null,arguments)),t=arguments,r}return s.reset=function(){t=null,r=null},s}var Xs=!1,Ws=(()=>{let e=class e{static set(r){this._value=r}static pop(){let r=this._value;return this._value={},r}};e._value={};let n=e;return n})(),Kt=new x(Xs?"INITIAL_STATE_TOKEN":"",{providedIn:"root",factory:()=>Ws.pop()}),et=(()=>{let e=class e extends qe{constructor(){super(1)}bootstrap(){this.next(!0),this.complete()}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Rr=!1,Pr=new x(Rr?"\u0275NGXS_STATE_FACTORY":""),Cr=new x(Rr?"\u0275NGXS_STATE_CONTEXT_FACTORY":"");function Dr(n){let e=[],t=!1;return function(...s){if(t){e.unshift(s);return}for(t=!0,n(...s);e.length>0;){let i=e.pop();i&&n(...i)}t=!1}}var Ze=class extends ye{constructor(){super(...arguments),this._orderedNext=Dr(e=>super.next(e))}next(e){this._orderedNext(e)}},Vt=class extends Ve{constructor(e){super(e),this._orderedNext=Dr(t=>super.next(t)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}};function Xt(n){return e=>new Be(t=>e.subscribe({next(r){n(()=>t.next(r))},error(r){n(()=>t.error(r))},complete(){n(()=>t.complete())}}))}var tt=(()=>{let e=class e extends Vt{constructor(){super({}),this.state=Ar(this.pipe(Xt(xr)),{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.complete()}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var rt=(()=>{let e=class e{};e.type="@@INIT";let n=e;return n})(),st=(()=>{let e=class e{constructor(r){this.addedStates=r}};e.type="@@UPDATE_STATE";let n=e;return n})(),Zs=!1,$r=new x(Zs?"NGXS_PLUGINS":"");function ve(n){return n.constructor?.type||n.type}var Wt=(n,e,t)=>{n=b({},n);let r=e.split("."),s=r.length-1;return r.reduce((i,o,a)=>(a===s?i[o]=t:i[o]=Array.isArray(i[o])?i[o].slice():b({},i[o]),i&&i[o]),n),n},nt=(n,e)=>e.split(".").reduce((t,r)=>t&&t[r],n);function Nr(n){return typeof n=="function"}var Qs=(()=>{let e=class e{enter(r){return r()}leave(r){return r()}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function en(n,e,t){throw new Error(`State name '${n}' from ${e} already exists in ${t}.`)}function tn(n){throw new Error(`States must be decorated with @State() decorator, but "${n}" isn't.`)}function rn(n){return`'${n}' class should be decorated with @Injectable() right after the @State() decorator`}function sn(n){let e="You have an invalid state initialization order. This typically occurs when `NgxsModule.forFeature`\nor `provideStates` is called before `NgxsModule.forRoot` or `provideStore`.\nOne example is when `NgxsRouterPluginModule.forRoot` is called before `NgxsModule.forRoot`.";if(n){let t=Object.keys(n).map(r=>`"${r}"`);e+=`
Feature states added before the store initialization is complete: ${t.join(", ")}.`}return e}var Vr=(()=>{let e=class e{constructor(r,s){this._ngZone=r,this._platformId=s}enter(r){return kr(this._platformId)?this.runInsideAngular(r):this.runOutsideAngular(r)}leave(r){return this.runInsideAngular(r)}runInsideAngular(r){return F.isInAngularZone()?r():this._ngZone.run(r)}runOutsideAngular(r){return F.isInAngularZone()?this._ngZone.runOutsideAngular(r):r()}};e.\u0275fac=function(s){return new(s||e)(y(F),y(Er))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var qr=!1,Hr=new x(qr?"CUSTOM_NGXS_EXECUTION_STRATEGY":""),nn=new x(qr?"NGXS_EXECUTION_STRATEGY":"",{providedIn:"root",factory:()=>{let n=S(F),e=S(wr),t=e.get(Hr),r=n instanceof F;return t?e.get(t):e.get(r?Vr:Qs)}}),zr=(()=>{let e=class e{constructor(r){this._executionStrategy=r}enter(r){return this._executionStrategy.enter(r)}leave(r){return this._executionStrategy.leave(r)}};e.\u0275fac=function(s){return new(s||e)(y(nn))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Jr=n=>(...e)=>n.shift()(...e,(...r)=>Jr(n)(...r));function ot(n){return Xt(e=>n.leave(e))}var Kr=(()=>{let e=class e extends Ze{ngOnDestroy(){this.complete()}};e.\u0275fac=(()=>{let r;return function(i){return(r||(r=Ut(e)))(i||e)}})(),e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Zt=(()=>{let e=class e{constructor(r,s){this._parentManager=r,this._pluginHandlers=s,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){let r=this.getPluginHandlers();this.rootPlugins.push(...r)}getPluginHandlers(){return(this._pluginHandlers||[]).map(s=>s.handle?s.handle.bind(s):s)}};e.\u0275fac=function(s){return new(s||e)(y(e,12),y($r,8))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let n=e;return n})(),Qt=new WeakMap,Mr=Ct.onUnhandledError;Ct.onUnhandledError=function(n){let e=Qt.get(n);if(e)e();else if(Mr)Mr.call(this,n);else throw n};function on(n){let e=Qt.get(n);return e?(e(),!0):!1}function an(n,e){if(n!==null&&typeof n=="object"){let t=!1;Qt.set(n,()=>{t||(t=!0,e())})}return n}function cn(n){return e=>{let t=e.subscribe({error:r=>{n.runOutsideAngular(()=>{queueMicrotask(()=>{t&&on(r)})})}});return new Be(r=>(t?.unsubscribe(),t=null,e.subscribe(r)))}}var Xr=(()=>{let e=class e extends ye{};e.\u0275fac=(()=>{let r;return function(i){return(r||(r=Ut(e)))(i||e)}})(),e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ln=(()=>{let e=class e{constructor(r,s,i,o,a,c){this._ngZone=r,this._actions=s,this._actionResults=i,this._pluginManager=o,this._stateStream=a,this._ngxsExecutionStrategy=c}dispatch(r){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(r)).pipe(cn(this._ngZone),ot(this._ngxsExecutionStrategy))}dispatchByEvents(r){return Array.isArray(r)?r.length===0?B(void 0):Nt(r.map(s=>this.dispatchSingle(s))).pipe(re(()=>{})):this.dispatchSingle(r)}dispatchSingle(r){let s=this._stateStream.getValue(),i=this._pluginManager.plugins;return Jr([...i,(o,a)=>{o!==s&&this._stateStream.next(o);let c=this.getActionResultStream(a);return c.subscribe(l=>this._actions.next(l)),this._actions.next({action:a,status:"DISPATCHED"}),this.createDispatchObservable(c)}])(s,r).pipe(K())}getActionResultStream(r){return this._actionResults.pipe(se(s=>s.action===r&&s.status!=="DISPATCHED"),Xe(1),K())}createDispatchObservable(r){return r.pipe(mr(s=>{switch(s.status){case"SUCCESSFUL":return B(this._stateStream.getValue());case"ERRORED":return ze(()=>s.error);default:return pr}})).pipe(K())}};e.\u0275fac=function(s){return new(s||e)(y(F),y(Kr),y(Xr),y(Zt),y(tt),y(zr))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),er=!1,Wr=new x(er?"ROOT_STATE_TOKEN":""),Yr=new x(er?"FEATURE_STATE_TOKEN":""),Zr=new x(er?"NGXS_OPTIONS":""),we=(()=>{let e=class e{constructor(){this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=Vr,this.selectorOptions={injectContainerState:!1,suppressErrors:!1}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=O({token:e,factory:()=>(()=>{let r=new e,s=S(Zr);return Ge(b(b({},r),s),{selectorOptions:b(b({},r.selectorOptions),s.selectorOptions)})})(),providedIn:"root"});let n=e;return n})(),Yt=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}};var be=(()=>{let e=class e{constructor(r,s,i){this._stateStream=r,this._dispatcher=s,this._config=i}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:s=>this._stateStream.next(s),dispatch:s=>this._dispatcher.dispatch(s)}}setStateToTheCurrentWithNew(r){let s=this.getRootStateOperations(),i=s.getState();s.setState(b(b({},i),r.defaults))}};e.\u0275fac=function(s){return new(s||e)(y(tt),y(ln),y(we))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var un=!1;function hn(n,e,t){return r=>{let{argumentSelectorFunctions:s,selectorOptions:i}=fn(r,n,e),{suppressErrors:o}=i;return function(c){let l=s.map(u=>u(c));try{return t(...l)}catch(u){if(o&&u instanceof TypeError)return;throw un&&console.error("The selector below has thrown an error upon invocation. Please check for any unsafe property access that may result in null or undefined values.",n.originalFn),u}}}}function dn(n,e){let t=e&&e.containerClass,s=Qe(function(...o){let a=n.apply(t,o);return a instanceof Function?Qe.apply(null,[a]):a});return Object.setPrototypeOf(s,n),s}function fn(n,e,t=[]){let r=e.getSelectorOptions(),s=n.getSelectorOptions(r),o=pn(t,s,e.containerClass).map(a=>Qr(a)(n));return{selectorOptions:s,argumentSelectorFunctions:o}}function pn(n=[],e,t){let r=[],s=e.injectContainerState||n.length===0;return t&&s&&ne(t)&&r.push(t),r.push(...n),r}function Qr(n){let e=Jt(n)||ne(n);return e&&e.makeRootSelector||(()=>n)}var tr=!1;function gn(n){return e=>{for(let t=0;t<n.length;t++){if(!e)return;e=e[n[t]]}return e}}function mn(n){let e=n,t="store."+e[0],r=0,s=e.length,i=t;for(;++r<s;)i=i+" && "+(t=t+"."+e[r]);return new Function("store","return "+i+";")}var _n=new x(tr?"PROP_GETTER":"",{providedIn:"root",factory:()=>S(we).compatibility?.strictContentSecurityPolicy?gn:mn});function yn(n){let e=t=>{let r=n.find(s=>s===t);if(tr&&!r)throw new Error(`Child state not found: ${t}. \r
You may have forgotten to add states to module`);return r[D].name};return n.reduce((t,r)=>{let{name:s,children:i}=r[D];return t[s]=(i||[]).map(e),t},{})}function vn(n){return n.reduce((e,t)=>{let r=t[D];return e[r.name]=t,e},{})}function wn(n,e={}){let t=(r,s)=>{for(let i in r)if(r.hasOwnProperty(i)&&r[i].indexOf(s)>=0){let o=t(r,i);return o!==null?`${o}.${i}`:i}return null};for(let r in n)if(n.hasOwnProperty(r)){let s=t(n,r);e[r]=s?`${s}.${r}`:r}return e}function bn(n){let e=[],t={},r=(s,i=[])=>{Array.isArray(i)||(i=[]),i.push(s),t[s]=!0,n[s].forEach(o=>{if(tr&&i.indexOf(o)>=0)throw new Error(`Circular dependency '${o}' is required by '${s}': ${i.join(" -> ")}`);t[o]||r(o,i.slice(0))}),e.indexOf(s)<0&&e.push(s)};return Object.keys(n).forEach(s=>r(s)),e.reverse()}function Sn(...n){return En(n,["DISPATCHED"])}function En(n,e,t=Tn){let r=xn(n),s=e&&kn(e);return function(i){return i.pipe(On(r,s),t())}}function On(n,e){return se(t=>{let r=ve(t.action),s=n[r],i=e?e[t.status]:!0;return s&&i})}function Tn(){return re(n=>n.action)}function xn(n){return n.reduce((e,t)=>(e[ve(t)]=!0,e),{})}function kn(n){return n.reduce((e,t)=>(e[t]=!0,e),{})}function An(n){return e=>{let t=b({},e);for(let r in n)t[r]=n[r];return t}}var rr=(()=>{let e=class e{constructor(r){this._internalStateOperations=r}createStateContext(r){let s=this._internalStateOperations.getRootStateOperations();return{getState(){let i=s.getState();return ts(i,r.path)},patchState(i){let o=s.getState(),a=An(i);Lr(s,o,a,r.path)},setState(i){let o=s.getState();Nr(i)?Lr(s,o,i,r.path):es(s,o,i,r.path)},dispatch(i){return s.dispatch(i)}}}};e.\u0275fac=function(s){return new(s||e)(y(be))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function es(n,e,t,r){let s=Wt(e,r,t);return n.setState(s),s}function Lr(n,e,t,r){let s=ts(e,r),i=t(s);return es(n,e,i,r)}function ts(n,e){return nt(n,e)}var to=new RegExp("^[a-zA-Z0-9_]+$");function In(n,e,t){let r=t[n];r&&r!==e&&en(n,e.name,r.name)}function jn(n){n.forEach(e=>{ne(e)||tn(e.name)})}function Rn(n){Cn(n)||Pn(n)||console.warn(rn(n.name))}function Pn(n){return!!n.\u0275prov}function Cn(n){return(n.__annotations__||[]).some(t=>t?.ngMetadataName==="Injectable")}var Dn=!1,$n=new x(Dn?"NGXS_DEVELOPMENT_OPTIONS":"",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})}),Nn=(()=>{let e=class e{constructor(r){this._ignoredActions=new Set([rt.type,st.type]),typeof r.warnOnUnhandledActions=="object"&&this.ignoreActions(...r.warnOnUnhandledActions.ignore)}ignoreActions(...r){for(let s of r)this._ignoredActions.add(s.type)}warn(r){Array.from(this._ignoredActions).some(i=>i===ve(r))||(r=r.constructor&&r.constructor.name!=="Object"?r.constructor.name:r.type,console.warn(`The ${r} action has been dispatched but hasn't been handled. This may happen if the state with an action handler for this action is not registered.`))}};e.\u0275fac=function(s){return new(s||e)(y($n))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let n=e;return n})(),Mn=(()=>{let e=class e{constructor(){this._ngZone=S(F),this._errorHandler=S(Sr)}handleError(r,s){this._ngZone.runOutsideAngular(()=>this._errorHandler.handleError(r))}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),it=!1;function Ln(n){let e=n===void 0?{}:n;return n&&(Array.isArray(n)?e=n.slice():typeof n=="object"&&(e=b({},n))),e}var ie=(()=>{let e=class e{constructor(r,s,i,o,a,c,l){this._injector=r,this._config=s,this._parentFactory=i,this._actions=o,this._actionResults=a,this._stateContextFactory=c,this._initialState=l,this._actionsSubscription=null,this._propGetter=S(_n),this._ngxsUnhandledErrorHandler=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=Qe(()=>{let u=this,d=u._propGetter;function p(m){let g=u.statePaths[m];return g?d(g.split(".")):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(m){let g=p(m);return g||((...w)=>(g||(g=p(m)),g?g(...w):void 0))},getSelectorOptions(m){let g=u._config.selectorOptions;return b(b({},g),m||{})}}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}ngOnDestroy(){this._actionsSubscription?.unsubscribe()}add(r){it&&jn(r);let{newStates:s}=this.addToStatesMap(r);if(!s.length)return[];let i=yn(s),o=bn(i),a=wn(i),c=vn(s),l=[];for(let u of o){let d=c[u],p=a[u],f=d[D];this.addRuntimeInfoToMeta(f,p),it&&Rn(d);let m={name:u,path:p,isInitialised:!1,actions:f.actions,instance:this._injector.get(d),defaults:Ln(f.defaults)};this.hasBeenMountedAndBootstrapped(u,p)||l.push(m),this.states.push(m)}return l}addAndReturnDefaults(r){let s=r||[],i=this.add(s);return{defaults:i.reduce((a,c)=>Wt(a,c.path,c.defaults),{}),states:i}}connectActionHandlers(){if(this._parentFactory||this._actionsSubscription!==null)return;let r=new ye;this._actionsSubscription=this._actions.pipe(se(s=>s.status==="DISPATCHED"),Je(s=>{r.next(s);let i=s.action;return this.invokeActions(r,i).pipe(re(()=>({action:i,status:"SUCCESSFUL"})),Mt({action:i,status:"CANCELED"}),Ke(o=>{let a=this._ngxsUnhandledErrorHandler||=this._injector.get(Mn),c=an(o,()=>a.handleError(o,{action:i}));return B({action:i,status:"ERRORED",error:c})}))})).subscribe(s=>this._actionResults.next(s))}invokeActions(r,s){let i=ve(s),o=[],a=!1;for(let c of this.states){let l=c.actions[i];if(l)for(let u of l){let d=this._stateContextFactory.createStateContext(c);try{let p=c.instance[u.fn](d,s);Gt(p)&&(p=Dt(p)),$t(p)?(p=p.pipe(Je(f=>Gt(f)?Dt(f):$t(f)?f:B(f)),Mt({})),u.options.cancelUncompleted&&(p=p.pipe(We(r.pipe(Sn(s)))))):p=B({}).pipe(K()),o.push(p)}catch(p){o.push(ze(p))}a=!0}}if(it&&!a){let c=this._injector.get(Nn,null);c&&c.warn(s)}return o.length||o.push(B({})),Nt(o)}addToStatesMap(r){let s=[],i=this.statesByName;for(let o of r){let a=ne(o).name;it&&In(a,o,i),!i[a]&&(s.push(o),i[a]=o)}return{newStates:s}}addRuntimeInfoToMeta(r,s){this.statePaths[r.name]=s,r.path=s}hasBeenMountedAndBootstrapped(r,s){let i=nt(this._initialState,s)!==void 0;return this.statesByName[r]&&i}};e.\u0275fac=function(s){return new(s||e)(y(br),y(we),y(e,12),y(Kr),y(Xr),y(rr),y(Kt,8))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let n=e;return n})(),oe=(()=>{let e=class e{constructor(r,s,i,o,a,c){this._stateStream=r,this._internalStateOperations=s,this._config=i,this._internalExecutionStrategy=o,this._stateFactory=a,this._selectableStateStream=this._stateStream.pipe(ot(this._internalExecutionStrategy),K({bufferSize:1,refCount:!0})),this.initStateStream(c)}dispatch(r){return this._internalStateOperations.getRootStateOperations().dispatch(r)}select(r){let s=this.getStoreBoundSelectorFn(r);return this._selectableStateStream.pipe(re(s),Ke(i=>this._config.selectorOptions.suppressErrors&&i instanceof TypeError?B(void 0):ze(i)),gr(),ot(this._internalExecutionStrategy))}selectOnce(r){return this.select(r).pipe(Xe(1))}selectSnapshot(r){return this.getStoreBoundSelectorFn(r)(this._stateStream.getValue())}selectSignal(r){let s=this.getStoreBoundSelectorFn(r);return Tr(()=>s(this._stateStream.state()))}subscribe(r){return this._selectableStateStream.pipe(ot(this._internalExecutionStrategy)).subscribe(r)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(r){this._internalStateOperations.getRootStateOperations().setState(r)}getStoreBoundSelectorFn(r){let s=Qr(r),i=this._stateFactory.getRuntimeSelectorContext();return s(i)}initStateStream(r){let s=this._stateStream.value;(!s||Object.keys(s).length===0)&&this._stateStream.next(r)}};e.\u0275fac=function(s){return new(s||e)(y(tt),y(be),y(we),y(zr),y(ie),y(Kt,8))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Fn=!1,Un=new x(Fn?"NGXS_PREBOOT_FNS":"");var Gn=(()=>{let e=class e{constructor(r,s){e.store=r,e.config=s}ngOnDestroy(){e.store=null,e.config=null}};e.store=null,e.config=null,e.\u0275fac=function(s){return new(s||e)(y(oe),y(we))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Bn=!1,rs=(()=>{let e=class e{constructor(r,s,i,o){this._store=r,this._internalStateOperations=s,this._stateContextFactory=i,this._appBootstrappedState=o,this._destroy$=new qe(1)}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(r,s){Bn&&(r instanceof rt?this._initStateHasBeenDispatched=!0:r instanceof st&&!this._initStateHasBeenDispatched&&console.error(sn(r.addedStates))),this._internalStateOperations.getRootStateOperations().dispatch(r).pipe(se(()=>!!s),vr(()=>this._invokeInitOnStates(s.states)),Je(()=>this._appBootstrappedState),se(i=>!!i),We(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(s.states))}_invokeInitOnStates(r){for(let s of r){let i=s.instance;i.ngxsOnChanges&&this._store.select(o=>nt(o,s.path)).pipe(yr(void 0),_r(),We(this._destroy$)).subscribe(([o,a])=>{let c=new Yt(o,a,!s.isInitialised);i.ngxsOnChanges(c)}),i.ngxsOnInit&&i.ngxsOnInit(this._getStateContext(s)),s.isInitialised=!0}}_invokeBootstrapOnStates(r){for(let s of r){let i=s.instance;i.ngxsAfterBootstrap&&i.ngxsAfterBootstrap(this._getStateContext(s))}}_getStateContext(r){return this._stateContextFactory.createStateContext(r)}};e.\u0275fac=function(s){return new(s||e)(y(oe),y(be),y(rr),y(et))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ss=!1;function Vn(){(S(Un,{optional:!0})||[]).forEach(o=>o());let e=S(ie),t=S(be);S(oe),S(Gn);let r=S(Wr,{optional:!0})||[],s=S(rs),i=e.addAndReturnDefaults(r);t.setStateToTheCurrentWithNew(i),e.connectActionHandlers(),s.ngxsBootstrap(new rt,i)}function qn(){S(oe);let n=S(be),e=S(ie),t=S(Yr,{optional:!0})||[],r=S(rs),s=t.reduce((o,a)=>o.concat(a),[]),i=e.addAndReturnDefaults(s);i.states.length&&(n.setStateToTheCurrentWithNew(i),r.ngxsBootstrap(new st(i.defaults),i))}var Fr=new x(ss?"NGXS_ROOT_STORE_INITIALIZER":""),Ur=new x(ss?"NGXS_FEATURE_STORE_INITIALIZER":""),Hn=[{provide:Fr,useFactory:Vn},{provide:Lt,multi:!0,useFactory(){return()=>S(Fr)}}],zn=[{provide:Ur,useFactory:qn},{provide:Lt,multi:!0,useFactory(){return()=>S(Ur)}}];function Jn(n,e){return[ie,Zt,...n,{provide:Wr,useValue:n},{provide:Or,useFactory:()=>{let t=S(et);return()=>t.bootstrap()},multi:!0},{provide:Zr,useValue:e},{provide:Hr,useValue:e.executionStrategy},{provide:Cr,useExisting:rr},{provide:Pr,useExisting:ie}]}function Kn(n){return[ie,Zt,...n,{provide:Yr,multi:!0,useValue:n}]}function ns(n,e){return(t,r,s)=>{let i=zt(t.constructor),o=Array.isArray(n)?n:[n];for(let a of o){let c=a.type;i.actions[c]||(i.actions[c]=[]),i.actions[c].push({fn:r,options:e||{},type:c})}}}function is(n){return e=>{let t=e,r=zt(t),s=Object.getPrototypeOf(t),i=Xn(s,n);Wn({meta:r,inheritedStateClass:s,optionsWithInheritance:i}),t[Ht]=i}}function Xn(n,e){let t=n[Ht]||{};return b(b({},t),e)}function Wn(n){let{meta:e,inheritedStateClass:t,optionsWithInheritance:r}=n,{children:s,defaults:i,name:o}=r,a=typeof o=="string"?o:o&&o.getName()||null;if(t.hasOwnProperty(D)){let c=t[D]||{};e.actions=b(b({},e.actions),c.actions)}e.children=s,e.defaults=i,e.name=a}var Gr="NGXS_SELECTOR_OPTIONS_META",Br={getOptions:n=>n&&n[Gr]||{},defineOptions:(n,e)=>{n&&(n[Gr]=e)}};function Yn(n,e){let t=jr(n);t.originalFn=n;let r=()=>({});e&&(t.containerClass=e.containerClass,t.selectorName=e.selectorName||null,r=e.getSelectorOptions||r);let s=b({},t);return t.getSelectorOptions=()=>Zn(s,r()),t}function Zn(n,e){return b(b(b(b({},Br.getOptions(n.containerClass)||{}),Br.getOptions(n.originalFn)||{}),n.getSelectorOptions()||{}),e)}function Qn(n,e,t){let r=dn(e,t),s=Yn(e,t);return s.makeRootSelector=hn(s,n,r),r}function os(n){return(e,t,r)=>{r||=Object.getOwnPropertyDescriptor(e,t);let s=r?.value,i=Qn(n,s,{containerClass:e,selectorName:t.toString(),getSelectorOptions(){return{}}});return{configurable:!0,get(){return i},originalFn:s}}}function ro(n=[],...e){let t=[],r={};return e.length>0&&(ei(e[0])?t.push(...e):(r=e[0],t.push(...e.slice(1)))),Ft([...Jn(n,r),Hn,t])}function ei(n){return!!n.\u0275providers}function so(n,...e){return Ft([...Kn(n),e,zn])}function no(n){return S(oe).selectSignal(n)}function as(n){let e=S(oe);return(...t)=>e.dispatch(new n(...t))}var ct=(()=>{class n{session;static type="[Session] Set Auth Session";constructor(t){this.session=t}}return n})(),lt=class at{static session(e){return e.session}setAuthSession(e,t){t?.session&&e.patchState({session:t.session})}static \u0275fac=function(t){return new(t||at)};static \u0275prov=O({token:at,factory:at.\u0275fac})};He([ns(ct),J("design:type",Function),J("design:paramtypes",[Object,ct]),J("design:returntype",void 0)],lt.prototype,"setAuthSession",null);He([os(),J("design:type",Function),J("design:paramtypes",[Object]),J("design:returntype",void 0)],lt,"session",null);lt=He([is({name:"session_state",defaults:{session:void 0}})],lt);var cs=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>import("./chunk-AEV6P355.js").then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};var Se=class extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}},ut=class extends Se{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},ht=class extends Se{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},dt=class extends Se{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var ti=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},Ee=class{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=cs(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return ti(this,void 0,void 0,function*(){try{let{headers:s,method:i,body:o}=t,a={},c;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));let l=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:c}).catch(f=>{throw new ut(f)}),u=l.headers.get("x-relay-error");if(u&&u==="true")throw new ht(l);if(!l.ok)throw new dt(l);let d=((r=l.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return d==="application/json"?p=yield l.json():d==="application/octet-stream"?p=yield l.blob():d==="multipart/form-data"?p=yield l.formData():p=yield l.text(),{data:p,error:null}}catch(s){return{data:null,error:s}}})}};var ft=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};var Oe=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Ye:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(i=>h(this,null,function*(){var o,a,c;let l=null,u=null,d=null,p=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){let A=yield i.text();A===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=A:u=JSON.parse(A))}let g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&w&&w.length>1&&(d=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,p=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{let g=yield i.text();try{l=JSON.parse(g),Array.isArray(l)&&i.status===404&&(u=[],l=null,p=200,f="OK")}catch{i.status===404&&g===""?(p=204,f="No Content"):l={message:g}}if(l&&this.isMaybeSingle&&(!((c=l?.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,p=200,f="OK"),l&&this.shouldThrowOnError)throw new ft(l)}return{error:l,data:u,count:d,status:p,statusText:f}}));return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,c;return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:`${(a=i?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}};var Te=class extends Oe{select(e){let t=!1,r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){let o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){let i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;let c=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};var C=class extends Te{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let r=t.map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");let o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};var xe=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=t,this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){let s=t?"HEAD":"GET",i=!1,o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new C({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){let s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){let o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){let a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new C({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){let o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){let c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){let l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new C({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){let r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new C({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new C({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var ls="1.9.2";var us={"X-Client-Info":`postgrest-js/${ls}`};var ke=class n{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},us),t),this.schemaName=r,this.fetch=s}from(e){let t=new URL(`${this.url}/${e}`);return new xe(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new n(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:s}={}){let i,o=new URL(`${this.url}/rpc/${e}`),a;r?(i="HEAD",Object.entries(t).forEach(([l,u])=>{o.searchParams.append(l,`${u}`)})):(i="POST",a=t);let c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new C({method:i,url:o,headers:c,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}};var hs="2.9.3";var ds={"X-Client-Info":`realtime-js/${hs}`},fs="1.0.0",pt=1e4,ps=1e3,ae=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(ae||{}),I=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(I||{}),j=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(j||{}),sr=function(n){return n.websocket="websocket",n}(sr||{}),X=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(X||{});var ce=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var gt=class{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){let t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){let s=t.getUint8(1),i=t.getUint8(2),o=this.HEADER_LENGTH+2,a=r.decode(e.slice(o,o+s));o=o+s;let c=r.decode(e.slice(o,o+i));o=o+i;let l=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}};var le=class{constructor(e,t,r={},s=pt){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var Ae=class n{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{let{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=n.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{let{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=n.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){let i=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{let d=i[l];if(d){let p=u.map(w=>w.presence_ref),f=d.map(w=>w.presence_ref),m=u.filter(w=>f.indexOf(w.presence_ref)<0),g=d.filter(w=>p.indexOf(w.presence_ref)<0);m.length>0&&(a[l]=m),g.length>0&&(c[l]=g)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(e,t,r,s){let{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;let u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){let d=e[a].map(f=>f.presence_ref),p=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...p)}r(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;let u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=l,s(a,l,c),l.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{let s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var E=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(E||{}),ir=(n,e,t={})=>{var r;let s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=ri(o,n,e,s),i),{})},ri=(n,e,t,r)=>{let s=e.find(a=>a.name===n),i=s?.type,o=t[n];return i&&!r.includes(i)?gs(i,o):nr(o)},gs=(n,e)=>{if(n.charAt(0)==="_"){let t=n.slice(1,n.length);return oi(e,t)}switch(n){case E.bool:return si(e);case E.float4:case E.float8:case E.int2:case E.int4:case E.int8:case E.numeric:case E.oid:return ni(e);case E.json:case E.jsonb:return ii(e);case E.timestamp:return ai(e);case E.abstime:case E.date:case E.daterange:case E.int4range:case E.int8range:case E.money:case E.reltime:case E.text:case E.time:case E.timestamptz:case E.timetz:case E.tsrange:case E.tstzrange:return nr(e);default:return nr(e)}},nr=n=>n,si=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},ni=n=>{if(typeof n=="string"){let e=parseFloat(n);if(!Number.isNaN(e))return e}return n},ii=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},oi=(n,e)=>{if(typeof n!="string")return n;let t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i,o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>gs(e,a))}return n},ai=n=>typeof n=="string"?n.replace(" ","T"):n;var Ie=class n{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=I.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new le(this,j.join,this.params,this.timeout),this.rejoinTimer=new ce(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=I.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=I.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=I.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=I.errored,this.rejoinTimer.scheduleTimeout())}),this._on(j.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Ae(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:i,presence:o}}=this.params;this._onError(l=>e&&e("CHANNEL_ERROR",l)),this._onClose(()=>e&&e("CLOSED"));let a={},c={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(l=>l.filter))!==null&&s!==void 0?s:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:c},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:l})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),l===void 0){e&&e("SUBSCRIBED");return}else{let d=this.bindings.postgres_changes,p=(u=d?.length)!==null&&u!==void 0?u:0,f=[];for(let m=0;m<p;m++){let g=d[m],{filter:{event:w,schema:A,table:M,filter:L}}=g,k=l&&l[m];if(k&&k.event===w&&k.schema===A&&k.table===M&&k.filter===L)f.push(Object.assign(Object.assign({},g),{id:k.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,e&&e("SUBSCRIBED");return}}).receive("error",l=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(l).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(r){return h(this,arguments,function*(e,t={}){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(){return h(this,arguments,function*(e={}){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,r){return this._on(e,t,r)}send(r){return h(this,arguments,function*(e,t={}){var s,i;if(!this._canPush()&&e.type==="broadcast"){let{event:o,payload:a}=e,c={method:"POST",headers:{apikey:(s=this.socket.apiKey)!==null&&s!==void 0?s:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a}]})};try{return(yield this._fetchWithTimeout(this.broadcastEndpointURL,c,(i=t.timeout)!==null&&i!==void 0?i:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,c,l;let u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=I.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(j.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{let s=new le(this,j.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}_fetchWithTimeout(e,t,r){return h(this,null,function*(){let s=new AbortController,i=setTimeout(()=>s.abort(),r),o=yield this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),o})}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new le(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;let o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=j;if(r&&[a,c,l,u].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,t,r);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var m,g,w;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((w=(g=f.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(f=>f.callback(p,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var m,g,w,A,M,L;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){let k=f.id,z=(m=f.filter)===null||m===void 0?void 0:m.event;return k&&((g=t.ids)===null||g===void 0?void 0:g.includes(k))&&(z==="*"||z?.toLocaleLowerCase()===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{let k=(M=(A=f?.filter)===null||A===void 0?void 0:A.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return k==="*"||k===((L=t?.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof p=="object"&&"ids"in p){let m=p.data,{schema:g,table:w,commit_timestamp:A,type:M,errors:L}=m;p=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:A,eventType:M,new:{},old:{},errors:L}),this._getPayloadRecords(m))}f.callback(p,r)})}_isClosed(){return this.state===I.closed}_isJoined(){return this.state===I.joined}_isJoining(){return this.state===I.joining}_isLeaving(){return this.state===I.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&n.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(j.close,{},e)}_onError(e){this._on(j.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=I.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ir(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ir(e.columns,e.old_record)),t}};var li=()=>{},ui=typeof WebSocket<"u",je=class{constructor(e,t){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=ds,this.params={},this.timeout=pt,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=li,this.conn=null,this.sendBuffer=[],this.serializer=new gt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>import("./chunk-AEV6P355.js").then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${sr.websocket}`,t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);let s=(r=t?.params)===null||r===void 0?void 0:r.apikey;s&&(this.accessToken=s,this.apiKey=s),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t?.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ce(()=>h(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(ui){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new or(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),import("./chunk-WMWYEAXO.js").then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return h(this,null,function*(){let t=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return h(this,null,function*(){let e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e})}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ae.connecting:return X.Connecting;case ae.open:return X.Open;case ae.closing:return X.Closing;default:return X.Closed}}isConnected(){return this.connectionState()===X.Open}channel(e,t={config:{}}){let r=new Ie(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){let{topic:t,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(j.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:fs}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:i,ref:o}=t;(o&&o===this.pendingHeartbeatRef||s===i?.type)&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(j.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;let r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(ps,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}};var or=class{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ae.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}};var ue=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function T(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var mt=class extends ue{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Re=class extends ue{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};var hi=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},_t=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>import("./chunk-AEV6P355.js").then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},ms=()=>hi(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-AEV6P355.js")).Response:Response});var he=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},ar=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),di=(n,e)=>he(void 0,void 0,void 0,function*(){let t=yield ms();n instanceof t?n.json().then(r=>{e(new mt(ar(r),n.status||500))}).catch(r=>{e(new Re(ar(r),r))}):e(new Re(ar(n),n))}),fi=(n,e,t,r)=>{let s={method:n,headers:e?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};function yt(n,e,t,r,s,i){return he(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,fi(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>di(c,a))})})}function Pe(n,e,t,r){return he(this,void 0,void 0,function*(){return yt(n,"GET",e,t,r)})}function $(n,e,t,r,s){return he(this,void 0,void 0,function*(){return yt(n,"POST",e,r,s,t)})}function _s(n,e,t,r,s){return he(this,void 0,void 0,function*(){return yt(n,"PUT",e,r,s,t)})}function vt(n,e,t,r,s){return he(this,void 0,void 0,function*(){return yt(n,"DELETE",e,r,s,t)})}var R=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},pi={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ys={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},wt=class{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=_t(s)}uploadOrUpdate(e,t,r,s){return R(this,void 0,void 0,function*(){try{let i,o=Object.assign(Object.assign({},ys),s),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl)):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);let c=this._removeEmptyFolders(t),l=this._getFinalPath(c),u=yield this.fetch(`${this.url}/object/${l}`,Object.assign({method:e,body:i,headers:a},o?.duplex?{duplex:o.duplex}:{})),d=yield u.json();return u.ok?{data:{path:c,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(i){if(T(i))return{data:null,error:i};throw i}})}upload(e,t,r){return R(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return R(this,void 0,void 0,function*(){let i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let c,l=Object.assign({upsert:ys.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);let d=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),p=yield d.json();return d.ok?{data:{path:i,fullPath:p.Key},error:null}:{data:null,error:p}}catch(c){if(T(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e){return R(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e),r=yield $(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),s=new URL(this.url+r.url),i=s.searchParams.get("token");if(!i)throw new ue("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}})}update(e,t,r){return R(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return R(this,void 0,void 0,function*(){try{return{data:yield $(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if(T(r))return{data:null,error:r};throw r}})}copy(e,t){return R(this,void 0,void 0,function*(){try{return{data:{path:(yield $(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if(T(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,r){return R(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield $(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(T(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return R(this,void 0,void 0,function*(){try{let s=yield $(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(T(s))return{data:null,error:s};throw s}})}download(e,t){return R(this,void 0,void 0,function*(){let s=typeof t?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(t?.transform||{}),o=i?`?${i}`:"";try{let a=this._getFinalPath(e);return{data:yield(yield Pe(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(T(a))return{data:null,error:a};throw a}})}getPublicUrl(e,t){let r=this._getFinalPath(e),s=[],i=t?.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);let a=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(e){return R(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}})}list(e,t,r){return R(this,void 0,void 0,function*(){try{let s=Object.assign(Object.assign(Object.assign({},pi),t),{prefix:e||""});return{data:yield $(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(T(s))return{data:null,error:s};throw s}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};var vs="2.5.5";var ws={"X-Client-Info":`storage-js/${vs}`};var de=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},bt=class{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},ws),t),this.fetch=_t(r)}listBuckets(){return de(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(T(e))return{data:null,error:e};throw e}})}getBucket(e){return de(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return de(this,void 0,void 0,function*(){try{return{data:yield $(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(T(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return de(this,void 0,void 0,function*(){try{return{data:yield _s(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(T(r))return{data:null,error:r};throw r}})}emptyBucket(e){return de(this,void 0,void 0,function*(){try{return{data:yield $(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}})}deleteBucket(e){return de(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}})}};var Ce=class extends bt{constructor(e,t={},r){super(e,t,r)}from(e){return new wt(this.url,this.headers,e,this.fetch)}};var bs="2.40.0";var De="";typeof Deno<"u"?De="deno":typeof document<"u"?De="web":typeof navigator<"u"&&navigator.product==="ReactNative"?De="react-native":De="node";var gi={"X-Client-Info":`supabase-js-${De}/${bs}`},Ss={headers:gi},Es={schema:"public"},Os={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ts={};var mi=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},_i=n=>{let e;return n?e=n:typeof fetch>"u"?e=Ye:e=fetch,(...t)=>e(...t)},yi=()=>typeof Headers>"u"?Ir:Headers,xs=(n,e,t)=>{let r=_i(t),s=yi();return(i,o)=>mi(void 0,void 0,void 0,function*(){var a;let c=(a=yield e())!==null&&a!==void 0?a:n,l=new s(o?.headers);return l.has("apikey")||l.set("apikey",n),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:l}))})};function ks(n){return n.replace(/\/$/,"")}function As(n,e){let{db:t,auth:r,realtime:s,global:i}=n,{db:o,auth:a,realtime:c,global:l}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},l),i)}}function Is(n){return Math.round(Date.now()/1e3)+n}function js(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}var P=()=>typeof document<"u",W={tested:!1,writable:!1},V=()=>{if(!P())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(W.tested)return W.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),W.tested=!0,W.writable=!0}catch{W.tested=!0,W.writable=!1}return W.writable};function St(n){let e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}var Et=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>import("./chunk-AEV6P355.js").then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Rs=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",q=(n,e,t)=>h(void 0,null,function*(){yield n.setItem(e,JSON.stringify(t))}),Ne=(n,e)=>h(void 0,null,function*(){let t=yield n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),Ot=(n,e)=>h(void 0,null,function*(){yield n.removeItem(e)});function vi(n){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t="",r,s,i,o,a,c,l,u=0;for(n=n.replace("-","+").replace("_","/");u<n.length;)o=e.indexOf(n.charAt(u++)),a=e.indexOf(n.charAt(u++)),c=e.indexOf(n.charAt(u++)),l=e.indexOf(n.charAt(u++)),r=o<<2|a>>4,s=(a&15)<<4|c>>2,i=(c&3)<<6|l,t=t+String.fromCharCode(r),c!=64&&s!=0&&(t=t+String.fromCharCode(s)),l!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}var $e=class n{constructor(){this.promise=new n.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};$e.promiseConstructor=Promise;function cr(n){let e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");let r=t[1];return JSON.parse(vi(r))}function Ps(n){return h(this,null,function*(){return yield new Promise(e=>{setTimeout(()=>e(null),n)})})}function Cs(n,e){return new Promise((r,s)=>{h(this,null,function*(){for(let i=0;i<1/0;i++)try{let o=yield n(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})})}function wi(n){return("0"+n.toString(16)).substr(-2)}function Y(){let e=new Uint32Array(56);if(typeof crypto>"u"){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length,s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,wi).join("")}function bi(n){return h(this,null,function*(){let t=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")})}function Si(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Z(n){return h(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let t=yield bi(n);return Si(t)})}var Me=class extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}};function _(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var Tt=class extends Me{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}};function Ds(n){return _(n)&&n.name==="AuthApiError"}var fe=class extends Me{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},U=class extends Me{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}},G=class extends U{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}},pe=class extends U{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}},Q=class extends U{constructor(e){super(e,"AuthInvalidCredentialsError",400)}},ee=class extends U{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Le=class extends U{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},ge=class extends U{constructor(e,t){super(e,"AuthRetryableFetchError",t)}};function kt(n){return _(n)&&n.name==="AuthRetryableFetchError"}var xt=class extends U{constructor(e,t,r){super(e,"AuthWeakPasswordError",t),this.reasons=r}};var Ei=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t},me=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Oi=[502,503,504];function $s(n){return h(this,null,function*(){if(!Rs(n))throw new ge(me(n),0);if(Oi.includes(n.status))throw new ge(me(n),n.status);let e;try{e=yield n.json()}catch(t){throw new fe(me(t),t)}throw typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)?new xt(me(e),n.status,e.weak_password.reasons):new Tt(me(e),n.status||500)})}var Ti=(n,e,t,r)=>{let s={method:n,headers:e?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};function v(n,e,t,r){return h(this,null,function*(){var s;let i=Object.assign({},r?.headers);r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);let o=(s=r?.query)!==null&&s!==void 0?s:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=yield xi(n,e,t+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}})}function xi(n,e,t,r,s,i){return h(this,null,function*(){let o=Ti(e,r,s,i),a;try{a=yield n(t,o)}catch(c){throw console.error(c),new ge(me(c),0)}if(a.ok||(yield $s(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(c){yield $s(c)}})}function H(n){var e;let t=null;ki(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Is(n.expires_in)));let r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function lr(n){let e=H(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function N(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Ns(n){return{data:n,error:null}}function Ms(n){let{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,o=Ei(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function Ls(n){return n}function ki(n){return n.access_token&&n.refresh_token&&n.expires_in}var Ai=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t},_e=class{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Et(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e,t="global"){return h(this,null,function*(){try{return yield v(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(_(r))return{data:null,error:r};throw r}})}inviteUserByEmail(r){return h(this,arguments,function*(e,t={}){try{return yield v(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:N})}catch(s){if(_(s))return{data:{user:null},error:s};throw s}})}generateLink(e){return h(this,null,function*(){try{let{options:t}=e,r=Ai(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r?.newEmail,delete s.newEmail),yield v(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Ms,redirectTo:t?.redirectTo})}catch(t){if(_(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return h(this,null,function*(){try{return yield v(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:N})}catch(t){if(_(t))return{data:{user:null},error:t};throw t}})}listUsers(e){return h(this,null,function*(){var t,r,s,i,o,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=yield v(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Ls});if(u.error)throw u.error;let d=yield u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(m=>{let g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(m.split(";")[1].split("=")[1]);l[`${w}Page`]=g}),l.total=parseInt(p)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(_(l))return{data:{users:[]},error:l};throw l}})}getUserById(e){return h(this,null,function*(){try{return yield v(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:N})}catch(t){if(_(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return h(this,null,function*(){try{return yield v(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:N})}catch(r){if(_(r))return{data:{user:null},error:r};throw r}})}deleteUser(e,t=!1){return h(this,null,function*(){try{return yield v(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:N})}catch(r){if(_(r))return{data:{user:null},error:r};throw r}})}_listFactors(e){return h(this,null,function*(){try{let{data:t,error:r}=yield v(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(_(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return h(this,null,function*(){try{return{data:yield v(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(_(t))return{data:null,error:t};throw t}})}};var At="0.0.0";var Fs="http://localhost:9999",Us="supabase.auth.token";var Gs={"X-Client-Info":`gotrue-js/${At}`},ur=10;var Bs={getItem:n=>V()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{V()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{V()&&globalThis.localStorage.removeItem(n)}};function hr(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Vs(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var te={debug:!!(globalThis&&V()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Fe=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},It=class extends Fe{};function dr(n,e,t){return h(this,null,function*(){te.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);let r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),te.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),yield globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},s=>h(this,null,function*(){if(s){te.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return yield t()}finally{te.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw te.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new It(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(te.debug)try{let i=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield t()}}))})}Vs();var Ii={url:Fs,storageKey:Us,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Gs,flowType:"implicit",debug:!1},Ue=30*1e3,qs=3;function Hs(n,e,t){return h(this,null,function*(){return yield t()})}var jt=(()=>{class n{constructor(t){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&P()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let i=Object.assign(Object.assign({},Ii),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new _e({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Et(i.fetch),this.lock=i.lock||Hs,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,i.lock?this.lock=i.lock:P()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=dr:this.lock=Hs,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:V()?this.storage=Bs:(this.memoryStorage={},this.storage=hr(this.memoryStorage)):(this.memoryStorage={},this.storage=hr(this.memoryStorage)),P()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",o=>h(this,null,function*(){this._debug("received broadcast notification from other tab or client",o),yield this._notifyAllSubscribers(o.data.event,o.data.session,!1)}))}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${At}) ${new Date().toISOString()}`,...t),this}initialize(){return h(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=h(this,null,function*(){return yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return h(this,null,function*(){try{let t=P()?yield this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){let{data:r,error:s}=yield this._getSessionFromURL(t);if(s)return this._debug("#_initialize()","error detecting session from URL",s),s?.message==="Identity is already linked"||s?.message==="Identity is already linked to another user"?{error:s}:(yield this._removeSession(),{error:s});let{session:i,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),yield this._saveSession(i),setTimeout(()=>h(this,null,function*(){o==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",i):yield this._notifyAllSubscribers("SIGNED_IN",i)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(t){return _(t)?{error:t}:{error:new fe("Unexpected error during initialization",t)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signUp(t){return h(this,null,function*(){var r,s,i;try{yield this._removeSession();let o;if("email"in t){let{email:d,password:p,options:f}=t,m=null,g=null;if(this.flowType==="pkce"){let w=Y();yield q(this.storage,`${this.storageKey}-code-verifier`,w),m=yield Z(w),g=w===m?"plain":"s256"}o=yield v(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:p,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:m,code_challenge_method:g},xform:H})}else if("phone"in t){let{phone:d,password:p,options:f}=t;o=yield v(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(s=f?.data)!==null&&s!==void 0?s:{},channel:(i=f?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:H})}else throw new Q("You must provide either an email or phone number and a password");let{data:a,error:c}=o;if(c||!a)return{data:{user:null,session:null},error:c};let l=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(o){if(_(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithPassword(t){return h(this,null,function*(){try{yield this._removeSession();let r;if("email"in t){let{email:o,password:a,options:c}=t;r=yield v(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:lr})}else if("phone"in t){let{phone:o,password:a,options:c}=t;r=yield v(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:lr})}else throw new Q("You must provide either an email or phone number and a password");let{data:s,error:i}=r;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new pe}:(s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(r){if(_(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOAuth(t){return h(this,null,function*(){var r,s,i,o;return yield this._removeSession(),yield this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(t){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return this._exchangeCodeForSession(t)}))})}_exchangeCodeForSession(t){return h(this,null,function*(){let r=yield Ne(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(r??"").split("/"),{data:o,error:a}=yield v(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:H});return yield Ot(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new pe}:(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})})}signInWithIdToken(t){return h(this,null,function*(){yield this._removeSession();try{let{options:r,provider:s,token:i,access_token:o,nonce:a}=t,c=yield v(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:H}),{data:l,error:u}=c;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new pe}:(l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(_(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOtp(t){return h(this,null,function*(){var r,s,i,o,a;try{if(yield this._removeSession(),"email"in t){let{email:c,options:l}=t,u=null,d=null;if(this.flowType==="pkce"){let f=Y();yield q(this.storage,`${this.storageKey}-code-verifier`,f),u=yield Z(f),d=f===u?"plain":"s256"}let{error:p}=yield v(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){let{phone:c,options:l}=t,{data:u,error:d}=yield v(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(o=l?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new Q("You must provide either an email or phone number.")}catch(c){if(_(c))return{data:{user:null,session:null},error:c};throw c}})}verifyOtp(t){return h(this,null,function*(){var r,s;try{t.type!=="email_change"&&t.type!=="phone_change"&&(yield this._removeSession());let i,o;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(s=t.options)===null||s===void 0?void 0:s.captchaToken);let{data:a,error:c}=yield v(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:H});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let l=a.session,u=a.user;return l?.access_token&&(yield this._saveSession(l),yield this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(_(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithSSO(t){return h(this,null,function*(){var r,s,i;try{yield this._removeSession();let o=null,a=null;if(this.flowType==="pkce"){let c=Y();yield q(this.storage,`${this.storageKey}-code-verifier`,c),o=yield Z(c),a=c===o?"plain":"s256"}return yield v(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:Ns})}catch(o){if(_(o))return{data:null,error:o};throw o}})}reauthenticate(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){let{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new G;let{error:i}=yield v(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}}))}catch(t){if(_(t))return{data:{user:null,session:null},error:t};throw t}})}resend(t){return h(this,null,function*(){try{t.type!="email_change"&&t.type!="phone_change"&&(yield this._removeSession());let r=`${this.url}/resend`;if("email"in t){let{email:s,type:i,options:o}=t,{error:a}=yield v(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){let{phone:s,type:i,options:o}=t,{data:a,error:c}=yield v(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:c}}throw new Q("You must provide either an email or phone number and a type")}catch(r){if(_(r))return{data:{user:null,session:null},error:r};throw r}})}getSession(){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return this._useSession(t=>h(this,null,function*(){return t}))}))})}_acquireLock(t,r){return h(this,null,function*(){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){let s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=h(this,null,function*(){return yield s,yield r()});return this.pendingInLock.push(h(this,null,function*(){try{yield i}catch{}})),i}return yield this.lock(`lock:${this.storageKey}`,t,()=>h(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let s=r();for(this.pendingInLock.push(h(this,null,function*(){try{yield s}catch{}})),yield s;this.pendingInLock.length;){let i=[...this.pendingInLock];yield Promise.all(i),this.pendingInLock.splice(0,i.length)}return yield s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(t){return h(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield t(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return h(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null,r=yield Ne(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!t)return{data:{session:null},error:null};let s=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s)return{data:{session:t},error:null};let{session:i,error:o}=yield this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(t){return h(this,null,function*(){return t?yield this._getUser(t):(yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return yield this._getUser()})))})}_getUser(t){return h(this,null,function*(){try{return t?yield v(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:N}):yield this._useSession(r=>h(this,null,function*(){var s,i;let{data:o,error:a}=r;if(a)throw a;return yield v(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:N})}))}catch(r){if(_(r))return{data:{user:null},error:r};throw r}})}updateUser(s){return h(this,arguments,function*(t,r={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._updateUser(t,r)}))})}_updateUser(s){return h(this,arguments,function*(t,r={}){try{return yield this._useSession(i=>h(this,null,function*(){let{data:o,error:a}=i;if(a)throw a;if(!o.session)throw new G;let c=o.session,l=null,u=null;if(this.flowType==="pkce"&&t.email!=null){let f=Y();yield q(this.storage,`${this.storageKey}-code-verifier`,f),l=yield Z(f),u=f===l?"plain":"s256"}let{data:d,error:p}=yield v(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:u}),jwt:c.access_token,xform:N});if(p)throw p;return c.user=d.user,yield this._saveSession(c),yield this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}}))}catch(i){if(_(i))return{data:{user:null},error:i};throw i}})}_decodeJWT(t){return cr(t)}setSession(t){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._setSession(t)}))})}_setSession(t){return h(this,null,function*(){try{if(!t.access_token||!t.refresh_token)throw new G;let r=Date.now()/1e3,s=r,i=!0,o=null,a=cr(t.access_token);if(a.exp&&(s=a.exp,i=s<=r),i){let{session:c,error:l}=yield this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};o=c}else{let{data:c,error:l}=yield this._getUser(t.access_token);if(l)throw l;o={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:s-r,expires_at:s},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(_(r))return{data:{session:null,user:null},error:r};throw r}})}refreshSession(t){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._refreshSession(t)}))})}_refreshSession(t){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s;if(!t){let{data:a,error:c}=r;if(c)throw c;t=(s=a.session)!==null&&s!==void 0?s:void 0}if(!t?.refresh_token)throw new G;let{session:i,error:o}=yield this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}}))}catch(r){if(_(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromURL(t){return h(this,null,function*(){try{if(!P())throw new ee("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new ee("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new Le("Not a valid PKCE flow url.");let r=St(window.location.href);if(t){if(!r.code)throw new Le("No code detected.");let{data:L,error:k}=yield this._exchangeCodeForSession(r.code);if(k)throw k;let z=new URL(window.location.href);return z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",z.toString()),{data:{session:L.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new ee(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});let{provider_token:s,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:c,expires_at:l,token_type:u}=r;if(!o||!c||!a||!u)throw new ee("No session defined in URL");let d=Math.round(Date.now()/1e3),p=parseInt(c),f=d+p;l&&(f=parseInt(l));let m=f-d;m*1e3<=Ue&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${p}s`);let g=f-p;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",g,f,d);let{data:w,error:A}=yield this._getUser(o);if(A)throw A;let M={provider_token:s,provider_refresh_token:i,access_token:o,expires_in:p,expires_at:f,refresh_token:a,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:M,redirectType:r.type},error:null}}catch(r){if(_(r))return{data:{session:null,redirectType:null},error:r};throw r}})}_isImplicitGrantFlow(){let t=St(window.location.href);return!!(P()&&(t.access_token||t.error_description))}_isPKCEFlow(){return h(this,null,function*(){let t=St(window.location.href),r=yield Ne(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)})}signOut(){return h(this,arguments,function*(t={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._signOut(t)}))})}_signOut(){return h(this,arguments,function*({scope:t}={scope:"global"}){return yield this._useSession(r=>h(this,null,function*(){var s;let{data:i,error:o}=r;if(o)return{error:o};let a=(s=i.session)===null||s===void 0?void 0:s.access_token;if(a){let{error:c}=yield this.admin.signOut(a,t);if(c&&!(Ds(c)&&(c.status===404||c.status===401)))return{error:c}}return t!=="others"&&(yield this._removeSession(),yield Ot(this.storage,`${this.storageKey}-code-verifier`),yield this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}}))})}onAuthStateChange(t){let r=js(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),h(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:s}}}_emitInitialSession(t){return h(this,null,function*(){return yield this._useSession(r=>h(this,null,function*(){var s,i;try{let{data:{session:o},error:a}=r;if(a)throw a;yield(s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){yield(i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}}))})}resetPasswordForEmail(s){return h(this,arguments,function*(t,r={}){let i=null,o=null;if(this.flowType==="pkce"){let a=Y();yield q(this.storage,`${this.storageKey}-code-verifier`,`${a}/PASSWORD_RECOVERY`),i=yield Z(a),o=a===i?"plain":"s256"}try{return yield v(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(_(a))return{data:null,error:a};throw a}})}getUserIdentities(){return h(this,null,function*(){var t;try{let{data:r,error:s}=yield this.getUser();if(s)throw s;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(_(r))return{data:null,error:r};throw r}})}linkIdentity(t){return h(this,null,function*(){var r;try{let{data:s,error:i}=yield this._useSession(o=>h(this,null,function*(){var a,c,l,u,d;let{data:p,error:f}=o;if(f)throw f;let m=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return yield v(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})}));if(i)throw i;return P()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:t.provider,url:s?.url},error:null}}catch(s){if(_(s))return{data:{provider:t.provider,url:null},error:s};throw s}})}unlinkIdentity(t){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s,i;let{data:o,error:a}=r;if(a)throw a;return yield v(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})}))}catch(r){if(_(r))return{data:null,error:r};throw r}})}_refreshAccessToken(t){return h(this,null,function*(){let r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{let s=Date.now();return yield Cs(i=>h(this,null,function*(){return yield Ps(i*200),this._debug(r,"refreshing attempt",i),yield v(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:H})}),(i,o,a)=>a&&a.error&&kt(a.error)&&Date.now()+(i+1)*200-s<Ue)}catch(s){if(this._debug(r,"error",s),_(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}})}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,r){return h(this,null,function*(){let s=yield this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),P()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}})}_recoverAndRefresh(){return h(this,null,function*(){var t;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let s=yield Ne(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&(yield this._removeSession());return}let i=Math.round(Date.now()/1e3),o=((t=s.expires_at)!==null&&t!==void 0?t:1/0)<i+ur;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${ur}s`),o){if(this.autoRefreshToken&&s.refresh_token){let{error:a}=yield this._callRefreshToken(s.refresh_token);a&&(console.error(a),kt(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}})}_callRefreshToken(t){return h(this,null,function*(){var r,s;if(!t)throw new G;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new $e;let{data:o,error:a}=yield this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new G;yield this._saveSession(o.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let c={session:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(i,"error",o),_(o)){let a={session:null,error:o};return kt(o)||(yield this._removeSession(),yield this._notifyAllSubscribers("SIGNED_OUT",null)),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}})}_notifyAllSubscribers(t,r,s=!0){return h(this,null,function*(){let i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});let o=[],a=Array.from(this.stateChangeEmitters.values()).map(c=>h(this,null,function*(){try{yield c.callback(t,r)}catch(l){o.push(l)}}));if(yield Promise.all(a),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(i,"end")}})}_saveSession(t){return h(this,null,function*(){this._debug("#_saveSession()",t),yield q(this.storage,this.storageKey,t)})}_removeSession(){return h(this,null,function*(){this._debug("#_removeSession()"),yield Ot(this.storage,this.storageKey)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&P()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return h(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let t=setInterval(()=>this._autoRefreshTokenTick(),Ue);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(()=>h(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return h(this,null,function*(){this._debug("#_stopAutoRefresh()");let t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)})}startAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return h(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>h(this,null,function*(){try{let t=Date.now();try{return yield this._useSession(r=>h(this,null,function*(){let{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let i=Math.floor((s.expires_at*1e3-t)/Ue);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ue}ms, refresh threshold is ${qs} ticks`),i<=qs&&(yield this._callRefreshToken(s.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(t){if(t.isAcquireTimeout||t instanceof Fe)this._debug("auto refresh token tick lock not available");else throw t}})}_handleVisibilityChange(){return h(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!P()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>h(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}})}_onVisibilityChanged(t){return h(this,null,function*(){let r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(t,r,s){return h(this,null,function*(){let i=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){let o=Y();yield q(this.storage,`${this.storageKey}-code-verifier`,o);let a=yield Z(o),c=o===a?"plain":"s256";this._debug("PKCE","code verifier",`${o.substring(0,5)}...`,"code challenge",a,"method",c);let l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(c)}`});i.push(l.toString())}if(s?.queryParams){let o=new URLSearchParams(s.queryParams);i.push(o.toString())}return s?.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${i.join("&")}`})}_unenroll(t){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s;let{data:i,error:o}=r;return o?{data:null,error:o}:yield v(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})}))}catch(r){if(_(r))return{data:null,error:r};throw r}})}_enroll(t){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s,i;let{data:o,error:a}=r;if(a)return{data:null,error:a};let{data:c,error:l}=yield v(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:t.friendlyName,factor_type:t.factorType,issuer:t.issuer},headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(!((i=c?.totp)===null||i===void 0)&&i.qr_code&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})}))}catch(r){if(_(r))return{data:null,error:r};throw r}})}_verify(t){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s;let{data:i,error:o}=r;if(o)return{data:null,error:o};let{data:a,error:c}=yield v(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:c})}))}catch(r){if(_(r))return{data:null,error:r};throw r}}))})}_challenge(t){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s;let{data:i,error:o}=r;return o?{data:null,error:o}:yield v(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})}))}catch(r){if(_(r))return{data:null,error:r};throw r}}))})}_challengeAndVerify(t){return h(this,null,function*(){let{data:r,error:s}=yield this._challenge({factorId:t.factorId});return s?{data:null,error:s}:yield this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})})}_listFactors(){return h(this,null,function*(){let{data:{user:t},error:r}=yield this.getUser();if(r)return{data:null,error:r};let s=t?.factors||[],i=s.filter(o=>o.factor_type==="totp"&&o.status==="verified");return{data:{all:s,totp:i},error:null}})}_getAuthenticatorAssuranceLevel(){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){return yield this._useSession(t=>h(this,null,function*(){var r,s;let{data:{session:i},error:o}=t;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let a=this._decodeJWT(i.access_token),c=null;a.aal&&(c=a.aal);let l=c;((s=(r=i.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");let d=a.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}))})}}return n.nextInstanceID=0,n})();var Rt=class extends jt{constructor(e){super(e)}};var ji=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},Pt=class{constructor(e,t,r){var s,i,o,a,c,l,u,d;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");let p=ks(e);this.realtimeUrl=`${p}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${p}/auth/v1`,this.storageUrl=`${p}/storage/v1`,this.functionsUrl=`${p}/functions/v1`;let f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,m={db:Es,realtime:Ts,auth:Object.assign(Object.assign({},Os),{storageKey:f}),global:Ss},g=As(r??{},m);this.storageKey=(i=(s=g.auth)===null||s===void 0?void 0:s.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=(o=g.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((c=g.auth)!==null&&c!==void 0?c:{},this.headers,(l=g.global)===null||l===void 0?void 0:l.fetch),this.fetch=xs(t,this._getAccessToken.bind(this),(u=g.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new ke(`${p}/rest/v1`,{headers:this.headers,schema:(d=g.db)===null||d===void 0?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Ee(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ce(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return ji(this,void 0,void 0,function*(){let{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,debug:a},c,l){let u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Rt({url:this.authUrl,headers:Object.assign(Object.assign({},u),c),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:o,debug:a,fetch:l})}_initRealtimeClient(e){return new je(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var zs=(n,e,t)=>new Pt(n,e,t);var fr={production:!1,supabaseUrl:"https://rwgsmxdqfratrzycmsnf.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ3Z3NteGRxZnJhdHJ6eWNtc25mIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjU1NjM1NTYsImV4cCI6MjA0MTEzOTU1Nn0.yE7hYaVHxpOgAI-kCE3L2fmrZvfvXyAX3Rlq0VNJ6fM"};var ol=(()=>{class n{setAuthSession=as(ct);supabase;_session=null;currentUser=new Ve(null);constructor(){this.supabase=zs(fr.supabaseUrl,fr.supabaseKey),this.supabase.auth.onAuthStateChange((t,r)=>{this.setAuthSession(r),t==="SIGNED_IN"||t==="TOKEN_REFRESHED"?r?.user&&this.currentUser.next(r.user):this.currentUser.next(null)})}get session(){return this.supabase.auth.getSession().then(({data:t})=>{this._session=t.session}),this._session}profile(t){return this.supabase.from("profiles").select("username, website, avatar_url").eq("id",t.id).single()}authChanges(t){return this.supabase.auth.onAuthStateChange(t)}signInGoogle(){return this.supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:"/"}})}signInOTP(t){return this.supabase.auth.signInWithOtp({email:t})}signInPW(t,r){return this.supabase.auth.signInWithPassword({email:t,password:r})}signOut(){return this.supabase.auth.signOut()}updateProfile(t){let r=Ge(b({},t),{updated_at:new Date});return this.supabase.from("profiles").upsert(r)}getPlayers(){return h(this,null,function*(){let t=(yield this.supabase.from("players").select("*")).data;return t?t.sort((r,s)=>r.trikot-s.trikot):[]})}getGameStats(t){return h(this,null,function*(){return yield this.supabase.rpc("getGameStats",{game_id:t})})}downLoadImage(t){return this.supabase.storage.from("profile_pictures").download(t)}uploadAvatar(t,r){return h(this,null,function*(){return(yield this.supabase.storage.from("profile_pictures").upload(t,r)).data?.path})}getCurrentUser(){return this.currentUser.asObservable()}getCurrentUserId(){return this.currentUser.value?this.currentUser.value.id:"null"}getProfile(t){return h(this,null,function*(){return this.supabase.from("profiles").select("*").eq("id",t).single()})}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();export{oe as a,ro as b,so as c,no as d,as as e,ct as f,lt as g,ol as h};
