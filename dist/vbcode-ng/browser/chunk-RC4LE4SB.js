import{b as Ut,c as Bt}from"./chunk-CICAG3MY.js";import{a as Vt}from"./chunk-YPZSN6HT.js";import{d as At,h as Pt,i as Dt}from"./chunk-SSIQHUNB.js";import"./chunk-OIDJDANF.js";import{B as Et,C as Ct,u as wt}from"./chunk-2T77MEFP.js";import{b as xt,g as yt,l as kt,o as Tt,u as It,v as St}from"./chunk-6PY7AWBK.js";import{a as Xt}from"./chunk-BSKFGMFV.js";import"./chunk-SDY2E75B.js";import{b as mt,c as _t,f as vt}from"./chunk-ZXWJ2HWB.js";import{a as B}from"./chunk-XGPREJ5I.js";import{a as Mt}from"./chunk-YVU4E3LK.js";import{R as gt,S as ft,T as Rt}from"./chunk-QYFRUT7D.js";import{I as pt,M as bt,e as rt,i as ot,o as lt,p as dt,s as ht,u as U,v as ct,z as ut}from"./chunk-WGJEK5TU.js";import{Ac as H,Bc as j,C as G,Cc as Q,Gc as nt,Ic as at,Kc as st,Mb as x,Nb as y,Nc as p,Ob as C,Oc as g,Qb as V,Rb as A,Sb as u,Tb as r,Ub as a,Vb as f,Wb as N,Xb as O,Yb as tt,_c as P,aa as Z,ac as W,ec as S,gb as s,gc as v,ha as K,ia as Y,kc as L,lc as F,ma as _,mc as z,qc as X,ta as M,tc as et,ua as w,va as b,vc as d,wa as I,wc as m,xb as E,xc as k,yb as J,yc as it}from"./chunk-2HMN3K3N.js";import"./chunk-SECEFDB3.js";import{a as R,b as q,f as zt,i as T}from"./chunk-GK2WYAVW.js";var Nt=(()=>{class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=J({type:n});static \u0275inj=Y({imports:[gt,ft]})}return n})();var D=zt(Xt());var Ht={title:"App Title",description:"App description",author:"Daniil Baunov",keywords:["Angular","meta tags","Angular Universal"],type:"website"},Ot=(()=>{let o=class o{constructor(){this.meta=_(lt),this.titleService=_(dt),this.router=_(U)}updateMetadata(e,i=!0){let t=R(R({},Ht),e),c=this.generateMetaDefinitions(t);this.meta.addTags([...c,{name:"robots",content:i?"index, follow":"noindex"},{name:"viewport",content:"width=device-width, initial-scale=1"},{"http-equiv":"Content-Type",content:"text/html; charset=utf-8"}]),this.titleService.setTitle(t.title)}generateMetaDefinitions(e){return[{name:"title",content:e.title},{property:"og:title",content:e.title},{name:"description",content:e.description},{property:"og:description",content:e.description},{name:"author",content:e.author},{property:"og:author",content:e.author},{name:"keywords",content:e.keywords.join(", ")},{property:"og:type",content:e.type}]}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"});let n=o;return n})();var Wt=(()=>{let o=class o{constructor(){this.currentRotation=P.required(),this.index=P.required(),this.toggleTrikot=P.required(),this.roatedPlayer=P.required(),this.rotationIndexMap=new Map().set(1,"4").set(2,"3").set(3,"2").set(4,"5").set(5,"6").set(6,"1"),this.rotationMap=new Map().set("1",new Map().set(1,4).set(2,3).set(3,2).set(4,5).set(5,6).set(6,1)).set("2",new Map().set(1,5).set(2,4).set(3,3).set(4,6).set(5,1).set(6,2)).set("3",new Map().set(1,6).set(2,5).set(3,4).set(4,1).set(5,2).set(6,3)).set("4",new Map().set(1,1).set(2,6).set(3,5).set(4,2).set(5,3).set(6,4)).set("5",new Map().set(1,2).set(2,1).set(3,6).set(4,3).set(5,4).set(6,5)).set("6",new Map().set(1,3).set(2,2).set(3,1).set(4,4).set(5,5).set(6,6))}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=E({type:o,selectors:[["app-grid-item"]],hostAttrs:[1,"p-5","border","border-1","flex","justify-center","items-center","h-full"],inputs:{currentRotation:[1,"currentRotation"],index:[1,"index"],toggleTrikot:[1,"toggleTrikot"],roatedPlayer:[1,"roatedPlayer"]},decls:6,vars:4,consts:[[1,"flex","flex-col","justify-center","items-center","gap-2"],[1,"bg-neutral","rounded-box","text-neutral-content","flex","flex-col","p-2"],[1,"countdown","font-league","text-5xl","text-center","text-primary"],[1,"swap","font-league","uppercase"]],template:function(i,t){if(i&1&&(N(0,"div",0)(1,"div",1)(2,"span",2),tt(3,"span"),O()(),N(4,"label",3),d(5),O()()),i&2){let c=t.rotationMap.get(t.currentRotation()),h=t.roatedPlayer().get(c.get(t.index()));s(3),et(nt("--value:",t.toggleTrikot()?h==null?null:h.trikot:t.rotationIndexMap.get(t.index()),";")),s(2),k(" ",h==null?null:h.name," ")}},encapsulation:2});let n=o;return n})();var jt=["rangeSlider"],Qt=(n,o)=>[n,o],$t=()=>[1,2,3,4,5,6];function qt(n,o){if(n&1&&(r(0,"mat-option",9),d(1),a()),n&2){let l=o.$implicit;u("value",l.id),s(),k(" ",l.title," ")}}function Gt(n,o){if(n&1){let l=W();r(0,"div",12)(1,"a",13),b(),r(2,"svg",14),f(3,"path",15),a(),d(4),p(5,"transloco"),a(),I(),r(6,"button",16),S("click",function(){M(l);let i=v(2);return w(i.copyLinkToClipboard())}),b(),r(7,"svg",14),f(8,"path",17),a(),d(9," Link kopieren "),a()()}if(n&2){let l=v(2);s(),u("routerLink",st(4,Qt,l.ROUTES.root+l.ROUTES.editGame,l.selectedEvent)),s(3),k(" ",g(5,2,"edit-this-event")," ")}}function Zt(n,o){if(n&1&&x(0,Gt,10,7,"div",12),n&2){let l,e=v();y(((l=e.session())==null||l.user==null?null:l.user.id)===(e.event==null?null:e.event.owner)?0:-1)}}function Kt(n,o){if(n&1&&(r(0,"span",37),d(1),a()),n&2){let l=o.$implicit;s(),m(l)}}function Yt(n,o){n&1&&(r(0,"div",38)(1,"div",47),b(),r(2,"svg",48),f(3,"path",49),a(),I(),r(4,"p",50),d(5),p(6,"transloco"),a()()()),n&2&&(s(5),m(g(6,1,"move-the-slider-preview-each-rotation-on-the-curt")))}function Jt(n,o){if(n&1&&(r(0,"div",44)(1,"div",51)(2,"span",52),d(3),a()(),r(4,"span",53),d(5),a()()),n&2){let l=o.$implicit;s(3),m(l==null?null:l.trikot),s(2),m(l==null?null:l.name)}}function te(n,o){n&1&&(r(0,"p",46),d(1,"Nur der Ersteller kann Notizen bearbeiten"),a())}function ee(n,o){if(n&1){let l=W();r(0,"div",10)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21)(5,"span",22),d(6),a()(),r(7,"div")(8,"p",23),d(9),p(10,"transloco"),a(),r(11,"p",24),d(12),a()()(),r(13,"mat-slide-toggle",25,0)(15,"span",26),d(16),p(17,"transloco"),p(18,"transloco"),p(19,"transloco"),a()()()(),r(20,"div",27)(21,"h2",28),d(22),a(),r(23,"div",29),f(24,"app-grid-item",30)(25,"app-grid-item",30)(26,"app-grid-item",30)(27,"app-grid-item",30)(28,"app-grid-item",30)(29,"app-grid-item",30),a(),r(30,"div",31)(31,"div",32)(32,"span",33),d(33,"Rotation"),a(),r(34,"span",34),d(35),a()(),r(36,"input",35,1),Q("ngModelChange",function(i){M(l);let t=v();return j(t.rotationSlider,i)||(t.rotationSlider=i),w(i)}),S("ngModelChange",function(i){M(l);let t=v();return w(t.onSliderChange(i))}),a(),r(38,"div",36),V(39,Kt,2,1,"span",37,C),a(),x(41,Yt,7,3,"div",38),a()(),r(42,"div",39)(43,"h3",40),b(),r(44,"svg",41),f(45,"path",42),a(),d(46," Bank "),a(),I(),r(47,"div",43),V(48,Jt,6,2,"div",44,C),a()(),r(50,"div",39)(51,"h3",40),b(),r(52,"svg",41),f(53,"path",15),a(),d(54," Notes "),a(),I(),r(55,"textarea",45,2),S("change",function(){M(l);let i=X(56),t=v();return w(t.updateNotes(i))}),a(),x(57,te,2,0,"p",46),a()()}if(n&2){let l,e,i=X(14),t=v();s(6),m(t.convertRoationCountToSetterPosition),s(3),m(g(10,37,"setter")),s(3),k("Position ",t.convertRoationCountToSetterPosition),s(),u("checked",!0),s(3),it(" ",g(17,39,"show")," ",i.checked?g(18,41,"Trikotnumber"):g(19,43,"BasePosition")," "),s(6),k("Spielfeld - Rotation ",t.rotationSlider),s(2),u("currentRotation",t.slider)("index",1)("toggleTrikot",i.checked)("roatedPlayer",t.roatedPlayer),s(),u("currentRotation",t.slider)("index",2)("toggleTrikot",i.checked)("roatedPlayer",t.roatedPlayer),s(),u("currentRotation",t.slider)("index",3)("toggleTrikot",i.checked)("roatedPlayer",t.roatedPlayer),s(),u("currentRotation",t.slider)("index",4)("toggleTrikot",i.checked)("roatedPlayer",t.roatedPlayer),s(),u("currentRotation",t.slider)("index",5)("toggleTrikot",i.checked)("roatedPlayer",t.roatedPlayer),s(),u("currentRotation",t.slider)("index",6)("toggleTrikot",i.checked)("roatedPlayer",t.roatedPlayer),s(6),m(t.rotationSlider),s(),H("ngModel",t.rotationSlider),s(3),A(at(45,$t)),s(2),y(t.hasMoved?-1:41),s(7),A(t.bank),s(7),u("value",t.event.notes||"")("disabled",t.event.owner!==((l=t.session())==null||l.user==null?null:l.user.id)),s(2),y(t.event.owner!==((e=t.session())==null||e.user==null?null:e.user.id)?57:-1)}}function ie(n,o){n&1&&(r(0,"div",11)(1,"div",54)(2,"div",55),b(),r(3,"svg",56),f(4,"path",57),a()(),I(),r(5,"h3",58),d(6,"Kein Event ausgew\xE4hlt"),a(),r(7,"p",59),d(8),p(9,"transloco"),a()()()),n&2&&(s(8),m(g(9,1,"please-select-an-event-to-see-information-here")))}var Je=(()=>{let o=class o{constructor(){this.ROUTES=B,this.router=_(U),this.snack=_(Vt),this.meta=_(Ot),this.route=_(ht),this.eventService=_(Mt),this.playerService=_(Rt),this.session=pt(bt.session),this.events=this.eventService.getEvents(),this.roatedPlayer=new Map,this.rotationSlider=1,this.hasMoved=!1,this.bank=[]}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}updateNotes(e){return T(this,null,function*(){try{yield this.eventService.createEvent(q(R({},this.event),{notes:e.value}))}catch{this.snack.open("Error saving Note","OK",{duration:2e3})}})}copyLinkToClipboard(){navigator.clipboard.writeText(document.location.href),this.snack.open("Copy to clipboard")}get slider(){return String(this.rotationSlider)}get convertRoationCountToSetterPosition(){switch(this.rotationSlider){case 1:return 1;case 2:return 6;case 3:return 5;case 4:return 4;case 5:return 3;case 6:return 2}return 0}ngOnInit(){return T(this,null,function*(){this.route.queryParams.subscribe(e=>{let i=e.rotation;i&&(this.rotationSlider=+i,this.hasMoved=!0,this.updateRouteWithRotation())}),this.route.data.subscribe(e=>T(this,null,function*(){this.event=e.game,this.selectedEvent=this.event?.id,yield this.updateProps(),this.meta.updateMetadata({title:`${this.event?.title}-> Rotation Planer`,description:"Plan your rotation for your next game",type:"website"},!0)})),this.route.queryParams.subscribe(e=>{let i=e.rotation;i&&(this.rotationSlider=+i)}),this.sub=G(4e3).pipe(Z(()=>!this.hasMoved)).subscribe(()=>{this.rotationSlider===6?this.rotationSlider=1:this.rotationSlider+=1,this.updateRouteWithRotation()})})}onSliderChange(e){this.rotationSlider=e,this.hasMoved=!0,this.updateRouteWithRotation()}updateRouteWithRotation(){this.router.navigate([],{relativeTo:this.route,queryParams:{rotation:this.rotationSlider},queryParamsHandling:"merge"})}updateProps(){return T(this,null,function*(){let e=new Map;if(!this.event)return;this.router.navigate([B.root+B.roationPlaner,this.event.id]);let i=Object.entries(this.event?.home_team_start_rotation),t=Object.values(Object.fromEntries(i)),c=yield this.playerService.getPlayerList([...i.map(h=>h[1]),...(0,D.without)(this.event.attendees,...t)]);i.forEach(([h,Lt])=>{e.set(Number(h),c.find(Ft=>Ft.id===Lt))}),this.roatedPlayer=e,this.bank=(0,D.without)(this.event.attendees,...t).map(h=>(0,D.find)(c,{id:h}))})}handleGameChange(e){return T(this,null,function*(){this.event=yield this.eventService.getEvent(e),this.updateProps()})}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=E({type:o,selectors:[["app-rotation-planer"]],viewQuery:function(i,t){if(i&1&&L(jt,5),i&2){let c;F(c=z())&&(t.rangeSlider=c.first)}},hostAttrs:[1,"w-full","flex","h-full"],decls:17,vars:11,consts:[["toggleTrikot",""],["rangeSlider",""],["notes",""],[1,"max-w-7xl","mx-auto","w-full","p-6"],[1,"bg-white","rounded-lg","shadow-md","p-6","mb-6"],[1,"text-2xl","font-bold","text-gray-800","mb-4"],[1,"mb-4"],[1,"w-full"],["placeholder","Select Game",3,"ngModelChange","valueChange","ngModel"],[3,"value"],[1,"space-y-6"],[1,"bg-white","rounded-lg","shadow-md","p-12"],[1,"flex","flex-col","sm:flex-row","gap-3"],[1,"inline-flex","items-center","justify-center","px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","text-sm","font-medium",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"inline-flex","items-center","justify-center","px-4","py-2","bg-gray-600","text-white","rounded-lg","hover:bg-gray-700","transition-colors","text-sm","font-medium",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"],[1,"bg-white","rounded-lg","shadow-md","p-4","md:p-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-4","mb-4"],[1,"flex","items-center","gap-3"],[1,"w-12","h-12","rounded-full","bg-blue-100","flex","items-center","justify-center","flex-shrink-0"],[1,"text-2xl","font-bold","text-blue-600"],[1,"text-sm","text-gray-600"],[1,"text-base","md:text-lg","font-semibold","text-gray-800"],[3,"checked"],[1,"text-gray-700","text-xs","md:text-sm"],[1,"bg-white","rounded-lg","shadow-md","p-4","md:p-8"],[1,"text-lg","md:text-xl","font-bold","text-gray-800","mb-4","md:mb-6"],[1,"grid","grid-cols-3","gap-2","md:gap-6","grid-rows-2","max-w-4xl","mx-auto","border-2","md:border-4","border-blue-600","rounded-lg","p-4","md:p-8","bg-gradient-to-b","from-blue-50","to-white"],[3,"currentRotation","index","toggleTrikot","roatedPlayer"],[1,"mt-8","px-4"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-sm","font-medium","text-gray-700"],[1,"text-lg","font-bold","text-blue-600"],["type","range","min","1","max","6","value","1",1,"w-full","h-3","bg-gray-200","rounded-lg","appearance-none","cursor-pointer","accent-blue-600",3,"ngModelChange","ngModel"],[1,"flex","justify-between","mt-1"],[1,"text-xs","text-gray-500"],[1,"mt-4","p-4","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"bg-white","rounded-lg","shadow-md","p-6"],[1,"text-xl","font-bold","text-gray-800","mb-4","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-6","gap-4"],[1,"flex","flex-col","items-center","gap-3","p-4","bg-gray-50","rounded-lg","border-2","border-gray-200","hover:border-blue-400","transition-colors"],["placeholder","Notizen zum Spiel...",1,"w-full","min-h-32","px-4","py-3","border-2","border-gray-200","rounded-lg","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","focus:outline-none","transition-colors","resize-y","disabled:bg-gray-50","disabled:cursor-not-allowed",3,"change","value","disabled"],[1,"mt-2","text-sm","text-gray-500"],[1,"flex","items-start","gap-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600","mt-0.5","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-blue-800"],[1,"w-16","h-16","rounded-full","bg-gradient-to-br","from-blue-600","to-blue-800","text-white","flex","items-center","justify-center","shadow-lg"],[1,"text-3xl","font-bold"],[1,"text-sm","font-medium","text-gray-800","text-center","uppercase"],[1,"flex","flex-col","items-center","text-center"],[1,"w-20","h-20","bg-gray-100","rounded-full","flex","items-center","justify-center","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"text-xl","font-semibold","text-gray-700","mb-2"],[1,"text-gray-500"]],template:function(i,t){if(i&1&&(r(0,"div",3)(1,"div",4)(2,"h1",5),d(3),p(4,"transloco"),a(),r(5,"div",6)(6,"mat-form-field",7)(7,"mat-label"),d(8),p(9,"transloco"),a(),r(10,"mat-select",8),Q("ngModelChange",function(h){return j(t.selectedEvent,h)||(t.selectedEvent=h),h}),S("valueChange",function(h){return t.handleGameChange(h)}),V(11,qt,2,2,"mat-option",9,C),p(13,"async"),a()()(),x(14,Zt,1,1),a(),x(15,ee,58,46,"div",10)(16,ie,10,3,"div",11),a()),i&2){let c;s(3),m(g(4,5,"rotation-planer")),s(5),m(g(9,7,"event")),s(2),H("ngModel",t.selectedEvent),s(),A(g(13,9,t.events)),s(3),y(((c=t.session())==null||c.user==null?null:c.user.id)===(t.event==null?null:t.event.owner)?14:-1),s(),y(t.event?15:16)}},dependencies:[ot,It,xt,Tt,yt,kt,ut,ct,St,Ct,Et,wt,Dt,Pt,At,Nt,Bt,Ut,vt,Wt,_t,rt,mt],encapsulation:2});let n=o;return n})();export{Je as RotationPlanerPageComponent};
