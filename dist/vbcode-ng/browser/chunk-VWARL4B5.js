import{d as Y,h as ee,i as te}from"./chunk-SSIQHUNB.js";import"./chunk-OIDJDANF.js";import{a as J}from"./chunk-EZLJX4BM.js";import{B as W,G as X,u as Q}from"./chunk-2T77MEFP.js";import{g as U,h as V,i as E,k as f,m as H,q as j,r as z,u as K,v as Z}from"./chunk-6PY7AWBK.js";import{a as P}from"./chunk-5IUMP6MF.js";import{a as L}from"./chunk-XGPREJ5I.js";import{c as g}from"./chunk-Q2CI2HOH.js";import{a as q}from"./chunk-YVU4E3LK.js";import"./chunk-QYFRUT7D.js";import{N as $,e as O,i as N,v as R,z as T}from"./chunk-WGJEK5TU.js";import{Ab as M,Lc as D,Nc as r,Ob as G,Oc as d,Pc as c,Qb as I,Rb as b,Sb as v,Tb as i,Ub as t,Vb as w,gb as l,ma as S,vc as n,xb as C,xc as p}from"./chunk-2HMN3K3N.js";import"./chunk-SECEFDB3.js";import{i as u}from"./chunk-GK2WYAVW.js";var ie=(()=>{let a=class a{transform(m,s){if(m)return m.filter(e=>e.kind===s)}};a.\u0275fac=function(s){return new(s||a)},a.\u0275pipe=M({name:"kindFilter",type:a,pure:!0});let o=a;return o})();var ae=(o,a,h)=>[o,a,"details",h];function re(o,a){if(o&1&&(i(0,"mat-option",5),n(1),t()),o&2){let h=a.$implicit;v("value",h.id),l(),p(" ",h.title," ")}}var Ae=(()=>{let a=class a{constructor(){this.ROUTES=L,this.supabase=S($),this.actionsService=S(J),this.eventsService=S(q),this.events=this.eventsService.getEvents(),this.hits=[],this.kinds=g,this.gameF=new E({game_id:new f(""),game_set:new f("Alle")}),this.pieChartDist={series:[]},this.newGameF=new E({title:new f(""),date:new f(new Date)}),this.setCountOptionOfGame=[1]}ngOnInit(){return u(this,null,function*(){this.events=this.eventsService.getEvents();let m=(yield this.events)[0].id;if(!m)return;this.gameF.controls.game_id.setValue(m),this.actions=this.actionsService.getActionsOfEvent(m),yield this.refreshHits();let s=[{name:"Attack",value:(yield this.actions).filter(e=>e.kind===g.Attack).length}];this.pieChartDist.series=s,this.gameF.controls.game_id.valueChanges.subscribe(e=>u(this,null,function*(){this.actions=this.actionsService.getActionsOfEvent(e||""),yield this.refreshHits()}))})}refreshHits(){return u(this,null,function*(){this.hits=(yield this.actions)?.filter(m=>m.kind===g.Attack)})}createNewGame(){return u(this,null,function*(){yield this.eventsService.createEvent(this.newGameF.value),this.newGameF.reset()})}};a.\u0275fac=function(s){return new(s||a)},a.\u0275cmp=C({type:a,selectors:[["app-gameview"]],decls:76,vars:52,consts:[[1,"flex","flex-col","max-w-full","overflow-hidden","p-3","md:p-0"],[1,"flex","gap-4","md:gap-8","p-3","md:p-5"],[1,"flex","flex-col","sm:flex-row","gap-3","md:gap-4","w-full","sm:w-auto",3,"formGroup"],[1,"w-full","sm:w-auto"],["formControlName","game_id"],["selected","",3,"value"],["placeholder","Satz","formControlName","game_set",3,"value"],["value","Alle"],["value","1"],[1,"flex","flex-col","md:flex-row","w-full","justify-between","p-3","md:p-5","gap-4"],[1,"stats","stats-vertical","shadow","w-full","md:w-1/2"],[1,"stat"],[1,"stat-title"],[1,"stat-value","text-secondary"],[1,"px-3","md:px-5","pb-3","md:pb-5"],[1,"btn","w-full","sm:w-auto",3,"routerLink"],["echarts","",1,"h-40","md:h-60","w-full","px-3","md:px-5",3,"options"]],template:function(s,e){if(s&1&&(i(0,"div",0)(1,"div",1)(2,"form",2)(3,"mat-form-field",3)(4,"mat-label"),n(5,"Game:"),t(),i(6,"mat-select",4),I(7,re,2,2,"mat-option",5,G),r(9,"async"),t()(),i(10,"mat-form-field",3)(11,"mat-label"),n(12,"Satz:"),t(),i(13,"mat-select",6)(14,"mat-option",7),n(15,"Alle"),t(),i(16,"mat-option",8),n(17," 1 "),t()()()()(),w(18,"hr"),i(19,"div",9)(20,"div",10)(21,"div",11)(22,"div",12),n(23,"Angriffe"),t(),i(24,"div",13),n(25),r(26,"async"),r(27,"kindFilter"),t()(),i(28,"div",11)(29,"div",12),n(30,"Aufschl\xE4ge"),t(),i(31,"div",13),n(32),r(33,"async"),r(34,"kindFilter"),t()(),i(35,"div",11)(36,"div",12),n(37,"Annahme"),t(),i(38,"div",13),n(39),r(40,"async"),r(41,"kindFilter"),t()()(),i(42,"div",10)(43,"div",11)(44,"div",12),n(45,"Blocks"),t(),i(46,"div",13),n(47),r(48,"async"),r(49,"kindFilter"),t()(),i(50,"div",11)(51,"div",12),n(52,"Zuspiele"),t(),i(53,"div",13),n(54),r(55,"async"),r(56,"kindFilter"),t()(),i(57,"div",11)(58,"div",12),n(59,"Defense"),t(),i(60,"div",13),n(61),r(62,"async"),r(63,"kindFilter"),t()(),i(64,"div",11)(65,"div",12),n(66,"FreeBall"),t(),i(67,"div",13),n(68),r(69,"async"),r(70,"kindFilter"),t()()()(),i(71,"div",14)(72,"a",15),n(73,"Details"),t()(),w(74,"div",16)(75,"hr"),t()),s&2){let F,k,x,y,_,B,A;l(2),v("formGroup",e.gameF),l(5),b(d(9,11,e.events)),l(6),v("value","Alle"),l(12),p(" ",(F=c(27,15,d(26,13,e.actions),e.kinds.Attack))==null?null:F.length," "),l(7),p(" ",(k=c(34,20,d(33,18,e.actions),e.kinds.Serve))==null?null:k.length," "),l(7),p(" ",(x=c(41,25,d(40,23,e.actions),e.kinds.Recieve))==null?null:x.length," "),l(8),p(" ",(y=c(49,30,d(48,28,e.actions),e.kinds.Block))==null?null:y.length," "),l(7),p(" ",(_=c(56,35,d(55,33,e.actions),e.kinds.Set))==null?null:_.length," "),l(7),p(" ",(B=c(63,40,d(62,38,e.actions),e.kinds.Def))==null?null:B.length," "),l(7),p(" ",(A=c(70,45,d(69,43,e.actions),e.kinds.Free))==null?null:A.length," "),l(4),v("routerLink",D(48,ae,e.ROUTES.root,e.ROUTES.report,e.gameF.controls.game_id.value)),l(2),v("options",e.pieChartDist)}},dependencies:[T,R,N,W,X,Q,P,K,H,U,V,Z,j,z,te,ee,Y,O,ie],encapsulation:2});let o=a;return o})();export{Ae as GameViewComponent};
