import{a as Pt,b as Dt}from"./chunk-X36R26KF.js";import{a as Ct}from"./chunk-NCBZGK5Q.js";import{a as Vt,b as At}from"./chunk-P6AMAEKG.js";import{o as wt,v as Et,w as Mt}from"./chunk-CNOLVGQB.js";import{b as bt,f as xt,k as Tt,n as kt,u as yt,v as It}from"./chunk-VZJ7TN34.js";import"./chunk-3ACIU7HM.js";import{a as Ft}from"./chunk-BCCPXHBQ.js";import"./chunk-LERSMEHN.js";import{b as ct,c as ut,f as gt}from"./chunk-QUDDSHFB.js";import{a as O}from"./chunk-ZNAIGONW.js";import{a as Rt}from"./chunk-42BQEJLT.js";import{E as pt,L as _t,R as vt,X as St}from"./chunk-SMK4RA2U.js";import{C as ft,e as rt,f as ot,i as lt,k as N,l as dt,p as ht,y as mt}from"./chunk-WYJAB3JE.js";import{Bb as y,C as G,Cc as v,Dc as g,Ea as E,Fa as M,Fb as u,Ga as b,Ha as k,Kb as I,Lb as V,Nb as A,Ob as P,Pb as s,Qa as C,Qb as n,Rb as _,Vb as L,Yb as S,_b as f,ca as Z,dc as W,ec as F,fc as X,ia as Y,ic as z,ja as K,jc as tt,kb as o,kc as l,kd as at,lc as m,mc as x,nc as et,oa as p,od as B,pc as j,qc as H,rc as Q,sc as it,ua as w,va as J,wc as D,xc as nt,zc as st}from"./chunk-ME47VETO.js";import"./chunk-SECEFDB3.js";import{a as R,b as q,f as Wt,i as T}from"./chunk-GK2WYAVW.js";var Ut=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=J({type:i}),i.\u0275inj=K({imports:[pt,_t]});let a=i;return a})();var U=Wt(Ft());var Xt={title:"App Title",description:"App description",author:"Daniil Baunov",keywords:["Angular","meta tags","Angular Universal"],type:"website"},Bt=(()=>{let i=class i{constructor(){this.meta=p(rt),this.titleService=p(ot),this.router=p(N)}updateMetadata(r,e=!0){let t=R(R({},Xt),r),c=this.generateMetaDefinitions(t);this.meta.addTags([...c,{name:"robots",content:e?"index, follow":"noindex"},{name:"viewport",content:"width=device-width, initial-scale=1"},{"http-equiv":"Content-Type",content:"text/html; charset=utf-8"}]),this.titleService.setTitle(t.title)}generateMetaDefinitions(r){return[{name:"title",content:r.title},{property:"og:title",content:r.title},{name:"description",content:r.description},{property:"og:description",content:r.description},{name:"author",content:r.author},{property:"og:author",content:r.author},{name:"keywords",content:r.keywords.join(", ")},{property:"og:type",content:r.type}]}};i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"});let a=i;return a})();var Nt=(()=>{let i=class i{constructor(){this.currentRotation=C.required(),this.index=C.required(),this.toggleTrikot=C.required(),this.roatedPlayer=C.required(),this.rotationIndexMap=new Map().set(1,"4").set(2,"3").set(3,"2").set(4,"5").set(5,"6").set(6,"1"),this.rotationMap=new Map().set("1",new Map().set(1,4).set(2,3).set(3,2).set(4,5).set(5,6).set(6,1)).set("2",new Map().set(1,5).set(2,4).set(3,3).set(4,6).set(5,1).set(6,2)).set("3",new Map().set(1,6).set(2,5).set(3,4).set(4,1).set(5,2).set(6,3)).set("4",new Map().set(1,1).set(2,6).set(3,5).set(4,2).set(5,3).set(6,4)).set("5",new Map().set(1,2).set(2,1).set(3,6).set(4,3).set(5,4).set(6,5)).set("6",new Map().set(1,3).set(2,2).set(3,1).set(4,4).set(5,5).set(6,6))}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=w({type:i,selectors:[["app-grid-item"]],hostAttrs:[1,"p-5","border","border-1","flex","justify-center","items-center","h-full"],inputs:{currentRotation:[1,"currentRotation"],index:[1,"index"],toggleTrikot:[1,"toggleTrikot"],roatedPlayer:[1,"roatedPlayer"]},standalone:!0,features:[D],decls:8,vars:4,consts:[[1,"flex","flex-col","justify-center","items-center","gap-2"],[1,"bg-neutral","rounded-box","text-neutral-content","flex","flex-col","p-2"],[1,"countdown","font-league","text-5xl","text-center","text-primary"],[1,"swap","font-league","uppercase"]],template:function(e,t){if(e&1&&(s(0,"div",0),it(1)(2),s(3,"div",1)(4,"span",2),_(5,"span"),n()(),s(6,"label",3),l(7),n()()),e&2){let c=t.rotationMap.get(t.currentRotation()),h=t.roatedPlayer().get(c.get(t.index()));o(5),tt("--value:",t.toggleTrikot()?h==null?null:h.trikot:t.rotationIndexMap.get(t.index()),";"),o(2),x(" ",h==null?null:h.name," ")}},dependencies:[B],encapsulation:2});let a=i;return a})();var zt=["rangeSlider"],jt=(a,i)=>[a,i],Ht=()=>[1,2,3,4,5,6];function Qt(a,i){if(a&1&&(s(0,"mat-option",9),l(1),n()),a&2){let d=i.$implicit;u("value",d.id),o(),x(" ",d.title," ")}}function $t(a,i){if(a&1){let d=L();s(0,"div",10)(1,"a",13),b(),s(2,"svg",14),_(3,"path",15),n(),l(4),v(5,"transloco"),n(),k(),s(6,"button",16),S("click",function(){E(d);let e=f();return M(e.copyLinkToClipboard())}),b(),s(7,"svg",14),_(8,"path",17),n(),l(9," Link kopieren "),n()()}if(a&2){let d=f();o(),u("routerLink",st(4,jt,d.ROUTES.root+d.ROUTES.editGame,d.selectedEvent)),o(3),x(" ",g(5,2,"edit-this-event")," ")}}function qt(a,i){if(a&1&&(s(0,"span",37),l(1),n()),a&2){let d=i.$implicit;o(),m(d)}}function Gt(a,i){a&1&&(s(0,"div",38)(1,"div",46),b(),s(2,"svg",47),_(3,"path",48),n(),k(),s(4,"p",49),l(5),v(6,"transloco"),n()()()),a&2&&(o(5),m(g(6,1,"move-the-slider-preview-each-rotation-on-the-curt")))}function Zt(a,i){if(a&1&&(s(0,"div",43)(1,"div",50)(2,"span",51),l(3),n()(),s(4,"span",52),l(5),n()()),a&2){let d=i.$implicit;o(3),m(d==null?null:d.trikot),o(2),m(d==null?null:d.name)}}function Yt(a,i){a&1&&(s(0,"p",45),l(1,"Nur der Ersteller kann Notizen bearbeiten"),n())}function Kt(a,i){if(a&1){let d=L();s(0,"div",11)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21)(5,"span",22),l(6),n()(),s(7,"div")(8,"p",23),l(9),v(10,"transloco"),n(),s(11,"p",24),l(12),n()()(),s(13,"mat-slide-toggle",25,0)(15,"span",26),l(16),v(17,"transloco"),v(18,"transloco"),v(19,"transloco"),n()()()(),s(20,"div",27)(21,"h2",28),l(22),n(),s(23,"div",29),_(24,"app-grid-item",30)(25,"app-grid-item",30)(26,"app-grid-item",30)(27,"app-grid-item",30)(28,"app-grid-item",30)(29,"app-grid-item",30),n(),s(30,"div",31)(31,"div",32)(32,"span",33),l(33,"Rotation"),n(),s(34,"span",34),l(35),n()(),s(36,"input",35,1),Q("ngModelChange",function(e){E(d);let t=f();return H(t.rotationSlider,e)||(t.rotationSlider=e),M(e)}),S("ngModelChange",function(e){E(d);let t=f();return M(t.onSliderChange(e))}),n(),s(38,"div",36),A(39,qt,2,1,"span",37,V),n(),y(41,Gt,7,3,"div",38),n()(),s(42,"div",18)(43,"h3",39),b(),s(44,"svg",40),_(45,"path",41),n(),l(46," Bank "),n(),k(),s(47,"div",42),A(48,Zt,6,2,"div",43,V),n()(),s(50,"div",18)(51,"h3",39),b(),s(52,"svg",40),_(53,"path",15),n(),l(54," Notes "),n(),k(),s(55,"textarea",44,2),S("change",function(){E(d);let e=z(56),t=f();return M(t.updateNotes(e))}),n(),y(57,Yt,2,0,"p",45),n()()}if(a&2){let d,r,e=z(14),t=f();o(6),m(t.convertRoationCountToSetterPosition),o(3),m(g(10,37,"setter")),o(3),x("Position ",t.convertRoationCountToSetterPosition,""),o(),u("checked",!0),o(3),et(" ",g(17,39,"show")," ",e.checked?g(18,41,"Trikotnumber"):g(19,43,"BasePosition")," "),o(6),x("Spielfeld - Rotation ",t.rotationSlider,""),o(2),u("currentRotation",t.slider)("index",1)("toggleTrikot",e.checked)("roatedPlayer",t.roatedPlayer),o(),u("currentRotation",t.slider)("index",2)("toggleTrikot",e.checked)("roatedPlayer",t.roatedPlayer),o(),u("currentRotation",t.slider)("index",3)("toggleTrikot",e.checked)("roatedPlayer",t.roatedPlayer),o(),u("currentRotation",t.slider)("index",4)("toggleTrikot",e.checked)("roatedPlayer",t.roatedPlayer),o(),u("currentRotation",t.slider)("index",5)("toggleTrikot",e.checked)("roatedPlayer",t.roatedPlayer),o(),u("currentRotation",t.slider)("index",6)("toggleTrikot",e.checked)("roatedPlayer",t.roatedPlayer),o(6),m(t.rotationSlider),o(),j("ngModel",t.rotationSlider),o(3),P(nt(45,Ht)),o(2),I(t.hasMoved?-1:41),o(7),P(t.bank),o(7),u("value",t.event.notes||"")("disabled",t.event.owner!==((d=t.session())==null||d.user==null?null:d.user.id)),o(2),I(t.event.owner!==((r=t.session())==null||r.user==null?null:r.user.id)?57:-1)}}function Jt(a,i){a&1&&(s(0,"div",12)(1,"div",53)(2,"div",54),b(),s(3,"svg",55),_(4,"path",56),n()(),k(),s(5,"h3",57),l(6,"Kein Event ausgew\xE4hlt"),n(),s(7,"p",58),l(8),v(9,"transloco"),n()()()),a&2&&(o(8),m(g(9,1,"please-select-an-event-to-see-information-here")))}var ai=(()=>{let i=class i{constructor(){this.ROUTES=O,this.router=p(N),this.snack=p(Ct),this.meta=p(Bt),this.route=p(lt),this.eventService=p(Rt),this.playerService=p(St),this.session=mt(ft.session),this.events=this.eventService.getEvents(),this.roatedPlayer=new Map,this.rotationSlider=1,this.hasMoved=!1,this.bank=[]}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}updateNotes(r){return T(this,null,function*(){try{yield this.eventService.createEvent(q(R({},this.event),{notes:r.value}))}catch{this.snack.open("Error saving Note","OK",{duration:2e3})}})}copyLinkToClipboard(){navigator.clipboard.writeText(document.location.href),this.snack.open("Copy to clipboard")}get slider(){return String(this.rotationSlider)}get convertRoationCountToSetterPosition(){switch(this.rotationSlider){case 1:return 1;case 2:return 6;case 3:return 5;case 4:return 4;case 5:return 3;case 6:return 2}return 0}ngOnInit(){return T(this,null,function*(){this.route.queryParams.subscribe(r=>{let e=r.rotation;e&&(this.rotationSlider=+e,this.hasMoved=!0,this.updateRouteWithRotation())}),this.route.data.subscribe(r=>T(this,null,function*(){this.event=r.game,this.selectedEvent=this.event?.id,yield this.updateProps(),this.meta.updateMetadata({title:`${this.event?.title}-> Rotation Planer`,description:"Plan your rotation for your next game",type:"website"},!0)})),this.route.queryParams.subscribe(r=>{let e=r.rotation;e&&(this.rotationSlider=+e)}),this.sub=G(4e3).pipe(Z(()=>!this.hasMoved)).subscribe(()=>{this.rotationSlider===6?this.rotationSlider=1:this.rotationSlider+=1,this.updateRouteWithRotation()})})}onSliderChange(r){this.rotationSlider=r,this.hasMoved=!0,this.updateRouteWithRotation()}updateRouteWithRotation(){this.router.navigate([],{relativeTo:this.route,queryParams:{rotation:this.rotationSlider},queryParamsHandling:"merge"})}updateProps(){return T(this,null,function*(){let r=new Map;if(!this.event)return;this.router.navigate([O.root+O.roationPlaner,this.event.id]);let e=Object.entries(this.event?.home_team_start_rotation),t=Object.values(Object.fromEntries(e)),c=yield this.playerService.getPlayerList([...e.map(h=>h[1]),...(0,U.without)(this.event.attendees,...t)]);e.forEach(([h,Ot])=>{r.set(Number(h),c.find(Lt=>Lt.id===Ot))}),this.roatedPlayer=r,this.bank=(0,U.without)(this.event.attendees,...t).map(h=>(0,U.find)(c,{id:h}))})}handleGameChange(r){return T(this,null,function*(){this.event=yield this.eventService.getEvent(r),this.updateProps()})}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=w({type:i,selectors:[["app-rotation-planer"]],viewQuery:function(e,t){if(e&1&&W(zt,5),e&2){let c;F(c=X())&&(t.rangeSlider=c.first)}},hostAttrs:[1,"w-full","flex","h-full"],standalone:!0,features:[D],decls:17,vars:11,consts:[["toggleTrikot",""],["rangeSlider",""],["notes",""],[1,"max-w-7xl","mx-auto","w-full","p-6"],[1,"bg-white","rounded-lg","shadow-md","p-6","mb-6"],[1,"text-2xl","font-bold","text-gray-800","mb-4"],[1,"mb-4"],[1,"w-full"],["placeholder","Select Game",3,"ngModelChange","valueChange","ngModel"],[3,"value"],[1,"flex","gap-3"],[1,"space-y-6"],[1,"bg-white","rounded-lg","shadow-md","p-12"],[1,"inline-flex","items-center","px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","text-sm","font-medium",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"inline-flex","items-center","px-4","py-2","bg-gray-600","text-white","rounded-lg","hover:bg-gray-700","transition-colors","text-sm","font-medium",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"],[1,"bg-white","rounded-lg","shadow-md","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","items-center","gap-3"],[1,"w-12","h-12","rounded-full","bg-blue-100","flex","items-center","justify-center"],[1,"text-2xl","font-bold","text-blue-600"],[1,"text-sm","text-gray-600"],[1,"text-lg","font-semibold","text-gray-800"],[1,"ml-auto",3,"checked"],[1,"text-gray-700","text-sm"],[1,"bg-white","rounded-lg","shadow-md","p-8"],[1,"text-xl","font-bold","text-gray-800","mb-6"],[1,"grid","grid-cols-3","gap-6","grid-rows-2","max-w-4xl","mx-auto","border-4","border-blue-600","rounded-lg","p-8","bg-gradient-to-b","from-blue-50","to-white"],[3,"currentRotation","index","toggleTrikot","roatedPlayer"],[1,"mt-8","px-4"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-sm","font-medium","text-gray-700"],[1,"text-lg","font-bold","text-blue-600"],["type","range","min","1","max","6","value","1",1,"w-full","h-3","bg-gray-200","rounded-lg","appearance-none","cursor-pointer","accent-blue-600",3,"ngModelChange","ngModel"],[1,"flex","justify-between","mt-1"],[1,"text-xs","text-gray-500"],[1,"mt-4","p-4","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"text-xl","font-bold","text-gray-800","mb-4","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-6","gap-4"],[1,"flex","flex-col","items-center","gap-3","p-4","bg-gray-50","rounded-lg","border-2","border-gray-200","hover:border-blue-400","transition-colors"],["placeholder","Notizen zum Spiel...",1,"w-full","min-h-32","px-4","py-3","border-2","border-gray-200","rounded-lg","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","focus:outline-none","transition-colors","resize-y","disabled:bg-gray-50","disabled:cursor-not-allowed",3,"change","value","disabled"],[1,"mt-2","text-sm","text-gray-500"],[1,"flex","items-start","gap-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600","mt-0.5","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-blue-800"],[1,"w-16","h-16","rounded-full","bg-gradient-to-br","from-blue-600","to-blue-800","text-white","flex","items-center","justify-center","shadow-lg"],[1,"text-3xl","font-bold"],[1,"text-sm","font-medium","text-gray-800","text-center","uppercase"],[1,"flex","flex-col","items-center","text-center"],[1,"w-20","h-20","bg-gray-100","rounded-full","flex","items-center","justify-center","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"text-xl","font-semibold","text-gray-700","mb-2"],[1,"text-gray-500"]],template:function(e,t){if(e&1&&(s(0,"div",3)(1,"div",4)(2,"h1",5),l(3),v(4,"transloco"),n(),s(5,"div",6)(6,"mat-form-field",7)(7,"mat-label"),l(8),v(9,"transloco"),n(),s(10,"mat-select",8),Q("ngModelChange",function(h){return H(t.selectedEvent,h)||(t.selectedEvent=h),h}),S("valueChange",function(h){return t.handleGameChange(h)}),A(11,Qt,2,2,"mat-option",9,V),v(13,"async"),n()()(),y(14,$t,10,7,"div",10),n(),y(15,Kt,58,46,"div",11)(16,Jt,10,3,"div",12),n()),e&2){let c;o(3),m(g(4,5,"rotation-planer")),o(5),m(g(9,7,"event")),o(2),j("ngModel",t.selectedEvent),o(),P(g(13,9,t.events)),o(3),I(((c=t.session())==null||c.user==null?null:c.user.id)===(t.event==null?null:t.event.owner)?14:-1),o(),I(t.event?15:16)}},dependencies:[B,at,yt,bt,kt,xt,Tt,ht,dt,It,Mt,Et,wt,At,Vt,vt,Ut,Dt,Pt,gt,Nt,ut,ct],encapsulation:2});let a=i;return a})();export{ai as RotationPlanerPageComponent};
