import{a as p,c as f}from"./chunk-AC5BHCOO.js";import{a as h}from"./chunk-ZV26CFN4.js";import{C as u,D as m,y as d}from"./chunk-EHXDS3RM.js";import{h as l,ha as c,na as o}from"./chunk-OIJTL5GY.js";import{i as t}from"./chunk-GK2WYAVW.js";var s="actions",I=(()=>{let r=class r{constructor(){this.supabase=o(m).supabase,this.playerService=o(h),this.user_player=d(u.user_player),this.allColsInclBreakdown="*, player_id (id, name, trikot) ",this.actionChangesChannel=this.supabase.channel("actions-all-channel").on("postgres_changes",{event:"*",schema:"public",table:"actions"},e=>{this.actions$.next(e)}).subscribe(),this.actions$=new l(null)}getActionsOfLastEventByPlayer(e){return t(this,null,function*(){try{return(yield this.supabase.from(s).select(this.allColsInclBreakdown).eq("player_id",e.id)).data}catch(a){return console.error("Error fetching actions of last event by user: ",a),null}})}getActionsOfEventByPlayer(e,a){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown).eq("game_id",e).eq("player_id",a)).data})}getActionsOfEventByGradeAndPlayer(e,a,n){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown).eq("game_id",e).eq("grade",a).eq("player_id",n)).data})}getActionsOfEventByGrade(e,a){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown).eq("game_id",e).eq("grade",a)).data})}getActionsOfEventByKindAndGrade(e,a,n){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown).eq("game_id",e).eq("kind",a).eq("grade",n)).data})}getActionsOfEventByKindAndPlayer(e,a,n){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown).eq("game_id",e).eq("kind",a).eq("player_id",n)).data})}getActionsOfEventByKind(e,a){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown).eq("game_id",e).eq("kind",a)).data})}getActionsOfEvent(e){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown).order("created_at").eq("game_id",e)).data})}getActionsOfEventOfSet(e,a){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown).eq("game_id",e).eq("game_set",a)).data})}getActions(){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown)).data})}createAction(e){return t(this,null,function*(){return(yield this.supabase.from(s).upsert(e).select()).data})}getAcesOfEvent(e){return t(this,null,function*(){return(yield this.supabase.from(s).select("*").eq("game_id",e).eq("kind",f.Serve).eq("grade",p["#"])).data})}deleteAction(e){return t(this,null,function*(){return(yield this.supabase.from(s).delete().eq("id",e)).data})}};r.\u0275fac=function(a){return new(a||r)},r.\u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})();export{I as a};
