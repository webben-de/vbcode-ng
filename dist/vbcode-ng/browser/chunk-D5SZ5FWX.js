import{a as ce,b as me,c as ve}from"./chunk-4NRCP73X.js";import{d as pe}from"./chunk-R2ZM2E6V.js";import{a as K,b as N,c as Q,d as U,e as X,f as Y}from"./chunk-IMJO6HOY.js";import{d as oe,h as se,i as de}from"./chunk-SSIQHUNB.js";import"./chunk-OIDJDANF.js";import{a as ae}from"./chunk-EZLJX4BM.js";import{B as re,C as le,u as ne}from"./chunk-2T77MEFP.js";import"./chunk-6PY7AWBK.js";import{e as J}from"./chunk-SDY2E75B.js";import{b as z,c as V,f as Z}from"./chunk-ZXWJ2HWB.js";import"./chunk-Q2CI2HOH.js";import{a as ie}from"./chunk-YVU4E3LK.js";import{T as te}from"./chunk-QYFRUT7D.js";import{I as q,M as ee,f as j,i as L,s as W,u as G,z as H}from"./chunk-WGJEK5TU.js";import{Ac as D,Bc as $,Cc as R,Mb as P,Nb as b,Nc as l,Oc as s,Pc as y,Qb as f,Rb as g,Sb as h,Tb as t,Ub as i,Vb as T,ec as F,gb as e,gc as E,ma as S,sc as C,va as k,vc as a,wa as A,wc as n,xb as w,xc as _,yc as O}from"./chunk-2HMN3K3N.js";import"./chunk-SECEFDB3.js";import{i as u}from"./chunk-GK2WYAVW.js";var Se=(d,p)=>p.id,I=(d,p)=>p.event.id;function fe(d,p){if(d&1&&(t(0,"div",3)(1,"span",9),a(2),i(),t(3,"span",10),a(4),i()()),d&2){let r=E();e(2),n(r.selectedPlayer.name),e(2),n(r.selectedPlayer.trikot)}}function ge(d,p){if(d&1&&(t(0,"mat-option",7),a(1),i()),d&2){let r=p.$implicit;h("value",r),e(),O(" ",r.name," (",r.trikot,") ")}}function he(d,p){if(d&1&&(t(0,"mat-card",20)(1,"mat-card-header")(2,"mat-card-title",24)(3,"span"),a(4),i(),t(5,"span",25),a(6),l(7,"transloco"),l(8,"transloco"),i()(),t(9,"mat-card-subtitle"),a(10),l(11,"date"),i()(),t(12,"mat-card-content")(13,"div",26)(14,"div",27)(15,"div",28),a(16),i(),t(17,"div",29),a(18),l(19,"transloco"),i()(),t(20,"div",27)(21,"div",30),a(22),i(),t(23,"div",29),a(24),l(25,"transloco"),i()(),t(26,"div",27)(27,"div",31),a(28),i(),t(29,"div",29),a(30),l(31,"transloco"),i()()()()()),d&2){let r=p.$implicit;e(4),n(r.event.title),e(),C("badge-primary",r.event.event_type==="game")("badge-success",r.event.event_type==="training"),e(),_(" ",r.event.event_type==="training"?s(7,13,"training"):s(8,15,"game")," "),e(4),n(y(11,17,r.event.date,"short")),e(6),n(r.stats.totalActions),e(2),n(s(19,20,"actions")),e(4),n(r.stats.aces),e(2),n(s(25,22,"aces")),e(4),n(r.stats.errors),e(2),n(s(31,24,"errors"))}}function ye(d,p){if(d&1&&(t(0,"mat-card",20)(1,"mat-card-header")(2,"mat-card-title"),a(3),i(),t(4,"mat-card-subtitle"),a(5),l(6,"date"),i()(),t(7,"mat-card-content")(8,"div",26)(9,"div",27)(10,"div",28),a(11),i(),t(12,"div",29),a(13),l(14,"transloco"),i()(),t(15,"div",27)(16,"div",30),a(17),i(),t(18,"div",29),a(19),l(20,"transloco"),i()(),t(21,"div",27)(22,"div",31),a(23),i(),t(24,"div",29),a(25),l(26,"transloco"),i()()()()()),d&2){let r=p.$implicit;e(3),n(r.event.title),e(2),n(y(6,8,r.event.date,"short")),e(6),n(r.stats.totalActions),e(2),n(s(14,11,"actions")),e(4),n(r.stats.aces),e(2),n(s(20,13,"aces")),e(4),n(r.stats.errors),e(2),n(s(26,15,"errors"))}}function ue(d,p){if(d&1&&(t(0,"mat-card",20)(1,"mat-card-header")(2,"mat-card-title"),a(3),i(),t(4,"mat-card-subtitle"),a(5),l(6,"date"),i()(),t(7,"mat-card-content")(8,"div",26)(9,"div",27)(10,"div",28),a(11),i(),t(12,"div",29),a(13),l(14,"transloco"),i()(),t(15,"div",27)(16,"div",30),a(17),i(),t(18,"div",29),a(19),l(20,"transloco"),i()(),t(21,"div",27)(22,"div",31),a(23),i(),t(24,"div",29),a(25),l(26,"transloco"),i()()()()()),d&2){let r=p.$implicit;e(3),n(r.event.title),e(2),n(y(6,8,r.event.date,"short")),e(6),n(r.stats.totalActions),e(2),n(s(14,11,"actions")),e(4),n(r.stats.aces),e(2),n(s(20,13,"aces")),e(4),n(r.stats.errors),e(2),n(s(26,15,"errors"))}}function Ee(d,p){if(d&1&&(t(0,"tr",23)(1,"td"),a(2),l(3,"date"),i(),t(4,"td"),a(5),i(),t(6,"td")(7,"span",32),a(8),l(9,"transloco"),l(10,"transloco"),i()(),t(11,"td"),a(12),i(),t(13,"td"),a(14),i(),t(15,"td"),a(16),i(),t(17,"td"),a(18),i()()),d&2){let r=p.$implicit,o=E(2);e(2),n(y(3,11,r.event.date,"short")),e(3),n(r.event.title),e(2),C("badge-primary",r.event.event_type==="game")("badge-success",r.event.event_type==="training"),e(),_(" ",r.event.event_type==="training"?s(9,14,"training"):s(10,16,"game")," "),e(4),n(r.stats.totalActions),e(2),n(r.stats.aces),e(2),n(r.stats.errors),e(2),_("",o.calculateEfficiency(r.stats),"%")}}function _e(d,p){if(d&1&&(t(0,"div",4)(1,"h2",11),a(2),l(3,"transloco"),i(),t(4,"div",12)(5,"div",13)(6,"div",14),a(7),l(8,"transloco"),i(),t(9,"div",15),a(10),i()(),t(11,"div",13)(12,"div",14),a(13),l(14,"transloco"),i(),t(15,"div",16),a(16),i()(),t(17,"div",13)(18,"div",14),a(19),l(20,"transloco"),i(),t(21,"div",16),a(22),i()(),t(23,"div",13)(24,"div",14),a(25),l(26,"transloco"),i(),t(27,"div",17),a(28),i()()()(),t(29,"mat-tab-group",4)(30,"mat-tab",18),l(31,"transloco"),t(32,"div",19),f(33,he,32,26,"mat-card",20,I),i()(),t(35,"mat-tab",18),l(36,"transloco"),t(37,"div",19),f(38,ye,27,17,"mat-card",20,I),i()(),t(40,"mat-tab",18),l(41,"transloco"),t(42,"div",19),f(43,ue,27,17,"mat-card",20,I),i()()(),t(45,"div",4)(46,"h2",11),a(47),l(48,"transloco"),i(),t(49,"div",21)(50,"table",22)(51,"thead")(52,"tr")(53,"th"),a(54),l(55,"transloco"),i(),t(56,"th"),a(57),l(58,"transloco"),i(),t(59,"th"),a(60),l(61,"transloco"),i(),t(62,"th"),a(63),l(64,"transloco"),i(),t(65,"th"),a(66),l(67,"transloco"),i(),t(68,"th"),a(69),l(70,"transloco"),i(),t(71,"th"),a(72),l(73,"transloco"),i()()(),t(74,"tbody"),f(75,Ee,19,18,"tr",23,I),i()()()()),d&2){let r=E();e(2),n(s(3,20,"overall-statistics")),e(5),n(s(8,22,"total-actions")),e(3),n(r.overallStats.totalActions),e(3),n(s(14,24,"aces")),e(3),n(r.overallStats.aces),e(3),n(s(20,26,"perfect-actions")),e(3),n(r.overallStats.perfectActions),e(3),n(s(26,28,"errors")),e(3),n(r.overallStats.errors),e(2),h("label",s(31,30,"all-events")),e(3),g(r.eventStats),e(2),h("label",s(36,32,"games")),e(3),g(r.gameStats),e(2),h("label",s(41,34,"training-sessions")),e(3),g(r.trainingStats),e(4),n(s(48,36,"performance-over-time")),e(7),n(s(55,38,"date")),e(3),n(s(58,40,"event")),e(3),n(s(61,42,"event-type")),e(3),n(s(64,44,"actions")),e(3),n(s(67,46,"aces")),e(3),n(s(70,48,"errors")),e(3),n(s(73,50,"efficiency")),e(3),g(r.eventStats)}}function Ie(d,p){d&1&&(t(0,"div",8),k(),t(1,"svg",33),T(2,"path",34),i(),A(),t(3,"span"),a(4),l(5,"transloco"),i()()),d&2&&(e(4),n(s(5,1,"no-data-available")))}var Ne=(()=>{let p=class p{constructor(){this.playerService=S(te),this.eventsService=S(ie),this.actionsService=S(ae),this.route=S(W),this.router=S(G),this.user_player=q(ee.user_player),this.players=[],this.eventStats=[],this.overallStats={totalActions:0,serves:0,receives:0,attacks:0,blocks:0,defenses:0,sets:0,aces:0,errors:0,perfectActions:0,goodActions:0}}get gameStats(){return this.eventStats.filter(o=>o.event.event_type==="game")}get trainingStats(){return this.eventStats.filter(o=>o.event.event_type==="training")}ngOnInit(){return u(this,null,function*(){let o=this.user_player();o?(this.selectedPlayer=o,this.players=[o]):(this.players=yield this.playerService.getPlayers(),this.players.length>0&&(this.selectedPlayer=this.players[0])),this.selectedPlayer&&(yield this.loadPlayerStats())})}onPlayerChange(o){return u(this,null,function*(){this.selectedPlayer=o,yield this.loadPlayerStats()})}loadPlayerStats(){return u(this,null,function*(){if(!this.selectedPlayer)return;let o=yield this.eventsService.getEvents(),c=this.selectedPlayer.id,m=o.filter(v=>v.attendees.includes(c));this.eventStats=[],this.resetOverallStats();for(let v of m){let B=(yield this.actionsService.getActionsOfEvent(v.id)).filter(xe=>xe.player_id.id===c),M=this.calculateStats(B);this.eventStats.push({event:v,stats:M,actions:B}),this.addToOverallStats(M)}this.eventStats.sort((v,x)=>new Date(x.event.date).getTime()-new Date(v.event.date).getTime())})}calculateStats(o){let c={totalActions:o.length,serves:0,receives:0,attacks:0,blocks:0,defenses:0,sets:0,aces:0,errors:0,perfectActions:0,goodActions:0};for(let m of o){switch(m.kind){case"S":c.serves++;break;case"R":c.receives++;break;case"A":c.attacks++;break;case"B":c.blocks++;break;case"D":c.defenses++;break;case"E":c.sets++;break}switch(m.grade){case"#":c.aces++,c.perfectActions++;break;case"!":case"+":c.goodActions++;break;case"=":c.errors++;break}}return c}resetOverallStats(){this.overallStats={totalActions:0,serves:0,receives:0,attacks:0,blocks:0,defenses:0,sets:0,aces:0,errors:0,perfectActions:0,goodActions:0}}addToOverallStats(o){this.overallStats.totalActions+=o.totalActions,this.overallStats.serves+=o.serves,this.overallStats.receives+=o.receives,this.overallStats.attacks+=o.attacks,this.overallStats.blocks+=o.blocks,this.overallStats.defenses+=o.defenses,this.overallStats.sets+=o.sets,this.overallStats.aces+=o.aces,this.overallStats.errors+=o.errors,this.overallStats.perfectActions+=o.perfectActions,this.overallStats.goodActions+=o.goodActions}calculateEfficiency(o){if(o.totalActions===0)return 0;let c=o.perfectActions+o.goodActions;return Math.round(c/o.totalActions*100)}};p.\u0275fac=function(c){return new(c||p)},p.\u0275cmp=w({type:p,selectors:[["app-player-progress"]],decls:16,vars:9,consts:[[1,"flex","flex-col","p-4","md:p-6","max-w-7xl","mx-auto","w-full"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","mb-6","gap-4"],[1,"text-2xl","md:text-3xl","font-bold"],[1,"flex","items-center","gap-3"],[1,"mb-6"],[1,"w-full","md:w-1/2"],[3,"valueChange","value"],[3,"value"],[1,"alert","alert-info"],[1,"text-lg","font-semibold"],[1,"badge","badge-lg"],[1,"text-xl","font-semibold","mb-4"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],[1,"stat","bg-base-200","rounded-lg","p-4"],[1,"stat-title"],[1,"stat-value","text-primary"],[1,"stat-value","text-success"],[1,"stat-value","text-error"],[3,"label"],[1,"py-4","space-y-4"],[1,"p-4"],[1,"overflow-x-auto"],[1,"table","w-full"],[1,"hover"],[1,"flex","items-center","gap-2"],[1,"badge","text-xs"],[1,"grid","grid-cols-3","gap-2","mt-4"],[1,"text-center"],[1,"text-2xl","font-bold"],[1,"text-sm","text-gray-600"],[1,"text-2xl","font-bold","text-success"],[1,"text-2xl","font-bold","text-error"],[1,"badge"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","shrink-0","w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(c,m){c&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),a(3),l(4,"transloco"),i(),P(5,fe,5,2,"div",3),i(),t(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),a(9),l(10,"transloco"),i(),t(11,"mat-select",6),R("valueChange",function(x){return $(m.selectedPlayer,x)||(m.selectedPlayer=x),x}),F("valueChange",function(x){return m.onPlayerChange(x)}),f(12,ge,2,3,"mat-option",7,Se),i()()(),P(14,_e,77,52)(15,Ie,6,3,"div",8),i()),c&2&&(e(3),n(s(4,5,"player-progress")),e(2),b(m.selectedPlayer?5:-1),e(4),n(s(10,7,"select-player")),e(2),D("value",m.selectedPlayer),e(),g(m.players),e(2),b(m.selectedPlayer&&m.eventStats.length>0?14:m.selectedPlayer?15:-1))},dependencies:[L,H,Y,K,Q,X,U,N,J,le,re,ne,de,se,oe,ve,ce,me,pe,Z,V,j,z],styles:["[_nghost-%COMP%]{display:block}"]});let d=p;return d})();export{Ne as PlayerProgressPageComponent};
