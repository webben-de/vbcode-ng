import{T as m}from"./chunk-QYFRUT7D.js";import{I as o,M as c,N as u}from"./chunk-WGJEK5TU.js";import{ha as n,ma as i}from"./chunk-2HMN3K3N.js";import{i as t}from"./chunk-GK2WYAVW.js";var g=(()=>{let a=class a{constructor(){this.supabase=i(u).supabase,this.playerService=i(m),this.user_player=o(c.user_player)}getEventsOfPlayer(){return t(this,null,function*(){let e=this.user_player()?.id;return e||(e=(yield this.playerService.getMyPlayer()).id),(yield this.supabase.from("events").select("*").contains("attendees",[e])).data})}deleteEvent(e){return t(this,null,function*(){return(yield this.supabase.from("events").delete().eq("id",e)).data})}getEvent(e){return t(this,null,function*(){return(yield this.supabase.from("events").select("*").eq("id",e).limit(1).single()).data})}getEvents(){return t(this,null,function*(){return(yield this.supabase.from("events").select("*, home_team (*), away_team (*)")).data})}getTrainingSessions(){return t(this,null,function*(){return(yield this.supabase.from("events").select("*, home_team (*)").eq("event_type","training")).data})}getGames(){return t(this,null,function*(){return(yield this.supabase.from("events").select("*, home_team (*), away_team (*)").eq("event_type","game")).data})}getEventsByType(e){return t(this,null,function*(){return e==="training"?this.getTrainingSessions():this.getGames()})}createEvent(e){return t(this,null,function*(){e?.id===null&&(e.id=void 0);try{return e.id?yield this.supabase.from("events").upsert(e):yield this.supabase.from("events").insert(e)}catch(s){throw console.error(s),new Error(s)}})}getActionsCount(e){return t(this,null,function*(){return yield this.supabase.from("actions").select("id",{count:"exact"}).eq("game_id",e)})}};a.\u0275fac=function(s){return new(s||a)},a.\u0275prov=n({token:a,factory:a.\u0275fac,providedIn:"root"});let r=a;return r})();export{g as a};
