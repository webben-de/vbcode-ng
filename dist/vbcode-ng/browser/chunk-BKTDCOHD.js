import{a as u,c as m}from"./chunk-AC5BHCOO.js";import{a as d}from"./chunk-SM3423AC.js";import{B as l}from"./chunk-C73UPVXY.js";import{ga as c,h as o,ma as i}from"./chunk-VMVCLMWB.js";import{g as t}from"./chunk-GAL4ENT6.js";var s="actions",A=(()=>{class n{playerService=i(d);getActionsOfLastEventByUser(e){return t(this,null,function*(){let a;try{a=(yield this.playerService.getMyPlayer()).id}catch{a=e}try{return(yield this.supabase.from(s).select(this.allColsInclBreakdown).eq("player_id",a).eq("game_id",a)).data}catch(r){return console.error("Error fetching actions of last event by user: ",r),null}})}getActionsOfEventByPlayer(e,a){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown).eq("game_id",e).eq("player_id",a)).data})}getActionsOfEventByGradeAndPlayer(e,a,r){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown).eq("game_id",e).eq("grade",a).eq("player_id",r)).data})}getActionsOfEventByGrade(e,a){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown).eq("game_id",e).eq("grade",a)).data})}getActionsOfEventByKindAndGrade(e,a,r){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown).eq("game_id",e).eq("kind",a).eq("grade",r)).data})}allColsInclBreakdown="*, player_id (id, name, trikot) ";getActionsOfEventByKindAndPlayer(e,a,r){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown).eq("game_id",e).eq("kind",a).eq("player_id",r)).data})}getActionsOfEventByKind(e,a){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown).eq("game_id",e).eq("kind",a)).data})}supabase=i(l).supabase;getActionsOfEvent(e){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown).order("created_at").eq("game_id",e)).data})}getActionsOfEventOfSet(e,a){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown).eq("game_id",e).eq("game_set",a)).data})}getActions(){return t(this,null,function*(){return(yield this.supabase.from(s).select(this.allColsInclBreakdown)).data})}createAction(e){return t(this,null,function*(){return(yield this.supabase.from(s).upsert(e).select()).data})}getAcesOfEvent(e){return t(this,null,function*(){return(yield this.supabase.from(s).select("*").eq("game_id",e).eq("kind",m.Serve).eq("grade",u["#"])).data})}deleteAction(e){return t(this,null,function*(){return(yield this.supabase.from(s).delete().eq("id",e)).data})}actionChangesChannel=this.supabase.channel("actions-all-channel").on("postgres_changes",{event:"*",schema:"public",table:"actions"},e=>{this.actions$.next(e)}).subscribe();actions$=new o(null);static \u0275fac=function(a){return new(a||n)};static \u0275prov=c({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();export{A as a};
