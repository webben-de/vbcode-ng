import{c as Xe}from"./chunk-CNB5636F.js";import{a as je}from"./chunk-REFYV6AS.js";import{a as K,b as U,c as Ue,d as We,e as Ze,f as qe,g as ze}from"./chunk-AYC6SLWD.js";import{d as Ke}from"./chunk-PNGD5B3R.js";import"./chunk-7S7ENXZH.js";import{b as He}from"./chunk-E6QX2SBA.js";import{a as Se,b as Ce,c as ye,e as _e,f as Ee}from"./chunk-WIGL4SU5.js";import{d as Ne,h as $e,i as Ye}from"./chunk-OPJQ2HU6.js";import"./chunk-HOEGX7HV.js";import{a as Te}from"./chunk-T2ST5RQA.js";import{A as Fe,D as Re,E as Ge,I as Ve,J as Le,w as Oe}from"./chunk-PBBD6Q2O.js";import{b as Ie,g as we,k as B,p as Ae,v as Me}from"./chunk-NQBBWANC.js";import{b as xe,c as ge,e as he}from"./chunk-4ORLU33K.js";import{b as me,c as ve,e as be,f as ke}from"./chunk-E7WDJHTT.js";import{a as fe,b as ue}from"./chunk-XRBHPGUZ.js";import{a as De}from"./chunk-XGPREJ5I.js";import"./chunk-Q2CI2HOH.js";import{a as Be}from"./chunk-ZJ67X65J.js";import{U as Pe}from"./chunk-KB2SVANO.js";import{f as re,i as le,s as se,u as ce,v as de,z as pe}from"./chunk-ZURVRTZ6.js";import{Gc as ae,Ic as ne,Lc as oe,Mb as b,Nb as k,Oc as c,Pc as d,Qb as $,Qc as H,Rb as Y,Sb as S,Tb as o,Ub as n,Vb as I,ac as L,ec as R,gb as i,gc as g,ha as Q,ia as ee,ma as T,qc as N,sc as P,ta as O,ua as F,vc as r,wc as l,xb as te,xc as G,yb as ie,yc as w}from"./chunk-BYLMW57F.js";import"./chunk-SECEFDB3.js";import{a as X,b as J,i as j}from"./chunk-GK2WYAVW.js";var et=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/,tt=/^(\d?\d)[:.](\d?\d)(?:[:.](\d?\d))?\s*(AM|PM)?$/i;function W(p,u){let t=Array(p);for(let e=0;e<p;e++)t[e]=u(e);return t}var it=(()=>{class p extends U{useUtcForDisplay=!1;_matDateLocale=T(K,{optional:!0});constructor(){super();let t=T(K,{optional:!0});t!==void 0&&(this._matDateLocale=t),super.setLocale(this._matDateLocale)}getYear(t){return t.getFullYear()}getMonth(t){return t.getMonth()}getDate(t){return t.getDate()}getDayOfWeek(t){return t.getDay()}getMonthNames(t){let e=new Intl.DateTimeFormat(this.locale,{month:t,timeZone:"utc"});return W(12,a=>this._format(e,new Date(2017,a,1)))}getDateNames(){let t=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return W(31,e=>this._format(t,new Date(2017,0,e+1)))}getDayOfWeekNames(t){let e=new Intl.DateTimeFormat(this.locale,{weekday:t,timeZone:"utc"});return W(7,a=>this._format(e,new Date(2017,0,a+1)))}getYearName(t){let e=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(e,t)}getFirstDayOfWeek(){if(typeof Intl<"u"&&Intl.Locale){let t=new Intl.Locale(this.locale),e=(t.getWeekInfo?.()||t.weekInfo)?.firstDay??0;return e===7?0:e}return 0}getNumDaysInMonth(t){return this.getDate(this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+1,0))}clone(t){return new Date(t.getTime())}createDate(t,e,a){let s=this._createDateWithOverflow(t,e,a);return s.getMonth()!=e,s}today(){return new Date}parse(t,e){return typeof t=="number"?new Date(t):t?new Date(Date.parse(t)):null}format(t,e){if(!this.isValid(t))throw Error("NativeDateAdapter: Cannot format invalid date.");let a=new Intl.DateTimeFormat(this.locale,J(X({},e),{timeZone:"utc"}));return this._format(a,t)}addCalendarYears(t,e){return this.addCalendarMonths(t,e*12)}addCalendarMonths(t,e){let a=this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+e,this.getDate(t));return this.getMonth(a)!=((this.getMonth(t)+e)%12+12)%12&&(a=this._createDateWithOverflow(this.getYear(a),this.getMonth(a),0)),a}addCalendarDays(t,e){return this._createDateWithOverflow(this.getYear(t),this.getMonth(t),this.getDate(t)+e)}toIso8601(t){return[t.getUTCFullYear(),this._2digit(t.getUTCMonth()+1),this._2digit(t.getUTCDate())].join("-")}deserialize(t){if(typeof t=="string"){if(!t)return null;if(et.test(t)){let e=new Date(t);if(this.isValid(e))return e}}return super.deserialize(t)}isDateInstance(t){return t instanceof Date}isValid(t){return!isNaN(t.getTime())}invalid(){return new Date(NaN)}setTime(t,e,a,s){let m=this.clone(t);return m.setHours(e,a,s,0),m}getHours(t){return t.getHours()}getMinutes(t){return t.getMinutes()}getSeconds(t){return t.getSeconds()}parseTime(t,e){if(typeof t!="string")return t instanceof Date?new Date(t.getTime()):null;let a=t.trim();if(a.length===0)return null;let s=this._parseTimeString(a);if(s===null){let m=a.replace(/[^0-9:(AM|PM)]/gi,"").trim();m.length>0&&(s=this._parseTimeString(m))}return s||this.invalid()}addSeconds(t,e){return new Date(t.getTime()+e*1e3)}_createDateWithOverflow(t,e,a){let s=new Date;return s.setFullYear(t,e,a),s.setHours(0,0,0,0),s}_2digit(t){return("00"+t).slice(-2)}_format(t,e){let a=new Date;return a.setUTCFullYear(e.getFullYear(),e.getMonth(),e.getDate()),a.setUTCHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t.format(a)}_parseTimeString(t){let e=t.toUpperCase().match(tt);if(e){let a=parseInt(e[1]),s=parseInt(e[2]),m=e[3]==null?void 0:parseInt(e[3]),v=e[4];if(a===12?a=v==="AM"?0:a:v==="PM"&&(a+=12),Z(a,0,23)&&Z(s,0,59)&&(m==null||Z(m,0,59)))return this.setTime(this.today(),a,s,m||0)}return null}static \u0275fac=function(e){return new(e||p)};static \u0275prov=Q({token:p,factory:p.\u0275fac})}return p})();function Z(p,u,t){return!isNaN(p)&&p>=u&&p<=t}var at={parse:{dateInput:null,timeInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},timeInput:{hour:"numeric",minute:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"},timeOptionLabel:{hour:"numeric",minute:"numeric"}}};var Je=(()=>{class p{static \u0275fac=function(e){return new(e||p)};static \u0275mod=ie({type:p});static \u0275inj=ee({providers:[nt()]})}return p})();function nt(p=at){return[{provide:U,useClass:it},{provide:Ue,useValue:p}]}var ot=(p,u)=>[p,u],q=(p,u)=>u.event.id;function rt(p,u){if(p&1&&(o(0,"span",11),r(1),n()),p&2){let t=g();i(),l(t.player.roles.join(", "))}}function lt(p,u){if(p&1){let t=L();o(0,"mat-form-field",16)(1,"mat-label"),r(2),c(3,"transloco"),n(),o(4,"input",32),R("dateChange",function(){O(t);let a=g(2);return F(a.onCustomDateChange())}),n(),I(5,"mat-datepicker-toggle",33)(6,"mat-datepicker",null,0),n(),o(8,"mat-form-field",16)(9,"mat-label"),r(10),c(11,"transloco"),n(),o(12,"input",32),R("dateChange",function(){O(t);let a=g(2);return F(a.onCustomDateChange())}),n(),I(13,"mat-datepicker-toggle",33)(14,"mat-datepicker",null,1),n()}if(p&2){let t=N(7),e=N(15),a=g(2);i(2),l(d(3,8,"start-date")),i(2),S("matDatepicker",t)("formControl",a.startDateControl),i(),S("for",t),i(5),l(d(11,10,"end-date")),i(2),S("matDatepicker",e)("formControl",a.endDateControl),i(),S("for",e)}}function st(p,u){if(p&1){let t=L();o(0,"mat-form-field",16)(1,"mat-label"),r(2),c(3,"transloco"),n(),o(4,"input",32),R("dateChange",function(){O(t);let a=g(3);return F(a.onComparisonCustomDateChange())}),n(),I(5,"mat-datepicker-toggle",33)(6,"mat-datepicker",null,2),n(),o(8,"mat-form-field",16)(9,"mat-label"),r(10),c(11,"transloco"),n(),o(12,"input",32),R("dateChange",function(){O(t);let a=g(3);return F(a.onComparisonCustomDateChange())}),n(),I(13,"mat-datepicker-toggle",33)(14,"mat-datepicker",null,3),n()}if(p&2){let t=N(7),e=N(15),a=g(3);i(2),l(d(3,8,"comparison-start")),i(2),S("matDatepicker",t)("formControl",a.comparisonStartDateControl),i(),S("for",t),i(5),l(d(11,10,"comparison-end")),i(2),S("matDatepicker",e)("formControl",a.comparisonEndDateControl),i(),S("for",e)}}function ct(p,u){if(p&1&&(o(0,"div",39)(1,"div",40)(2,"div",41),r(3),c(4,"transloco"),n(),o(5,"div",42),r(6),n()(),o(7,"div",40)(8,"div",41),r(9),c(10,"transloco"),n(),o(11,"div",42),r(12),n()(),o(13,"div",40)(14,"div",41),r(15),c(16,"transloco"),n(),o(17,"div",42),r(18),n()(),o(19,"div",40)(20,"div",41),r(21),c(22,"transloco"),n(),o(23,"div",42),r(24),n()()()),p&2){let t=g(3);i(3),l(d(4,36,"efficiency-change")),i(2),P("text-green-600",t.comparisonStats.efficiencyChange>0)("text-red-600",t.comparisonStats.efficiencyChange<0)("text-gray-600",t.comparisonStats.efficiencyChange===0),i(),w(" ",t.comparisonStats.efficiencyChange>0?"+":"","",t.comparisonStats.efficiencyChange,"% "),i(3),l(d(10,38,"actions-change")),i(2),P("text-green-600",t.comparisonStats.actionsChange>0)("text-red-600",t.comparisonStats.actionsChange<0)("text-gray-600",t.comparisonStats.actionsChange===0),i(),w(" ",t.comparisonStats.actionsChange>0?"+":"","",t.comparisonStats.actionsChange," "),i(3),l(d(16,40,"aces-change")),i(2),P("text-green-600",t.comparisonStats.acesChange>0)("text-red-600",t.comparisonStats.acesChange<0)("text-gray-600",t.comparisonStats.acesChange===0),i(),w(" ",t.comparisonStats.acesChange>0?"+":"","",t.comparisonStats.acesChange," "),i(3),l(d(22,42,"errors-change")),i(2),P("text-red-600",t.comparisonStats.errorsChange>0)("text-green-600",t.comparisonStats.errorsChange<0)("text-gray-600",t.comparisonStats.errorsChange===0),i(),w(" ",t.comparisonStats.errorsChange>0?"+":"","",t.comparisonStats.errorsChange," ")}}function dt(p,u){if(p&1){let t=L();o(0,"div",30)(1,"h3",34),r(2),c(3,"transloco"),n(),o(4,"div",15)(5,"mat-form-field",16)(6,"mat-label"),r(7),c(8,"transloco"),n(),o(9,"mat-select",21),R("selectionChange",function(){O(t);let a=g(2);return F(a.onComparisonPresetChange())}),o(10,"mat-option",35),r(11),c(12,"transloco"),n(),o(13,"mat-option",36),r(14),c(15,"transloco"),n(),o(16,"mat-option",37),r(17),c(18,"transloco"),n(),o(19,"mat-option",38),r(20),c(21,"transloco"),n(),o(22,"mat-option",27),r(23),c(24,"transloco"),n()()(),b(25,st,16,12),n(),b(26,ct,25,44,"div",39),n()}if(p&2){let t=g(2);i(2),l(d(3,10,"comparison-settings")),i(5),l(d(8,12,"compare-with")),i(2),S("formControl",t.comparisonPeriodPreset),i(2),l(d(12,14,"previous-period")),i(3),l(d(15,16,"previous-month")),i(3),l(d(18,18,"previous-quarter")),i(3),l(d(21,20,"previous-year")),i(3),l(d(24,22,"custom-period")),i(2),k(t.comparisonPeriodPreset.value==="custom"?25:-1),i(),k(t.comparisonStats?26:-1)}}function pt(p,u){if(p&1&&(o(0,"span",43),r(1),c(2,"transloco"),c(3,"transloco"),n()),p&2){let t=g(3);i(),l(t.eventTypeFilter.value==="game"?d(2,1,"games"):d(3,3,"training-sessions"))}}function mt(p,u){if(p&1&&(o(0,"span",44),r(1),n()),p&2){let t=g(3);i(),l(t.getDateRangeLabel())}}function vt(p,u){p&1&&(o(0,"span",45),r(1),c(2,"transloco"),n()),p&2&&(i(),l(d(2,1,"comparison-mode")))}function ft(p,u){if(p&1&&(o(0,"div",31)(1,"span",11),r(2),c(3,"transloco"),n(),b(4,pt,4,5,"span",43),b(5,mt,2,1,"span",44),b(6,vt,3,3,"span",45),n()),p&2){let t=g(2);i(2),G("",d(3,4,"active-filters"),":"),i(2),k(t.eventTypeFilter.value!=="all"?4:-1),i(),k(t.dateRangePreset.value!=="all"?5:-1),i(),k(t.comparisonMode?6:-1)}}function ut(p,u){if(p&1){let t=L();o(0,"mat-card",12)(1,"mat-card-content")(2,"div",15)(3,"mat-form-field",16)(4,"mat-label"),r(5),c(6,"transloco"),n(),o(7,"mat-select",17)(8,"mat-option",18),r(9),c(10,"transloco"),n(),o(11,"mat-option",19),r(12),c(13,"transloco"),n(),o(14,"mat-option",20),r(15),c(16,"transloco"),n()()(),o(17,"mat-form-field",16)(18,"mat-label"),r(19),c(20,"transloco"),n(),o(21,"mat-select",21),R("selectionChange",function(){O(t);let a=g();return F(a.onDateRangePresetChange())}),o(22,"mat-option",18),r(23),c(24,"transloco"),n(),o(25,"mat-option",22),r(26),c(27,"transloco"),n(),o(28,"mat-option",23),r(29),c(30,"transloco"),n(),o(31,"mat-option",24),r(32),c(33,"transloco"),n(),o(34,"mat-option",25),r(35),c(36,"transloco"),n(),o(37,"mat-option",26),r(38),c(39,"transloco"),n(),o(40,"mat-option",27),r(41),c(42,"transloco"),n()()(),b(43,lt,16,12),o(44,"button",28),R("click",function(){O(t);let a=g();return F(a.toggleComparisonMode())}),o(45,"mat-icon"),r(46),n(),r(47),c(48,"transloco"),c(49,"transloco"),n(),o(50,"button",29),c(51,"transloco"),R("click",function(){O(t);let a=g();return F(a.resetFilters())}),o(52,"mat-icon"),r(53,"refresh"),n()()(),b(54,dt,27,24,"div",30),b(55,ft,7,6,"div",31),n()()}if(p&2){let t=g();i(5),l(d(6,22,"event-type")),i(2),S("formControl",t.eventTypeFilter),i(2),l(d(10,24,"all-events")),i(3),l(d(13,26,"games")),i(3),l(d(16,28,"training-sessions")),i(4),l(d(20,30,"time-period")),i(2),S("formControl",t.dateRangePreset),i(2),l(d(24,32,"all-time")),i(3),l(d(27,34,"last-7-days")),i(3),l(d(30,36,"last-30-days")),i(3),l(d(33,38,"last-90-days")),i(3),l(d(36,40,"last-6-months")),i(3),l(d(39,42,"last-year")),i(3),l(d(42,44,"custom-range")),i(2),k(t.dateRangePreset.value==="custom"?43:-1),i(),S("color",t.comparisonMode?"primary":""),i(2),l(t.comparisonMode?"compare":"compare_arrows"),i(),G(" ",t.comparisonMode?d(48,46,"comparison-active"):d(49,48,"enable-comparison")," "),i(3),S("matTooltip",ae(d(51,50,"reset-filters"))),i(4),k(t.comparisonMode?54:-1),i(),k(t.hasActiveFilters()?55:-1)}}function xt(p,u){p&1&&(o(0,"div",13),I(1,"div",46),n())}function gt(p,u){p&1&&(o(0,"div",14)(1,"mat-icon"),r(2,"info"),n(),o(3,"span"),r(4),c(5,"transloco"),n()()),p&2&&(i(4),l(d(5,1,"no-performance-data")))}function ht(p,u){if(p&1&&I(0,"div",61),p&2){let t=g(2);S("options",t.gradeChartOptions)}}function St(p,u){if(p&1&&I(0,"div",61),p&2){let t=g(2);S("options",t.actionGradeChartOptions)}}function Ct(p,u){if(p&1&&I(0,"div",59),p&2){let t=g(2);S("options",t.actionGradeHeatmapOptions)}}function yt(p,u){if(p&1&&I(0,"div",61),p&2){let t=g(3);S("options",t.actionEvolutionChartOptions)}}function _t(p,u){if(p&1&&I(0,"div",61),p&2){let t=g(3);S("options",t.actionGradeEvolutionChartOptions)}}function Et(p,u){if(p&1&&(o(0,"tr")(1,"td"),r(2),c(3,"date"),n(),o(4,"td")(5,"div",105)(6,"span"),r(7),n(),o(8,"span",106),r(9),c(10,"transloco"),c(11,"transloco"),n()()(),o(12,"td",107),r(13),n(),o(14,"td",99),r(15),n(),o(16,"td",100),r(17),n(),o(18,"td",101),r(19),n(),o(20,"td",102),r(21),n(),o(22,"td",103),r(23),n(),o(24,"td",104),r(25),n(),o(26,"td",98)(27,"span",108),r(28),n()()()),p&2){let t=g().$implicit,e=g(3);i(2),l(H(3,21,t.event.date,"short")),i(5),l(t.event.title),i(),P("badge-primary",t.event.event_type==="game")("badge-success",t.event.event_type==="training"),i(),G(" ",t.event.event_type==="training"?d(10,24,"training"):d(11,26,"game")," "),i(4),l(e.getActionTotal(t,e.selectedAction.value)),i(2),l(e.getActionGrade(t,e.selectedAction.value,"aces")),i(2),l(e.getActionGrade(t,e.selectedAction.value,"excellent")),i(2),l(e.getActionGrade(t,e.selectedAction.value,"good")),i(2),l(e.getActionGrade(t,e.selectedAction.value,"ok")),i(2),l(e.getActionGrade(t,e.selectedAction.value,"poor")),i(2),l(e.getActionGrade(t,e.selectedAction.value,"errors")),i(2),P("badge-success",e.getActionEfficiencyValue(t,e.selectedAction.value)>=70)("badge-warning",e.getActionEfficiencyValue(t,e.selectedAction.value)>=50&&e.getActionEfficiencyValue(t,e.selectedAction.value)<70)("badge-error",e.getActionEfficiencyValue(t,e.selectedAction.value)<50),i(),G(" ",e.getActionEfficiencyValue(t,e.selectedAction.value),"% ")}}function bt(p,u){if(p&1&&b(0,Et,29,28,"tr"),p&2){let t=u.$implicit,e=g(3);k(e.getActionTotal(t,e.selectedAction.value)>0?0:-1)}}function kt(p,u){if(p&1&&(o(0,"mat-card",12)(1,"mat-card-header")(2,"mat-card-title"),r(3),c(4,"transloco"),n()(),o(5,"mat-card-content")(6,"mat-form-field",88)(7,"mat-label"),r(8),c(9,"transloco"),n(),o(10,"mat-select",17)(11,"mat-option",89),r(12),c(13,"transloco"),n(),o(14,"mat-option",90),r(15),c(16,"transloco"),n(),o(17,"mat-option",91),r(18),c(19,"transloco"),n(),o(20,"mat-option",92),r(21),c(22,"transloco"),n(),o(23,"mat-option",93),r(24),c(25,"transloco"),n(),o(26,"mat-option",94),r(27),c(28,"transloco"),n()()(),o(29,"div",95)(30,"div")(31,"h3",58),r(32),c(33,"transloco"),n(),b(34,yt,1,1,"div",61),n(),o(35,"div")(36,"h3",58),r(37),c(38,"transloco"),n(),b(39,_t,1,1,"div",61),n()(),o(40,"div",96)(41,"table",97)(42,"thead")(43,"tr")(44,"th"),r(45),c(46,"transloco"),n(),o(47,"th"),r(48),c(49,"transloco"),n(),o(50,"th",98),r(51),c(52,"transloco"),n(),o(53,"th",99),r(54),c(55,"transloco"),n(),o(56,"th",100),r(57),c(58,"transloco"),n(),o(59,"th",101),r(60),c(61,"transloco"),n(),o(62,"th",102),r(63),c(64,"transloco"),n(),o(65,"th",103),r(66),c(67,"transloco"),n(),o(68,"th",104),r(69),c(70,"transloco"),n(),o(71,"th",98),r(72),c(73,"transloco"),n()()(),o(74,"tbody"),$(75,bt,1,1,null,null,q),n()()()()()),p&2){let t=g(2);i(3),l(d(4,23,"performance-evolution")),i(5),l(d(9,25,"select-action-type")),i(2),S("formControl",t.selectedAction),i(2),l(d(13,27,"serves")),i(3),l(d(16,29,"receives")),i(3),l(d(19,31,"attacks")),i(3),l(d(22,33,"blocks")),i(3),l(d(25,35,"defenses")),i(3),l(d(28,37,"sets")),i(5),l(d(33,39,"efficiency-over-time")),i(2),k(t.actionEvolutionChartOptions?34:-1),i(3),l(d(38,41,"grade-evolution")),i(2),k(t.actionGradeEvolutionChartOptions?39:-1),i(6),l(d(46,43,"date")),i(3),l(d(49,45,"event")),i(3),l(d(52,47,"total")),i(3),l(d(55,49,"aces")),i(3),l(d(58,51,"excellent")),i(3),l(d(61,53,"good")),i(3),l(d(64,55,"ok")),i(3),l(d(67,57,"poor")),i(3),l(d(70,59,"errors")),i(3),l(d(73,61,"efficiency")),i(3),Y(t.filteredPerformances)}}function Dt(p,u){if(p&1&&(o(0,"mat-option",111),r(1),c(2,"date"),o(3,"span",112),r(4),c(5,"transloco"),c(6,"transloco"),n()()),p&2){let t=u.$implicit;S("value",t),i(),w(" ",t.event.title," (",H(2,8,t.event.date,"short"),") "),i(2),P("badge-primary",t.event.event_type==="game")("badge-success",t.event.event_type==="training"),i(),G(" ",t.event.event_type==="training"?d(5,11,"training"):d(6,13,"game")," ")}}function It(p,u){if(p&1&&I(0,"div",59),p&2){let t=g(3);S("options",t.comparisonChartOptions)}}function wt(p,u){if(p&1&&(o(0,"mat-card",12)(1,"mat-card-header")(2,"mat-card-title"),r(3),c(4,"transloco"),n()(),o(5,"mat-card-content")(6,"mat-form-field",109)(7,"mat-label"),r(8),c(9,"transloco"),n(),o(10,"mat-select",110),$(11,Dt,7,15,"mat-option",111,q),n()(),b(13,It,1,1,"div",59),n()()),p&2){let t=g(2);i(3),l(d(4,4,"session-comparison")),i(5),l(d(9,6,"select-sessions-to-compare")),i(2),S("formControl",t.selectedSessionsControl),i(),Y(t.filteredPerformances),i(2),k(t.comparisonChartOptions?13:-1)}}function At(p,u){if(p&1&&(o(0,"div",87)(1,"div",113)(2,"div",16)(3,"div",114)(4,"h3",115),r(5),n(),o(6,"span",108),r(7),c(8,"transloco"),c(9,"transloco"),n()(),o(10,"p",11),r(11),c(12,"date"),n()(),o(13,"div",116)(14,"div")(15,"div",117),r(16),n(),o(17,"div",41),r(18),c(19,"transloco"),n()(),o(20,"div")(21,"div",118),r(22),n(),o(23,"div",41),r(24),c(25,"transloco"),n()(),o(26,"div")(27,"div",119),r(28),n(),o(29,"div",41),r(30),c(31,"transloco"),n()()()(),I(32,"div",120),o(33,"div",121)(34,"div",122)(35,"div",123),r(36),n(),o(37,"div",41),r(38),c(39,"transloco"),n()(),o(40,"div",124)(41,"div",125),r(42),n(),o(43,"div",41),r(44),c(45,"transloco"),n()(),o(46,"div",126)(47,"div",127),r(48),n(),o(49,"div",41),r(50),c(51,"transloco"),n()(),o(52,"div",128)(53,"div",129),r(54),n(),o(55,"div",41),r(56),c(57,"transloco"),n()(),o(58,"div",130)(59,"div",131),r(60),n(),o(61,"div",41),r(62),c(63,"transloco"),n()(),o(64,"div",132)(65,"div",133),r(66),n(),o(67,"div",41),r(68),c(69,"transloco"),n()()()()),p&2){let t=u.$implicit,e=g(2);i(5),l(t.event.title),i(),P("badge-primary",t.event.event_type==="game")("badge-success",t.event.event_type==="training"),i(),G(" ",t.event.event_type==="training"?d(8,32,"training"):d(9,34,"game")," "),i(4),l(H(12,36,t.event.date,"full")),i(5),l(t.totalActions),i(2),l(d(19,39,"actions")),i(4),l(t.gradeStats.aces),i(2),l(d(25,41,"aces")),i(3),P("text-success",t.efficiency>=70)("text-warning",t.efficiency>=50&&t.efficiency<70)("text-error",t.efficiency<50),i(),G(" ",t.efficiency,"% "),i(2),l(d(31,43,"efficiency")),i(2),S("options",e.getEventSpiderChartOptions(t)),i(4),l(t.actionStats.serves),i(2),l(d(39,45,"serves")),i(4),l(t.actionStats.receives),i(2),l(d(45,47,"receives")),i(4),l(t.actionStats.attacks),i(2),l(d(51,49,"attacks")),i(4),l(t.actionStats.blocks),i(2),l(d(57,51,"blocks")),i(4),l(t.actionStats.defenses),i(2),l(d(63,53,"defenses")),i(4),l(t.actionStats.sets),i(2),l(d(69,55,"sets"))}}function Mt(p,u){if(p&1&&(o(0,"mat-card",12)(1,"mat-card-header")(2,"mat-card-title"),r(3),c(4,"transloco"),n()(),o(5,"mat-card-content")(6,"div",47)(7,"div",48)(8,"div",49),r(9),c(10,"transloco"),n(),o(11,"div",50),r(12),n()(),o(13,"div",48)(14,"div",49),r(15),c(16,"transloco"),n(),o(17,"div",51),r(18),n()(),o(19,"div",48)(20,"div",49),r(21),c(22,"transloco"),n(),o(23,"div",52),r(24),n()(),o(25,"div",48)(26,"div",49),r(27),c(28,"transloco"),c(29,"transloco"),n(),o(30,"div",53)(31,"span",54),r(32),n(),o(33,"span",55),r(34,"/"),n(),o(35,"span",56),r(36),n()()()(),o(37,"div",57)(38,"h3",58),r(39),c(40,"transloco"),n(),I(41,"div",59),n()()(),o(42,"div",60)(43,"mat-card")(44,"mat-card-header")(45,"mat-card-title"),r(46),c(47,"transloco"),n()(),o(48,"mat-card-content"),b(49,ht,1,1,"div",61),n()(),o(50,"mat-card")(51,"mat-card-header")(52,"mat-card-title"),r(53),c(54,"transloco"),n()(),o(55,"mat-card-content"),b(56,St,1,1,"div",61),n()()(),o(57,"mat-card",12)(58,"mat-card-header")(59,"mat-card-title"),r(60),c(61,"transloco"),n()(),o(62,"mat-card-content"),b(63,Ct,1,1,"div",59),n()(),o(64,"mat-card",12)(65,"mat-card-header")(66,"mat-card-title"),r(67),c(68,"transloco"),n()(),o(69,"mat-card-content")(70,"div",62)(71,"div",63)(72,"div",64),r(73),c(74,"transloco"),n(),o(75,"div",65),r(76),n(),o(77,"div",66)(78,"span",54),r(79),c(80,"transloco"),n(),r(81," / "),o(82,"span",56),r(83),c(84,"transloco"),n()()(),o(85,"div",67)(86,"div",68),r(87),c(88,"transloco"),n(),o(89,"div",69),r(90),n(),o(91,"div",70),r(92),c(93,"transloco"),n()(),o(94,"div",71)(95,"div",72),r(96),c(97,"transloco"),n(),o(98,"div",73),r(99),n(),o(100,"div",66)(101,"span",54),r(102),c(103,"transloco"),n(),r(104," / "),o(105,"span",56),r(106),c(107,"transloco"),n()()(),o(108,"div",74)(109,"div",75),r(110),c(111,"transloco"),n(),o(112,"div",76),r(113),n(),o(114,"div",77),r(115),c(116,"transloco"),n()(),o(117,"div",78)(118,"div",79),r(119),c(120,"transloco"),n(),o(121,"div",80),r(122),n()(),o(123,"div",81)(124,"div",82),r(125),c(126,"transloco"),n(),o(127,"div",83),r(128),n()()()()(),o(129,"div",84)(130,"mat-form-field",85)(131,"mat-label"),r(132),c(133,"transloco"),n(),o(134,"mat-select",17)(135,"mat-option",18),r(136),c(137,"transloco"),n(),o(138,"mat-option",19),r(139),c(140,"transloco"),n(),o(141,"mat-option",20),r(142),c(143,"transloco"),n()()()(),b(144,kt,77,63,"mat-card",12),b(145,wt,14,8,"mat-card",12),o(146,"mat-card")(147,"mat-card-header")(148,"mat-card-title"),r(149),c(150,"transloco"),n()(),o(151,"mat-card-content")(152,"div",86),$(153,At,70,57,"div",87,q),n()()()),p&2){let t=g();i(3),l(d(4,52,"overall-statistics")),i(6),l(d(10,54,"total-events")),i(3),l(t.performances.length),i(3),l(d(16,56,"total-actions")),i(3),l(t.overallStats.totalActions),i(3),l(d(22,58,"avg-efficiency")),i(3),G("",t.overallStats.avgEfficiency,"%"),i(3),w("",d(28,60,"aces")," / ",d(29,62,"errors")),i(5),l(t.overallStats.totalAces),i(4),l(t.overallStats.totalErrors),i(3),l(d(40,64,"performance-distribution")),i(2),S("options",t.overallSpiderChartOptions),i(5),l(d(47,66,"grade-distribution")),i(3),k(t.gradeChartOptions?49:-1),i(4),l(d(54,68,"action-efficiency")),i(3),k(t.actionGradeChartOptions?56:-1),i(4),l(d(61,70,"action-grade-breakdown")),i(3),k(t.actionGradeHeatmapOptions?63:-1),i(4),l(d(68,72,"action-breakdown")),i(6),l(d(74,74,"serves")),i(3),l(t.overallStats.totalServes),i(3),w("",t.overallStats.serveAces," ",d(80,76,"aces")),i(4),w("",t.overallStats.serveErrors," ",d(84,78,"errors")),i(4),l(d(88,80,"receives")),i(3),l(t.overallStats.totalReceives),i(2),w("",t.overallStats.receiveErrors," ",d(93,82,"errors")),i(4),l(d(97,84,"attacks")),i(3),l(t.overallStats.totalAttacks),i(3),w("",t.overallStats.attackKills," ",d(103,86,"kills")),i(4),w("",t.overallStats.attackErrors," ",d(107,88,"errors")),i(4),l(d(111,90,"blocks")),i(3),l(t.overallStats.totalBlocks),i(2),w("",t.overallStats.blockKills," ",d(116,92,"kills")),i(4),l(d(120,94,"defenses")),i(3),l(t.overallStats.totalDefenses),i(3),l(d(126,96,"sets")),i(3),l(t.overallStats.totalSets),i(4),l(d(133,98,"filter-by-type")),i(2),S("formControl",t.eventTypeFilter),i(2),l(d(137,100,"all-events")),i(3),l(d(140,102,"games")),i(3),l(d(143,104,"training-sessions")),i(2),k(t.filteredPerformances.length>1?144:-1),i(),k(t.filteredPerformances.length>1?145:-1),i(4),l(d(150,106,"event-by-event-performance")),i(4),Y(t.filteredPerformances)}}var gi=(()=>{let u=class u{constructor(){this.route=T(se),this.router=T(ce),this.playerService=T(Pe),this.eventsService=T(Be),this.actionsService=T(Te),this.ROUTES=De,this.performances=[],this.isLoading=!0,this.eventTypeFilter=new B("all"),this.selectedSessionsControl=new B([]),this.dateRangePreset=new B("all"),this.startDateControl=new B(null),this.endDateControl=new B(null),this.comparisonMode=!1,this.comparisonPeriodPreset=new B("previous-period"),this.comparisonStartDateControl=new B(null),this.comparisonEndDateControl=new B(null),this.comparisonStats=null,this.overallSpiderChartOptions=null,this.comparisonChartOptions=null,this.overallStats={totalActions:0,totalAces:0,totalErrors:0,avgEfficiency:0,totalServes:0,totalReceives:0,totalAttacks:0,totalBlocks:0,totalDefenses:0,totalSets:0,serveAces:0,serveErrors:0,receiveErrors:0,attackKills:0,attackErrors:0,blockKills:0},this.gradeChartOptions=null,this.actionGradeChartOptions=null,this.actionGradeHeatmapOptions=null,this.selectedAction=new B("serve"),this.actionEvolutionChartOptions=null,this.actionGradeEvolutionChartOptions=null,this.selectedTabIndex=0}get filteredPerformances(){let e=this.eventTypeFilter.value,a=e==="all"?this.performances:this.performances.filter(m=>m.event.event_type===e),s=this.getActiveDateRange();return s&&(a=a.filter(m=>{let v=new Date(m.event.date);return v>=s.start&&v<=s.end})),a}get comparisonPerformances(){if(!this.comparisonMode)return[];let e=this.eventTypeFilter.value,a=e==="all"?this.performances:this.performances.filter(m=>m.event.event_type===e),s=this.getComparisonDateRange();return s&&(a=a.filter(m=>{let v=new Date(m.event.date);return v>=s.start&&v<=s.end})),a}ngOnInit(){return j(this,null,function*(){let e=this.route.snapshot.params.id;if(!e){this.router.navigate([this.ROUTES.root,this.ROUTES.teams]);return}yield this.loadPlayerData(e),this.eventTypeFilter.valueChanges.subscribe(()=>{this.selectedSessionsControl.setValue([])}),this.selectedSessionsControl.valueChanges.subscribe(a=>{a&&a.length>0?this.updateComparisonChart(a):this.comparisonChartOptions=null}),this.selectedAction.valueChanges.subscribe(()=>{this.generateActionEvolutionCharts()}),this.eventTypeFilter.valueChanges.subscribe(()=>this.recalculateStats()),this.dateRangePreset.valueChanges.subscribe(()=>this.recalculateStats())})}getActiveDateRange(){let e=this.dateRangePreset.value,a=new Date;if(e==="all")return null;if(e==="custom"){let m=this.startDateControl.value,v=this.endDateControl.value;return m&&v?{start:m,end:v}:null}let s=new Date;switch(e){case"last-7":s.setDate(a.getDate()-7);break;case"last-30":s.setDate(a.getDate()-30);break;case"last-90":s.setDate(a.getDate()-90);break;case"last-6-months":s.setMonth(a.getMonth()-6);break;case"last-year":s.setFullYear(a.getFullYear()-1);break;default:return null}return{start:s,end:a}}getComparisonDateRange(){if(!this.comparisonMode)return null;let e=this.comparisonPeriodPreset.value;if(e==="custom"){let h=this.comparisonStartDateControl.value,_=this.comparisonEndDateControl.value;return h&&_?{start:h,end:_}:null}let a=this.getActiveDateRange();if(!a)return null;let s=a.end.getTime()-a.start.getTime(),m,v;switch(e){case"previous-period":v=new Date(a.start),m=new Date(v.getTime()-s);break;case"previous-month":v=new Date,v.setMonth(v.getMonth()-1),m=new Date(v),m.setMonth(m.getMonth()-1);break;case"previous-quarter":v=new Date,v.setMonth(v.getMonth()-3),m=new Date(v),m.setMonth(m.getMonth()-3);break;case"previous-year":v=new Date,v.setFullYear(v.getFullYear()-1),m=new Date(v),m.setFullYear(m.getFullYear()-1);break;default:return null}return{start:m,end:v}}onDateRangePresetChange(){this.dateRangePreset.value!=="custom"&&(this.startDateControl.setValue(null),this.endDateControl.setValue(null)),this.recalculateStats()}onCustomDateChange(){this.recalculateStats()}onComparisonPresetChange(){this.comparisonPeriodPreset.value!=="custom"&&(this.comparisonStartDateControl.setValue(null),this.comparisonEndDateControl.setValue(null)),this.calculateComparisonStats()}onComparisonCustomDateChange(){this.calculateComparisonStats()}toggleComparisonMode(){this.comparisonMode=!this.comparisonMode,this.comparisonMode?this.calculateComparisonStats():this.comparisonStats=null}resetFilters(){this.eventTypeFilter.setValue("all"),this.dateRangePreset.setValue("all"),this.startDateControl.setValue(null),this.endDateControl.setValue(null),this.comparisonMode=!1,this.comparisonPeriodPreset.setValue("previous-period"),this.comparisonStartDateControl.setValue(null),this.comparisonEndDateControl.setValue(null),this.comparisonStats=null,this.recalculateStats()}hasActiveFilters(){return this.eventTypeFilter.value!=="all"||this.dateRangePreset.value!=="all"||this.comparisonMode}getDateRangeLabel(){let e=this.dateRangePreset.value;if(e==="custom"){let a=this.startDateControl.value,s=this.endDateControl.value;return a&&s?`${a.toLocaleDateString()} - ${s.toLocaleDateString()}`:"Custom Range"}return e||"All Time"}recalculateStats(){this.filteredPerformances.length>0&&(this.calculateOverallStats(),this.generateOverallSpiderChart(),this.generateActionEvolutionCharts()),this.comparisonMode&&this.calculateComparisonStats()}calculateComparisonStats(){if(!this.comparisonMode){this.comparisonStats=null;return}let e=this.filteredPerformances,a=this.comparisonPerformances;if(e.length===0||a.length===0){this.comparisonStats=null;return}let s=0,m=0,v=0,h=0;for(let E of e)s+=E.totalActions,m+=E.gradeStats.aces,v+=E.gradeStats.errors,h+=E.efficiency;let _=e.length>0?h/e.length:0,M=0,y=0,f=0,A=0;for(let E of a)M+=E.totalActions,y+=E.gradeStats.aces,f+=E.gradeStats.errors,A+=E.efficiency;let x=a.length>0?A/a.length:0;this.comparisonStats={efficiencyChange:Math.round(_-x),actionsChange:s-M,acesChange:m-y,errorsChange:v-f}}loadPlayerData(e){return j(this,null,function*(){try{this.isLoading=!0,this.player=yield this.playerService.getPlayer(e);let s=(yield this.eventsService.getEvents()).filter(m=>m.attendees.includes(e));this.performances=[];for(let m of s){let h=(yield this.actionsService.getActionsOfEvent(m.id)).filter(_=>_.player_id.id===e);if(h.length>0){let _=this.calculateEventPerformance(m,h);this.performances.push(_)}}this.performances.sort((m,v)=>new Date(v.event.date).getTime()-new Date(m.event.date).getTime()),this.calculateOverallStats(),this.generateOverallSpiderChart(),this.generateActionEvolutionCharts()}catch(a){console.error("Error loading player data:",a)}finally{this.isLoading=!1}})}calculateEventPerformance(e,a){let s={serves:a.filter(C=>C.kind==="S").length,receives:a.filter(C=>C.kind==="R").length,attacks:a.filter(C=>C.kind==="A").length,blocks:a.filter(C=>C.kind==="B").length,defenses:a.filter(C=>C.kind==="D").length,sets:a.filter(C=>C.kind==="E").length},m={aces:a.filter(C=>C.grade==="#").length,excellent:a.filter(C=>C.grade==="!").length,good:a.filter(C=>C.grade==="+").length,ok:a.filter(C=>C.grade==="/").length,poor:a.filter(C=>C.grade==="-").length,errors:a.filter(C=>C.grade==="=").length},v={serve:this.calculateGradeBreakdownForAction(a,"S"),receive:this.calculateGradeBreakdownForAction(a,"R"),attack:this.calculateGradeBreakdownForAction(a,"A"),block:this.calculateGradeBreakdownForAction(a,"B"),defense:this.calculateGradeBreakdownForAction(a,"D"),set:this.calculateGradeBreakdownForAction(a,"E")},h=a.length,_=m.aces+m.excellent+m.good,M=h>0?Math.round(_/h*100):0,y=this.calculateActionEfficiency(a,"S"),f=this.calculateActionEfficiency(a,"R"),A=this.calculateActionEfficiency(a,"A"),x=this.calculateActionEfficiency(a,"B"),E=this.calculateActionEfficiency(a,"D"),V=this.calculateActionEfficiency(a,"E");return{event:e,actions:a,actionStats:s,gradeStats:m,actionGradeBreakdown:v,totalActions:h,efficiency:M,serveEfficiency:y,receiveEfficiency:f,attackEfficiency:A,blockEfficiency:x,defenseEfficiency:E,setEfficiency:V}}calculateGradeBreakdownForAction(e,a){let s=e.filter(m=>m.kind===a);return{aces:s.filter(m=>m.grade==="#").length,excellent:s.filter(m=>m.grade==="!").length,good:s.filter(m=>m.grade==="+").length,ok:s.filter(m=>m.grade==="/").length,poor:s.filter(m=>m.grade==="-").length,errors:s.filter(m=>m.grade==="=").length}}calculateActionEfficiency(e,a){let s=e.filter(v=>v.kind===a);if(s.length===0)return 0;let m=s.filter(v=>v.grade==="#"||v.grade==="!"||v.grade==="+").length;return Math.round(m/s.length*100)}calculateOverallStats(){let e=0,a=0,s=0,m=0,v=0,h=0,_=0,M=0,y=0,f=0,A=0,x=0,E=0,V=0,C=0,z=0;for(let D of this.performances)e+=D.totalActions,a+=D.gradeStats.aces,s+=D.gradeStats.errors,m+=D.efficiency,v+=D.actionStats.serves,h+=D.actionStats.receives,_+=D.actionStats.attacks,M+=D.actionStats.blocks,y+=D.actionStats.defenses,f+=D.actionStats.sets,A+=D.actionGradeBreakdown.serve.aces,x+=D.actionGradeBreakdown.serve.errors,E+=D.actionGradeBreakdown.receive.errors,V+=D.actionGradeBreakdown.attack.aces,C+=D.actionGradeBreakdown.attack.errors,z+=D.actionGradeBreakdown.block.aces;this.overallStats={totalActions:e,totalAces:a,totalErrors:s,avgEfficiency:this.performances.length>0?Math.round(m/this.performances.length):0,totalServes:v,totalReceives:h,totalAttacks:_,totalBlocks:M,totalDefenses:y,totalSets:f,serveAces:A,serveErrors:x,receiveErrors:E,attackKills:V,attackErrors:C,blockKills:z},this.generateGradeChart(),this.generateActionGradeChart(),this.generateActionGradeHeatmap()}generateGradeChart(){let e=0,a=0,s=0,m=0,v=0,h=0;for(let _ of this.performances)e+=_.gradeStats.aces,a+=_.gradeStats.excellent,s+=_.gradeStats.good,m+=_.gradeStats.ok,v+=_.gradeStats.poor,h+=_.gradeStats.errors;this.gradeChartOptions={title:{text:"Overall Grade Distribution",left:"center"},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",radius:"60%",data:[{value:e,name:"Aces",itemStyle:{color:"#10b981"}},{value:a,name:"Excellent",itemStyle:{color:"#3b82f6"}},{value:s,name:"Good",itemStyle:{color:"#8b5cf6"}},{value:m,name:"OK",itemStyle:{color:"#f59e0b"}},{value:v,name:"Poor",itemStyle:{color:"#ef4444"}},{value:h,name:"Errors",itemStyle:{color:"#dc2626"}}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}generateActionGradeChart(){let e=this.overallStats.totalServes>0?(this.overallStats.serveAces/this.overallStats.totalServes*100).toFixed(1):"0",a=this.overallStats.totalReceives>0?((this.overallStats.totalReceives-this.overallStats.receiveErrors)/this.overallStats.totalReceives*100).toFixed(1):"0",s=this.overallStats.totalAttacks>0?(this.overallStats.attackKills/this.overallStats.totalAttacks*100).toFixed(1):"0",m=this.overallStats.totalBlocks>0?(this.overallStats.blockKills/this.overallStats.totalBlocks*100).toFixed(1):"0";this.actionGradeChartOptions={title:{text:"Action Efficiency",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:["Serve","Receive","Attack","Block"]},yAxis:{type:"value",max:100,axisLabel:{formatter:"{value}%"}},series:[{name:"Efficiency",type:"bar",data:[{value:parseFloat(e),itemStyle:{color:"#3b82f6"}},{value:parseFloat(a),itemStyle:{color:"#10b981"}},{value:parseFloat(s),itemStyle:{color:"#f59e0b"}},{value:parseFloat(m),itemStyle:{color:"#8b5cf6"}}],label:{show:!0,position:"top",formatter:"{c}%"}}]}}generateActionGradeHeatmap(){let e={serve:{aces:0,excellent:0,good:0,ok:0,poor:0,errors:0},receive:{aces:0,excellent:0,good:0,ok:0,poor:0,errors:0},attack:{aces:0,excellent:0,good:0,ok:0,poor:0,errors:0},block:{aces:0,excellent:0,good:0,ok:0,poor:0,errors:0},defense:{aces:0,excellent:0,good:0,ok:0,poor:0,errors:0},set:{aces:0,excellent:0,good:0,ok:0,poor:0,errors:0}};for(let y of this.performances){let f=y.actionGradeBreakdown;e.serve.aces+=f.serve.aces,e.serve.excellent+=f.serve.excellent,e.serve.good+=f.serve.good,e.serve.ok+=f.serve.ok,e.serve.poor+=f.serve.poor,e.serve.errors+=f.serve.errors,e.receive.aces+=f.receive.aces,e.receive.excellent+=f.receive.excellent,e.receive.good+=f.receive.good,e.receive.ok+=f.receive.ok,e.receive.poor+=f.receive.poor,e.receive.errors+=f.receive.errors,e.attack.aces+=f.attack.aces,e.attack.excellent+=f.attack.excellent,e.attack.good+=f.attack.good,e.attack.ok+=f.attack.ok,e.attack.poor+=f.attack.poor,e.attack.errors+=f.attack.errors,e.block.aces+=f.block.aces,e.block.excellent+=f.block.excellent,e.block.good+=f.block.good,e.block.ok+=f.block.ok,e.block.poor+=f.block.poor,e.block.errors+=f.block.errors,e.defense.aces+=f.defense.aces,e.defense.excellent+=f.defense.excellent,e.defense.good+=f.defense.good,e.defense.ok+=f.defense.ok,e.defense.poor+=f.defense.poor,e.defense.errors+=f.defense.errors,e.set.aces+=f.set.aces,e.set.excellent+=f.set.excellent,e.set.good+=f.set.good,e.set.ok+=f.set.ok,e.set.poor+=f.set.poor,e.set.errors+=f.set.errors}let a=["Serve","Receive","Attack","Block","Defense","Set"],s=[e.serve.aces,e.receive.aces,e.attack.aces,e.block.aces,e.defense.aces,e.set.aces],m=[e.serve.excellent,e.receive.excellent,e.attack.excellent,e.block.excellent,e.defense.excellent,e.set.excellent],v=[e.serve.good,e.receive.good,e.attack.good,e.block.good,e.defense.good,e.set.good],h=[e.serve.ok,e.receive.ok,e.attack.ok,e.block.ok,e.defense.ok,e.set.ok],_=[e.serve.poor,e.receive.poor,e.attack.poor,e.block.poor,e.defense.poor,e.set.poor],M=[e.serve.errors,e.receive.errors,e.attack.errors,e.block.errors,e.defense.errors,e.set.errors];this.actionGradeHeatmapOptions={title:{text:""},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:y=>{let f=y,A=`<strong>${f[0].axisValue||""}</strong><br/>`,x=0;return f.forEach(E=>{x+=E.value,A+=`${E.marker} ${E.seriesName}: ${E.value}<br/>`}),A+=`<strong>Total: ${x}</strong>`,A}},legend:{data:["Aces","Excellent","Good","OK","Poor","Errors"],bottom:0},grid:{left:"3%",right:"4%",bottom:"12%",containLabel:!0},xAxis:{type:"category",data:a},yAxis:{type:"value"},series:[{name:"Aces",type:"bar",stack:"total",emphasis:{focus:"series"},data:s,itemStyle:{color:"#10b981"},label:{show:!0,position:"inside",formatter:y=>{let f=y;return f.value>0?f.value.toString():""}}},{name:"Excellent",type:"bar",stack:"total",emphasis:{focus:"series"},data:m,itemStyle:{color:"#3b82f6"},label:{show:!0,position:"inside",formatter:y=>{let f=y;return f.value>0?f.value.toString():""}}},{name:"Good",type:"bar",stack:"total",emphasis:{focus:"series"},data:v,itemStyle:{color:"#8b5cf6"},label:{show:!0,position:"inside",formatter:y=>{let f=y;return f.value>0?f.value.toString():""}}},{name:"OK",type:"bar",stack:"total",emphasis:{focus:"series"},data:h,itemStyle:{color:"#f59e0b"},label:{show:!0,position:"inside",formatter:y=>{let f=y;return f.value>0?f.value.toString():""}}},{name:"Poor",type:"bar",stack:"total",emphasis:{focus:"series"},data:_,itemStyle:{color:"#ef4444"},label:{show:!0,position:"inside",formatter:y=>{let f=y;return f.value>0?f.value.toString():""}}},{name:"Errors",type:"bar",stack:"total",emphasis:{focus:"series"},data:M,itemStyle:{color:"#dc2626"},label:{show:!0,position:"inside",formatter:y=>{let f=y;return f.value>0?f.value.toString():""}}}]}}generateOverallSpiderChart(){let e={serves:0,receives:0,attacks:0,blocks:0,defenses:0,sets:0};for(let s of this.performances)e.serves+=s.actionStats.serves,e.receives+=s.actionStats.receives,e.attacks+=s.actionStats.attacks,e.blocks+=s.actionStats.blocks,e.defenses+=s.actionStats.defenses,e.sets+=s.actionStats.sets;let a=Math.max(e.serves,e.receives,e.attacks,e.blocks,e.defenses,e.sets);this.overallSpiderChartOptions={title:{text:""},tooltip:{trigger:"item"},radar:{indicator:[{name:"Serves",max:a},{name:"Receives",max:a},{name:"Attacks",max:a},{name:"Blocks",max:a},{name:"Defenses",max:a},{name:"Sets",max:a}],radius:"70%"},series:[{type:"radar",data:[{value:[e.serves,e.receives,e.attacks,e.blocks,e.defenses,e.sets],name:"Overall Performance",areaStyle:{color:"rgba(59, 130, 246, 0.3)"},lineStyle:{color:"rgba(59, 130, 246, 1)",width:2},itemStyle:{color:"rgba(59, 130, 246, 1)"}}]}]}}getEventSpiderChartOptions(e){let a=e.actionStats,s=Math.max(a.serves,a.receives,a.attacks,a.blocks,a.defenses,a.sets,10);return{tooltip:{trigger:"item"},radar:{indicator:[{name:"Serves",max:s},{name:"Receives",max:s},{name:"Attacks",max:s},{name:"Blocks",max:s},{name:"Defenses",max:s},{name:"Sets",max:s}],radius:"65%"},series:[{type:"radar",data:[{value:[a.serves,a.receives,a.attacks,a.blocks,a.defenses,a.sets],name:e.event.title,areaStyle:{color:e.event.event_type==="game"?"rgba(99, 102, 241, 0.3)":"rgba(34, 197, 94, 0.3)"},lineStyle:{color:e.event.event_type==="game"?"rgba(99, 102, 241, 1)":"rgba(34, 197, 94, 1)",width:2},itemStyle:{color:e.event.event_type==="game"?"rgba(99, 102, 241, 1)":"rgba(34, 197, 94, 1)"}}]}]}}updateComparisonChart(e){if(e.length===0){this.comparisonChartOptions=null;return}let a=0;for(let v of e){let h=Math.max(v.actionStats.serves,v.actionStats.receives,v.actionStats.attacks,v.actionStats.blocks,v.actionStats.defenses,v.actionStats.sets);h>a&&(a=h)}let s=["rgba(59, 130, 246, 0.3)","rgba(34, 197, 94, 0.3)","rgba(168, 85, 247, 0.3)","rgba(251, 146, 60, 0.3)","rgba(236, 72, 153, 0.3)"],m=["rgba(59, 130, 246, 1)","rgba(34, 197, 94, 1)","rgba(168, 85, 247, 1)","rgba(251, 146, 60, 1)","rgba(236, 72, 153, 1)"];this.comparisonChartOptions={title:{text:"Session Comparison"},tooltip:{trigger:"item"},legend:{data:e.map(v=>v.event.title),bottom:0},radar:{indicator:[{name:"Serves",max:a},{name:"Receives",max:a},{name:"Attacks",max:a},{name:"Blocks",max:a},{name:"Defenses",max:a},{name:"Sets",max:a}],radius:"60%"},series:[{type:"radar",data:e.map((v,h)=>({value:[v.actionStats.serves,v.actionStats.receives,v.actionStats.attacks,v.actionStats.blocks,v.actionStats.defenses,v.actionStats.sets],name:v.event.title,areaStyle:{color:s[h%s.length]},lineStyle:{color:m[h%m.length],width:2},itemStyle:{color:m[h%m.length]}}))}]}}getActionTotal(e,a){let m={serve:"serves",receive:"receives",attack:"attacks",block:"blocks",defense:"defenses",set:"sets"}[a];return m?e.actionStats[m]:0}getActionGrade(e,a,s){let v={serve:"serve",receive:"receive",attack:"attack",block:"block",defense:"defense",set:"set"}[a];return v?e.actionGradeBreakdown[v][s]:0}getActionEfficiencyValue(e,a){let m={serve:"serveEfficiency",receive:"receiveEfficiency",attack:"attackEfficiency",block:"blockEfficiency",defense:"defenseEfficiency",set:"setEfficiency"}[a];return m?e[m]:0}onTabChange(e){this.selectedTabIndex=e}generateActionEvolutionCharts(){let e=this.selectedAction.value;if(!e)return;let s=[...this.filteredPerformances].sort((x,E)=>new Date(x.event.date).getTime()-new Date(E.event.date).getTime()).filter(x=>this.getActionTotal(x,e)>0);if(s.length===0){this.actionEvolutionChartOptions=null,this.actionGradeEvolutionChartOptions=null;return}let m=s.map(x=>new Date(x.event.date).toLocaleDateString()),v=s.map(x=>this.getActionEfficiencyValue(x,e));this.actionEvolutionChartOptions={title:{text:""},tooltip:{trigger:"axis",formatter:x=>{let V=x[0];return`${V.name}<br/>${V.seriesName}: ${V.value}%`}},xAxis:{type:"category",data:m,axisLabel:{rotate:45,interval:0}},yAxis:{type:"value",min:0,max:100,axisLabel:{formatter:"{value}%"}},grid:{bottom:80,left:50,right:30},series:[{name:"Efficiency",type:"line",data:v,smooth:!0,lineStyle:{width:3,color:"#3b82f6"},itemStyle:{color:"#3b82f6"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(59, 130, 246, 0.5)"},{offset:1,color:"rgba(59, 130, 246, 0.1)"}]}},markLine:{silent:!0,lineStyle:{color:"#f59e0b",type:"dashed"},data:[{yAxis:70,name:"Target"}],label:{formatter:"Target: {c}%"}}}]};let h=s.map(x=>this.getActionGrade(x,e,"aces")),_=s.map(x=>this.getActionGrade(x,e,"excellent")),M=s.map(x=>this.getActionGrade(x,e,"good")),y=s.map(x=>this.getActionGrade(x,e,"ok")),f=s.map(x=>this.getActionGrade(x,e,"poor")),A=s.map(x=>this.getActionGrade(x,e,"errors"));this.actionGradeEvolutionChartOptions={title:{text:""},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["Aces","Excellent","Good","OK","Poor","Errors"],bottom:0},xAxis:{type:"category",data:m,axisLabel:{rotate:45,interval:0}},yAxis:{type:"value"},grid:{bottom:80,left:50,right:30},series:[{name:"Aces",type:"bar",stack:"total",data:h,itemStyle:{color:"#10b981"}},{name:"Excellent",type:"bar",stack:"total",data:_,itemStyle:{color:"#3b82f6"}},{name:"Good",type:"bar",stack:"total",data:M,itemStyle:{color:"#8b5cf6"}},{name:"OK",type:"bar",stack:"total",data:y,itemStyle:{color:"#f59e0b"}},{name:"Poor",type:"bar",stack:"total",data:f,itemStyle:{color:"#ef4444"}},{name:"Errors",type:"bar",stack:"total",data:A,itemStyle:{color:"#dc2626"}}]}}};u.\u0275fac=function(a){return new(a||u)},u.\u0275cmp=te({type:u,selectors:[["app-player-detail-stats"]],features:[ne([ue()])],decls:18,vars:12,consts:[["startPicker",""],["endPicker",""],["compStartPicker",""],["compEndPicker",""],[1,"flex","flex-col","p-4","md:p-6","max-w-7xl","mx-auto","w-full"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","mb-6","gap-4"],[1,"flex","items-center","gap-4"],["mat-icon-button","",3,"routerLink"],[1,"text-2xl","md:text-3xl","font-bold"],[1,"flex","items-center","gap-2","mt-1"],[1,"badge","badge-lg"],[1,"text-sm","text-gray-600"],[1,"mb-6"],[1,"flex","justify-center","items-center","py-20"],[1,"alert","alert-info"],[1,"flex","flex-col","md:flex-row","gap-4","items-end"],[1,"flex-1"],[3,"formControl"],["value","all"],["value","game"],["value","training"],[3,"selectionChange","formControl"],["value","last-7"],["value","last-30"],["value","last-90"],["value","last-6-months"],["value","last-year"],["value","custom"],["mat-raised-button","",1,"whitespace-nowrap",3,"click","color"],["mat-icon-button","",3,"click","matTooltip"],[1,"mt-4","p-4","bg-blue-50","rounded-lg"],[1,"mt-4","flex","flex-wrap","gap-2","items-center"],["matInput","",3,"dateChange","matDatepicker","formControl"],["matSuffix","",3,"for"],[1,"text-sm","font-semibold","mb-3","text-blue-900"],["value","previous-period"],["value","previous-month"],["value","previous-quarter"],["value","previous-year"],[1,"mt-4","grid","grid-cols-2","md:grid-cols-4","gap-3"],[1,"bg-white","p-3","rounded-lg","shadow-sm"],[1,"text-xs","text-gray-600"],[1,"text-lg","font-bold"],[1,"badge","badge-primary"],[1,"badge","badge-secondary"],[1,"badge","badge-accent"],[1,"loading","loading-spinner","loading-lg"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4","mb-6"],[1,"stat","bg-base-200","rounded-lg","p-4"],[1,"stat-title","text-sm"],[1,"stat-value","text-2xl","text-primary"],[1,"stat-value","text-2xl","text-secondary"],[1,"stat-value","text-2xl","text-success"],[1,"stat-value","text-2xl"],[1,"text-success"],[1,"text-sm","text-gray-500","mx-1"],[1,"text-error"],[1,"mt-4"],[1,"text-lg","font-semibold","mb-3"],["echarts","",1,"w-full","h-[400px]",3,"options"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-6"],["echarts","",1,"w-full","h-[350px]",3,"options"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-6","gap-4"],[1,"stat","bg-blue-50","rounded-lg","p-4"],[1,"stat-title","text-sm","text-blue-700"],[1,"stat-value","text-xl","text-blue-900"],[1,"stat-desc","text-xs"],[1,"stat","bg-green-50","rounded-lg","p-4"],[1,"stat-title","text-sm","text-green-700"],[1,"stat-value","text-xl","text-green-900"],[1,"stat-desc","text-xs","text-error"],[1,"stat","bg-purple-50","rounded-lg","p-4"],[1,"stat-title","text-sm","text-purple-700"],[1,"stat-value","text-xl","text-purple-900"],[1,"stat","bg-orange-50","rounded-lg","p-4"],[1,"stat-title","text-sm","text-orange-700"],[1,"stat-value","text-xl","text-orange-900"],[1,"stat-desc","text-xs","text-success"],[1,"stat","bg-yellow-50","rounded-lg","p-4"],[1,"stat-title","text-sm","text-yellow-700"],[1,"stat-value","text-xl","text-yellow-900"],[1,"stat","bg-pink-50","rounded-lg","p-4"],[1,"stat-title","text-sm","text-pink-700"],[1,"stat-value","text-xl","text-pink-900"],[1,"mb-4"],[1,"w-full","md:w-64"],[1,"space-y-4"],[1,"border","rounded-lg","p-4","hover:shadow-md","transition-shadow"],[1,"w-full","md:w-64","mb-4"],["value","serve"],["value","receive"],["value","attack"],["value","block"],["value","defense"],["value","set"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"mt-6","overflow-x-auto"],[1,"table","table-zebra","w-full"],[1,"text-center"],[1,"text-center","text-green-600"],[1,"text-center","text-blue-600"],[1,"text-center","text-purple-600"],[1,"text-center","text-yellow-600"],[1,"text-center","text-orange-600"],[1,"text-center","text-red-600"],[1,"flex","items-center","gap-2"],[1,"badge","badge-sm"],[1,"text-center","font-semibold"],[1,"badge"],[1,"w-full","mb-4"],["multiple","",3,"formControl"],[3,"value"],[1,"badge","badge-sm","ml-2"],[1,"flex","flex-col","md:flex-row","md:justify-between","md:items-start","gap-4","mb-4"],[1,"flex","items-center","gap-2","mb-2"],[1,"text-lg","font-semibold"],[1,"grid","grid-cols-3","gap-4","text-center"],[1,"text-2xl","font-bold","text-primary"],[1,"text-2xl","font-bold","text-success"],[1,"text-2xl","font-bold"],["echarts","",1,"w-full","h-[300px]",3,"options"],[1,"grid","grid-cols-2","md:grid-cols-6","gap-2","mt-4","pt-4","border-t"],[1,"text-center","p-2","bg-blue-50","rounded"],[1,"text-lg","font-semibold","text-blue-700"],[1,"text-center","p-2","bg-green-50","rounded"],[1,"text-lg","font-semibold","text-green-700"],[1,"text-center","p-2","bg-purple-50","rounded"],[1,"text-lg","font-semibold","text-purple-700"],[1,"text-center","p-2","bg-orange-50","rounded"],[1,"text-lg","font-semibold","text-orange-700"],[1,"text-center","p-2","bg-yellow-50","rounded"],[1,"text-lg","font-semibold","text-yellow-700"],[1,"text-center","p-2","bg-pink-50","rounded"],[1,"text-lg","font-semibold","text-pink-700"]],template:function(a,s){a&1&&(o(0,"div",4)(1,"div",5)(2,"div",6)(3,"button",7)(4,"mat-icon"),r(5,"arrow_back"),n()(),o(6,"div")(7,"h1",8),r(8),n(),o(9,"div",9)(10,"span",10),r(11),c(12,"transloco"),n(),b(13,rt,2,1,"span",11),n()()()(),b(14,ut,56,52,"mat-card",12),b(15,xt,2,0,"div",13)(16,gt,6,3,"div",14)(17,Mt,155,108),n()),a&2&&(i(3),S("routerLink",oe(9,ot,s.ROUTES.root,s.ROUTES.teams)),i(5),l(s.player==null?null:s.player.name),i(3),w("",d(12,7,"jersey-number"),": ",s.player==null?null:s.player.trikot),i(2),k(s.player&&s.player.roles&&s.player.roles.length>0?13:-1),i(),k(!s.isLoading&&s.performances.length>0?14:-1),i(),k(s.isLoading?15:s.performances.length===0?16:17))},dependencies:[le,pe,de,Me,Ie,we,Ae,Ee,Se,ye,_e,Ce,he,ge,xe,ze,We,Ze,qe,Je,Ge,Re,Oe,Fe,Le,Ve,Ye,$e,Ne,Xe,Ke,ke,be,je,He,ve,fe,re,me],styles:["[_nghost-%COMP%]{display:block}"]});let p=u;return p})();export{gi as PlayerDetailStatsPageComponent};
