import{$ as Re,$a as yo,$c as qo,Aa as bs,Ba as Gr,Cb as Co,Cc as Kr,D as q,Db as xo,Dc as Vt,Ec as Is,F as ae,Fc as nt,G as Ee,Ga as Ze,Gc as Jr,Ha as fo,Hc as Xr,I as Xe,Ia as Qe,J as ce,Ja as Hr,K as to,Ka as Wr,La as et,Lc as Yr,M as ro,Ma as j,Mc as Lo,N as no,Na as zt,Nc as Uo,O as Ye,Oc as Zr,P as Te,Pa as Ss,Q as vs,Qb as Do,Qc as Qr,R as so,Ra as po,Rc as As,S as io,Sa as _s,Ta as go,Tc as $o,Ua as ve,Uc as en,V as oo,Vb as ko,Vc as Fo,Wa as Es,Wc as zo,X as Le,Xa as tt,Xc as V,Ya as rt,Yc as Bo,Z as Vr,Za as mo,Zc as qt,_ as W,_a as vo,_b as Po,_c as Vo,a as Yi,ab as wo,ac as Mo,ad as Gt,b as ds,ba as U,bb as bo,bc as jo,bd as tn,c as Zi,cb as So,d as pe,da as D,db as _o,e as fs,eb as $e,f as ps,g as H,ga as S,gb as Eo,h as B,ha as Lt,hb as Bt,i as Mt,ia as ao,ja as R,jb as re,k as oe,ka as ys,kb as To,l as zr,la as v,ld as Go,m as Ne,ma as g,na as ws,nd as st,o as L,oa as co,ob as Ro,od as Cs,p as _,pa as Ut,pb as Ts,pd as rn,q as ge,qa as lo,qb as Oo,r as jt,ra as $t,s as Qi,sa as uo,sc as No,t as I,ta as Ft,tb as Rs,u as Br,ua as qr,v as z,w as Nt,wa as me,wb as Io,x as eo,xa as ho,xb as Ao,y as gs,ya as Ue,yb as Os,z as ms,za as Y}from"./chunk-VMVCLMWB.js";import{b as nn,c as Ho}from"./chunk-SECEFDB3.js";import{a as m,b as N,g as d}from"./chunk-GAL4ENT6.js";var Wt=class{},on=class{},ye=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(r=>{let t=r.indexOf(":");if(t>0){let s=r.slice(0,t),i=s.toLowerCase(),o=r.slice(t+1).trim();this.maybeSetNormalizedName(s,i),this.headers.has(i)?this.headers.get(i).push(o):this.headers.set(i,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((r,t)=>{this.setHeaderEntries(t,r)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([r,t])=>{this.setHeaderEntries(r,t)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let r=this.headers.get(e.toLowerCase());return r&&r.length>0?r[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,r){return this.clone({name:e,value:r,op:"a"})}set(e,r){return this.clone({name:e,value:r,op:"s"})}delete(e,r){return this.clone({name:e,value:r,op:"d"})}maybeSetNormalizedName(e,r){this.normalizedNames.has(r)||this.normalizedNames.set(r,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(r=>{this.headers.set(r,e.headers.get(r)),this.normalizedNames.set(r,e.normalizedNames.get(r))})}clone(e){let r=new n;return r.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,r.lazyUpdate=(this.lazyUpdate||[]).concat([e]),r}applyUpdate(e){let r=e.name.toLowerCase();switch(e.op){case"a":case"s":let t=e.value;if(typeof t=="string"&&(t=[t]),t.length===0)return;this.maybeSetNormalizedName(e.name,r);let s=(e.op==="a"?this.headers.get(r):void 0)||[];s.push(...t),this.headers.set(r,s);break;case"d":let i=e.value;if(!i)this.headers.delete(r),this.normalizedNames.delete(r);else{let o=this.headers.get(r);if(!o)return;o=o.filter(a=>i.indexOf(a)===-1),o.length===0?(this.headers.delete(r),this.normalizedNames.delete(r)):this.headers.set(r,o)}break}}setHeaderEntries(e,r){let t=(Array.isArray(r)?r:[r]).map(i=>i.toString()),s=e.toLowerCase();this.headers.set(s,t),this.maybeSetNormalizedName(e,s)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(r=>e(this.normalizedNames.get(r),this.headers.get(r)))}};var Ds=class{encodeKey(e){return Wo(e)}encodeValue(e){return Wo(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function _l(n,e){let r=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{let i=s.indexOf("="),[o,a]=i==-1?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,i)),e.decodeValue(s.slice(i+1))],l=r.get(o)||[];l.push(a),r.set(o,l)}),r}var El=/%(\d[a-f0-9])/gi,Tl={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Wo(n){return encodeURIComponent(n).replace(El,(e,r)=>Tl[r]??e)}function sn(n){return`${n}`}var Ie=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Ds,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=_l(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(r=>{let t=e.fromObject[r],s=Array.isArray(t)?t.map(sn):[sn(t)];this.map.set(r,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let r=this.map.get(e);return r?r[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,r){return this.clone({param:e,value:r,op:"a"})}appendAll(e){let r=[];return Object.keys(e).forEach(t=>{let s=e[t];Array.isArray(s)?s.forEach(i=>{r.push({param:t,value:i,op:"a"})}):r.push({param:t,value:s,op:"a"})}),this.clone(r)}set(e,r){return this.clone({param:e,value:r,op:"s"})}delete(e,r){return this.clone({param:e,value:r,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let r=this.encoder.encodeKey(e);return this.map.get(e).map(t=>r+"="+this.encoder.encodeValue(t)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let r=new n({encoder:this.encoder});return r.cloneFrom=this.cloneFrom||this,r.updates=(this.updates||[]).concat(e),r}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let r=(e.op==="a"?this.map.get(e.param):void 0)||[];r.push(sn(e.value)),this.map.set(e.param,r);break;case"d":if(e.value!==void 0){let t=this.map.get(e.param)||[],s=t.indexOf(sn(e.value));s!==-1&&t.splice(s,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var ks=class{constructor(){this.map=new Map}set(e,r){return this.map.set(e,r),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Rl(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Ko(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Jo(n){return typeof Blob<"u"&&n instanceof Blob}function Xo(n){return typeof FormData<"u"&&n instanceof FormData}function Ol(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Ht=class n{constructor(e,r,t,s){this.url=r,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let i;if(Rl(this.method)||s?(this.body=t!==void 0?t:null,i=s):i=t,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new ye,this.context??=new ks,!this.params)this.params=new Ie,this.urlWithParams=r;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=r;else{let a=r.indexOf("?"),l=a===-1?"?":a<r.length-1?"&":"";this.urlWithParams=r+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Ko(this.body)||Jo(this.body)||Xo(this.body)||Ol(this.body)?this.body:this.body instanceof Ie?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Xo(this.body)?null:Jo(this.body)?this.body.type||null:Ko(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Ie?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let r=e.method||this.method,t=e.url||this.url,s=e.responseType||this.responseType,i=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,c=e.headers||this.headers,u=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((f,p)=>f.set(p,e.setHeaders[p]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((f,p)=>f.set(p,e.setParams[p]),u)),new n(r,t,o,{params:u,headers:c,context:h,reportProgress:l,responseType:s,withCredentials:a,transferCache:i})}},Ae=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ae||{}),Kt=class{constructor(e,r=200,t="OK"){this.headers=e.headers||new ye,this.status=e.status!==void 0?e.status:r,this.statusText=e.statusText||t,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},an=class n extends Kt{constructor(e={}){super(e),this.type=Ae.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Jt=class n extends Kt{constructor(e={}){super(e),this.type=Ae.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Oe=class extends Kt{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},ea=200,Il=204;function xs(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Al=(()=>{let e=class e{constructor(t){this.handler=t}request(t,s,i={}){let o;if(t instanceof Ht)o=t;else{let c;i.headers instanceof ye?c=i.headers:c=new ye(i.headers);let u;i.params&&(i.params instanceof Ie?u=i.params:u=new Ie({fromObject:i.params})),o=new Ht(t,s,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let a=_(o).pipe(Ee(c=>this.handler.handle(c)));if(t instanceof Ht||i.observe==="events")return a;let l=a.pipe(q(c=>c instanceof Jt));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(I(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return l.pipe(I(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return l.pipe(I(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return l.pipe(I(c=>c.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,s={}){return this.request("DELETE",t,s)}get(t,s={}){return this.request("GET",t,s)}head(t,s={}){return this.request("HEAD",t,s)}jsonp(t,s){return this.request("JSONP",t,{params:new Ie().append(s,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,s={}){return this.request("OPTIONS",t,s)}patch(t,s,i={}){return this.request("PATCH",t,xs(i,s))}post(t,s,i={}){return this.request("POST",t,xs(i,s))}put(t,s,i={}){return this.request("PUT",t,xs(i,s))}};e.\u0275fac=function(s){return new(s||e)(v(Wt))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let n=e;return n})(),Cl=/^\)\]\}',?\n/,xl="X-Request-URL";function Yo(n){if(n.url)return n.url;let e=xl.toLocaleLowerCase();return n.headers.get(e)}var Dl=(()=>{let e=class e{constructor(){this.fetchImpl=g(Ps,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=g(j)}handle(t){return new pe(s=>{let i=new AbortController;return this.doRequest(t,i.signal,s).then(Ms,o=>s.error(new Oe({error:o}))),()=>i.abort()})}doRequest(t,s,i){return d(this,null,function*(){let o=this.createRequestInit(t),a;try{let y=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,m({signal:s},o)));kl(y),i.next({type:Ae.Sent}),a=yield y}catch(y){i.error(new Oe({error:y,status:y.status??0,statusText:y.statusText,url:t.urlWithParams,headers:y.headers}));return}let l=new ye(a.headers),c=a.statusText,u=Yo(a)??t.urlWithParams,h=a.status,f=null;if(t.reportProgress&&i.next(new an({headers:l,status:h,statusText:c,url:u})),a.body){let y=a.headers.get("content-length"),b=[],w=a.body.getReader(),E=0,P,M,C=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>d(this,null,function*(){for(;;){let{done:je,value:Pt}=yield w.read();if(je)break;if(b.push(Pt),E+=Pt.length,t.reportProgress){M=t.responseType==="text"?(M??"")+(P??=new TextDecoder).decode(Pt,{stream:!0}):void 0;let Xi=()=>i.next({type:Ae.DownloadProgress,total:y?+y:void 0,loaded:E,partialText:M});C?C.run(Xi):Xi()}}}));let G=this.concatChunks(b,E);try{let je=a.headers.get("Content-Type")??"";f=this.parseBody(t,G,je)}catch(je){i.error(new Oe({error:je,headers:new ye(a.headers),status:a.status,statusText:a.statusText,url:Yo(a)??t.urlWithParams}));return}}h===0&&(h=f?ea:0),h>=200&&h<300?(i.next(new Jt({body:f,headers:l,status:h,statusText:c,url:u})),i.complete()):i.error(new Oe({error:f,headers:l,status:h,statusText:c,url:u}))})}parseBody(t,s,i){switch(t.responseType){case"json":let o=new TextDecoder().decode(s).replace(Cl,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(s);case"blob":return new Blob([s],{type:i});case"arraybuffer":return s.buffer}}createRequestInit(t){let s={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((o,a)=>s[o]=a.join(",")),t.headers.has("Accept")||(s.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let o=t.detectContentTypeHeader();o!==null&&(s["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:s,credentials:i}}concatChunks(t,s){let i=new Uint8Array(s),o=0;for(let a of t)i.set(a,o),o+=a.length;return i}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac});let n=e;return n})(),Ps=class{};function Ms(){}function kl(n){n.then(Ms,Ms)}function Pl(n,e){return e(n)}function Ml(n,e,r){return(t,s)=>Y(r,()=>e(t,i=>n(i,s)))}var ta=new R(""),jl=new R(""),Nl=new R("",{providedIn:"root",factory:()=>!0});var Zo=(()=>{let e=class e extends Wt{constructor(t,s){super(),this.backend=t,this.injector=s,this.chain=null,this.pendingTasks=g(Wr),this.contributeToStability=g(Nl)}handle(t){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(ta),...this.injector.get(jl,[])]));this.chain=s.reduceRight((i,o)=>Ml(i,o,this.injector),Pl)}if(this.contributeToStability){let s=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Ye(()=>this.pendingTasks.remove(s)))}else return this.chain(t,s=>this.backend.handle(s))}};e.\u0275fac=function(s){return new(s||e)(v(on),v(Ue))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let n=e;return n})();var Ll=/^\)\]\}',?\n/;function Ul(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var Qo=(()=>{let e=class e{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new D(-2800,!1);let s=this.xhrFactory;return(s.\u0275loadImpl?L(s.\u0275loadImpl()):_(null)).pipe(W(()=>new pe(o=>{let a=s.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((w,E)=>a.setRequestHeader(w,E.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let w=t.detectContentTypeHeader();w!==null&&a.setRequestHeader("Content-Type",w)}if(t.responseType){let w=t.responseType.toLowerCase();a.responseType=w!=="json"?w:"text"}let l=t.serializeBody(),c=null,u=()=>{if(c!==null)return c;let w=a.statusText||"OK",E=new ye(a.getAllResponseHeaders()),P=Ul(a)||t.url;return c=new an({headers:E,status:a.status,statusText:w,url:P}),c},h=()=>{let{headers:w,status:E,statusText:P,url:M}=u(),C=null;E!==Il&&(C=typeof a.response>"u"?a.responseText:a.response),E===0&&(E=C?ea:0);let G=E>=200&&E<300;if(t.responseType==="json"&&typeof C=="string"){let je=C;C=C.replace(Ll,"");try{C=C!==""?JSON.parse(C):null}catch(Pt){C=je,G&&(G=!1,C={error:Pt,text:C})}}G?(o.next(new Jt({body:C,headers:w,status:E,statusText:P,url:M||void 0})),o.complete()):o.error(new Oe({error:C,headers:w,status:E,statusText:P,url:M||void 0}))},f=w=>{let{url:E}=u(),P=new Oe({error:w,status:a.status||0,statusText:a.statusText||"Unknown Error",url:E||void 0});o.error(P)},p=!1,y=w=>{p||(o.next(u()),p=!0);let E={type:Ae.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(E.total=w.total),t.responseType==="text"&&a.responseText&&(E.partialText=a.responseText),o.next(E)},b=w=>{let E={type:Ae.UploadProgress,loaded:w.loaded};w.lengthComputable&&(E.total=w.total),o.next(E)};return a.addEventListener("load",h),a.addEventListener("error",f),a.addEventListener("timeout",f),a.addEventListener("abort",f),t.reportProgress&&(a.addEventListener("progress",y),l!==null&&a.upload&&a.upload.addEventListener("progress",b)),a.send(l),o.next({type:Ae.Sent}),()=>{a.removeEventListener("error",f),a.removeEventListener("abort",f),a.removeEventListener("load",h),a.removeEventListener("timeout",f),t.reportProgress&&(a.removeEventListener("progress",y),l!==null&&a.upload&&a.upload.removeEventListener("progress",b)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(s){return new(s||e)(v(rn))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let n=e;return n})(),ra=new R(""),$l="XSRF-TOKEN",Fl=new R("",{providedIn:"root",factory:()=>$l}),zl="X-XSRF-TOKEN",Bl=new R("",{providedIn:"root",factory:()=>zl}),cn=class{},Vl=(()=>{let e=class e{constructor(t,s,i){this.doc=t,this.platform=s,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=tn(t,this.cookieName),this.lastCookieString=t),this.lastToken}};e.\u0275fac=function(s){return new(s||e)(v(V),v(ve),v(Fl))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let n=e;return n})();function ql(n,e){let r=n.url.toLowerCase();if(!g(ra)||n.method==="GET"||n.method==="HEAD"||r.startsWith("http://")||r.startsWith("https://"))return e(n);let t=g(cn).getToken(),s=g(Bl);return t!=null&&!n.headers.has(s)&&(n=n.clone({headers:n.headers.set(s,t)})),e(n)}function fp(...n){let e=[Al,Qo,Zo,{provide:Wt,useExisting:Zo},{provide:on,useFactory:()=>g(Dl,{optional:!0})??g(Qo)},{provide:ta,useValue:ql,multi:!0},{provide:ra,useValue:!0},{provide:cn,useClass:Vl}];for(let r of n)e.push(...r.\u0275providers);return me(e)}var Ls=class extends zo{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Us=class n extends Ls{static makeCurrent(){Fo(new n)}onAndCancel(e,r,t){return e.addEventListener(r,t),()=>{e.removeEventListener(r,t)}}dispatchEvent(e,r){e.dispatchEvent(r)}remove(e){e.remove()}createElement(e,r){return r=r||this.getDefaultDocument(),r.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,r){return r==="window"?window:r==="document"?e:r==="body"?e.body:null}getBaseHref(e){let r=Hl();return r==null?null:Wl(r)}resetBaseElement(){Xt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return tn(document.cookie,e)}},Xt=null;function Hl(){return Xt=Xt||document.querySelector("base"),Xt?Xt.getAttribute("href"):null}function Wl(n){return new URL(n,document.baseURI).pathname}var Kl=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac});let n=e;return n})(),ln=new R(""),oa=(()=>{let e=class e{constructor(t,s){this._zone=s,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,s,i){return this._findPluginFor(s).addEventListener(t,s,i)}getZone(){return this._zone}_findPluginFor(t){let s=this._eventNameToPlugin.get(t);if(s)return s;if(s=this._plugins.find(o=>o.supports(t)),!s)throw new D(5101,!1);return this._eventNameToPlugin.set(t,s),s}};e.\u0275fac=function(s){return new(s||e)(v(ln),v(j))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let n=e;return n})(),Yt=class{constructor(e){this._doc=e}},js="ng-app-id",aa=(()=>{let e=class e{constructor(t,s,i,o={}){this.doc=t,this.appId=s,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=st(o),this.resetHostNodes()}addStyles(t){for(let s of t)this.changeUsageCount(s,1)===1&&this.onStyleAdded(s)}removeStyles(t){for(let s of t)this.changeUsageCount(s,-1)<=0&&this.onStyleRemoved(s)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(s=>s.remove()),t.clear());for(let s of this.getAllStyles())this.onStyleRemoved(s);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let s of this.getAllStyles())this.addStyleToHost(t,s)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let s of this.hostNodes)this.addStyleToHost(s,t)}onStyleRemoved(t){let s=this.styleRef;s.get(t)?.elements?.forEach(i=>i.remove()),s.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${js}="${this.appId}"]`);if(t?.length){let s=new Map;return t.forEach(i=>{i.textContent!=null&&s.set(i.textContent,i)}),s}return null}changeUsageCount(t,s){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=s,o.usage}return i.set(t,{usage:s,elements:[]}),s}getStyleElement(t,s){let i=this.styleNodesInDOM,o=i?.get(s);if(o?.parentNode===t)return i.delete(s),o.removeAttribute(js),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=s,this.platformIsServer&&a.setAttribute(js,this.appId),t.appendChild(a),a}}addStyleToHost(t,s){let i=this.getStyleElement(t,s),o=this.styleRef,a=o.get(s)?.elements;a?a.push(i):o.set(s,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}};e.\u0275fac=function(s){return new(s||e)(v(V),v(_s),v(Es,8),v(ve))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let n=e;return n})(),Ns={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Fs=/%COMP%/g,ca="%COMP%",Jl=`_nghost-${ca}`,Xl=`_ngcontent-${ca}`,Yl=!0,Zl=new R("",{providedIn:"root",factory:()=>Yl});function Ql(n){return Xl.replace(Fs,n)}function eu(n){return Jl.replace(Fs,n)}function la(n,e){return e.map(r=>r.replace(Fs,n))}var na=(()=>{let e=class e{constructor(t,s,i,o,a,l,c,u=null){this.eventManager=t,this.sharedStylesHost=s,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=st(l),this.defaultRenderer=new Zt(t,a,c,this.platformIsServer)}createRenderer(t,s){if(!t||!s)return this.defaultRenderer;this.platformIsServer&&s.encapsulation===$t.ShadowDom&&(s=N(m({},s),{encapsulation:$t.Emulated}));let i=this.getOrCreateRenderer(t,s);return i instanceof un?i.applyToHost(t):i instanceof Qt&&i.applyStyles(),i}getOrCreateRenderer(t,s){let i=this.rendererByCompId,o=i.get(s.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(s.encapsulation){case $t.Emulated:o=new un(c,u,s,this.appId,h,a,l,f);break;case $t.ShadowDom:return new $s(c,u,t,s,a,l,this.nonce,f);default:o=new Qt(c,u,s,h,a,l,f);break}i.set(s.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(s){return new(s||e)(v(oa),v(aa),v(_s),v(Zl),v(V),v(ve),v(j),v(Es))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let n=e;return n})(),Zt=class{constructor(e,r,t,s){this.eventManager=e,this.doc=r,this.ngZone=t,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,r){return r?this.doc.createElementNS(Ns[r]||r,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,r){(sa(e)?e.content:e).appendChild(r)}insertBefore(e,r,t){e&&(sa(e)?e.content:e).insertBefore(r,t)}removeChild(e,r){r.remove()}selectRootElement(e,r){let t=typeof e=="string"?this.doc.querySelector(e):e;if(!t)throw new D(-5104,!1);return r||(t.textContent=""),t}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,r,t,s){if(s){r=s+":"+r;let i=Ns[s];i?e.setAttributeNS(i,r,t):e.setAttribute(r,t)}else e.setAttribute(r,t)}removeAttribute(e,r,t){if(t){let s=Ns[t];s?e.removeAttributeNS(s,r):e.removeAttribute(`${t}:${r}`)}else e.removeAttribute(r)}addClass(e,r){e.classList.add(r)}removeClass(e,r){e.classList.remove(r)}setStyle(e,r,t,s){s&(Bt.DashCase|Bt.Important)?e.style.setProperty(r,t,s&Bt.Important?"important":""):e.style[r]=t}removeStyle(e,r,t){t&Bt.DashCase?e.style.removeProperty(r):e.style[r]=""}setProperty(e,r,t){e!=null&&(e[r]=t)}setValue(e,r){e.nodeValue=r}listen(e,r,t){if(typeof e=="string"&&(e=en().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${r}`);return this.eventManager.addEventListener(e,r,this.decoratePreventDefault(t))}decoratePreventDefault(e){return r=>{if(r==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(r)):e(r))===!1&&r.preventDefault()}}};function sa(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var $s=class extends Zt{constructor(e,r,t,s,i,o,a,l){super(e,i,o,l),this.sharedStylesHost=r,this.hostEl=t,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=la(s.id,s.styles);for(let u of c){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,r){return super.appendChild(this.nodeOrShadowRoot(e),r)}insertBefore(e,r,t){return super.insertBefore(this.nodeOrShadowRoot(e),r,t)}removeChild(e,r){return super.removeChild(null,r)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Qt=class extends Zt{constructor(e,r,t,s,i,o,a,l){super(e,i,o,a),this.sharedStylesHost=r,this.removeStylesOnCompDestroy=s,this.styles=l?la(l,t.styles):t.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},un=class extends Qt{constructor(e,r,t,s,i,o,a,l){let c=s+"-"+t.id;super(e,r,t,i,o,a,l,c),this.contentAttr=Ql(c),this.hostAttr=eu(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,r){let t=super.createElement(e,r);return super.setAttribute(t,this.contentAttr,""),t}},tu=(()=>{let e=class e extends Yt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,s,i){return t.addEventListener(s,i,!1),()=>this.removeEventListener(t,s,i)}removeEventListener(t,s,i){return t.removeEventListener(s,i)}};e.\u0275fac=function(s){return new(s||e)(v(V))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let n=e;return n})(),ru=(()=>{let e=class e extends Yt{constructor(t){super(t),this.delegate=g(Uo,{optional:!0})}supports(t){return this.delegate?this.delegate.supports(t):!1}addEventListener(t,s,i){return this.delegate.addEventListener(t,s,i)}removeEventListener(t,s,i){return this.delegate.removeEventListener(t,s,i)}};e.\u0275fac=function(s){return new(s||e)(v(V))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let n=e;return n})(),ia=["alt","control","meta","shift"],nu={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},su={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},iu=(()=>{let e=class e extends Yt{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,s,i){let o=e.parseEventName(s),a=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>en().onAndCancel(t,o.domEventName,a))}static parseEventName(t){let s=t.toLowerCase().split("."),i=s.shift();if(s.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(s.pop()),a="",l=s.indexOf("code");if(l>-1&&(s.splice(l,1),a="code."),ia.forEach(u=>{let h=s.indexOf(u);h>-1&&(s.splice(h,1),a+=u+".")}),a+=o,s.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=a,c}static matchEventFullKeyCode(t,s){let i=nu[t.key]||t.key,o="";return s.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),ia.forEach(a=>{if(a!==i){let l=su[a];l(t)&&(o+=a+".")}}),o+=i,o===s)}static eventCallback(t,s,i){return o=>{e.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>s(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}};e.\u0275fac=function(s){return new(s||e)(v(V))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let n=e;return n})();function Np(n,e){return Lo(m({rootComponent:n},ou(e)))}function ou(n){return{appProviders:[...hu,...n?.providers??[]],platformProviders:uu}}function au(){Us.makeCurrent()}function cu(){return new zt}function lu(){return po(document),document}var uu=[{provide:ve,useValue:Go},{provide:go,useValue:au,multi:!0},{provide:V,useFactory:lu,deps:[]}];var hu=[{provide:ho,useValue:"root"},{provide:zt,useFactory:cu,deps:[]},{provide:ln,useClass:tu,multi:!0,deps:[V,j,ve]},{provide:ln,useClass:iu,multi:!0,deps:[V]},{provide:ln,useClass:ru,multi:!0},na,aa,oa,{provide:Ro,useExisting:na},{provide:rn,useClass:Kl,deps:[]},[]];var Lp=(()=>{let e=class e{constructor(t){this._doc=t,this._dom=en()}addTag(t,s=!1){return t?this._getOrCreateElement(t,s):null}addTags(t,s=!1){return t?t.reduce((i,o)=>(o&&i.push(this._getOrCreateElement(o,s)),i),[]):[]}getTag(t){return t&&this._doc.querySelector(`meta[${t}]`)||null}getTags(t){if(!t)return[];let s=this._doc.querySelectorAll(`meta[${t}]`);return s?[].slice.call(s):[]}updateTag(t,s){if(!t)return null;s=s||this._parseSelector(t);let i=this.getTag(s);return i?this._setMetaElementAttributes(t,i):this._getOrCreateElement(t,!0)}removeTag(t){this.removeTagElement(this.getTag(t))}removeTagElement(t){t&&this._dom.remove(t)}_getOrCreateElement(t,s=!1){if(!s){let a=this._parseSelector(t),l=this.getTags(a).filter(c=>this._containsAttributes(t,c))[0];if(l!==void 0)return l}let i=this._dom.createElement("meta");return this._setMetaElementAttributes(t,i),this._doc.getElementsByTagName("head")[0].appendChild(i),i}_setMetaElementAttributes(t,s){return Object.keys(t).forEach(i=>s.setAttribute(this._getMetaKeyMap(i),t[i])),s}_parseSelector(t){let s=t.name?"name":"property";return`${s}="${t[s]}"`}_containsAttributes(t,s){return Object.keys(t).every(i=>s.getAttribute(this._getMetaKeyMap(i))===t[i])}_getMetaKeyMap(t){return du[t]||t}};e.\u0275fac=function(s){return new(s||e)(v(V))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),du={httpEquiv:"http-equiv"},ua=(()=>{let e=class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}};e.\u0275fac=function(s){return new(s||e)(v(V))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var fu=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:function(s){let i=null;return s?i=new(s||e):i=v(pu),i},providedIn:"root"});let n=e;return n})(),pu=(()=>{let e=class e extends fu{constructor(t){super(),this._doc=t}sanitize(t,s){if(s==null)return null;switch(t){case $e.NONE:return s;case $e.HTML:return rt(s,"HTML")?tt(s):_o(this._doc,String(s)).toString();case $e.STYLE:return rt(s,"Style")?tt(s):s;case $e.SCRIPT:if(rt(s,"Script"))return tt(s);throw new D(5200,!1);case $e.URL:return rt(s,"URL")?tt(s):So(String(s));case $e.RESOURCE_URL:if(rt(s,"ResourceURL"))return tt(s);throw new D(5201,!1);default:throw new D(5202,!1)}}bypassSecurityTrustHtml(t){return mo(t)}bypassSecurityTrustStyle(t){return vo(t)}bypassSecurityTrustScript(t){return yo(t)}bypassSecurityTrustUrl(t){return wo(t)}bypassSecurityTrustResourceUrl(t){return bo(t)}};e.\u0275fac=function(s){return new(s||e)(v(V))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var T="primary",pr=Symbol("RouteTitle"),Gs=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let r=this.params[e];return Array.isArray(r)?r[0]:r}return null}getAll(e){if(this.has(e)){let r=this.params[e];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}};function ht(n){return new Gs(n)}function mu(n,e,r){let t=r.path.split("/");if(t.length>n.length||r.pathMatch==="full"&&(e.hasChildren()||t.length<n.length))return null;let s={};for(let i=0;i<t.length;i++){let o=t[i],a=n[i];if(o[0]===":")s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,t.length),posParams:s}}function vu(n,e){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!le(n[r],e[r]))return!1;return!0}function le(n,e){let r=n?Hs(n):void 0,t=e?Hs(e):void 0;if(!r||!t||r.length!=t.length)return!1;let s;for(let i=0;i<r.length;i++)if(s=r[i],!_a(n[s],e[s]))return!1;return!0}function Hs(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function _a(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let r=[...n].sort(),t=[...e].sort();return r.every((s,i)=>t[i]===s)}else return n===e}function Ea(n){return n.length>0?n[n.length-1]:null}function De(n){return jt(n)?n:Vt(n)?L(Promise.resolve(n)):_(n)}var yu={exact:Ra,subset:Oa},Ta={exact:wu,subset:bu,ignored:()=>!0};function ha(n,e,r){return yu[r.paths](n.root,e.root,r.matrixParams)&&Ta[r.queryParams](n.queryParams,e.queryParams)&&!(r.fragment==="exact"&&n.fragment!==e.fragment)}function wu(n,e){return le(n,e)}function Ra(n,e,r){if(!ze(n.segments,e.segments)||!fn(n.segments,e.segments,r)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let t in e.children)if(!n.children[t]||!Ra(n.children[t],e.children[t],r))return!1;return!0}function bu(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(r=>_a(n[r],e[r]))}function Oa(n,e,r){return Ia(n,e,e.segments,r)}function Ia(n,e,r,t){if(n.segments.length>r.length){let s=n.segments.slice(0,r.length);return!(!ze(s,r)||e.hasChildren()||!fn(s,r,t))}else if(n.segments.length===r.length){if(!ze(n.segments,r)||!fn(n.segments,r,t))return!1;for(let s in e.children)if(!n.children[s]||!Oa(n.children[s],e.children[s],t))return!1;return!0}else{let s=r.slice(0,n.segments.length),i=r.slice(n.segments.length);return!ze(n.segments,s)||!fn(n.segments,s,t)||!n.children[T]?!1:Ia(n.children[T],e,i,t)}}function fn(n,e,r){return e.every((t,s)=>Ta[r](n[s].parameters,t.parameters))}var be=class{constructor(e=new x([],{}),r={},t=null){this.root=e,this.queryParams=r,this.fragment=t}get queryParamMap(){return this._queryParamMap??=ht(this.queryParams),this._queryParamMap}toString(){return Eu.serialize(this)}},x=class{constructor(e,r){this.segments=e,this.children=r,this.parent=null,Object.values(r).forEach(t=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pn(this)}},Fe=class{constructor(e,r){this.path=e,this.parameters=r}get parameterMap(){return this._parameterMap??=ht(this.parameters),this._parameterMap}toString(){return Ca(this)}};function Su(n,e){return ze(n,e)&&n.every((r,t)=>le(r.parameters,e[t].parameters))}function ze(n,e){return n.length!==e.length?!1:n.every((r,t)=>r.path===e[t].path)}function _u(n,e){let r=[];return Object.entries(n.children).forEach(([t,s])=>{t===T&&(r=r.concat(e(s,t)))}),Object.entries(n.children).forEach(([t,s])=>{t!==T&&(r=r.concat(e(s,t)))}),r}var mt=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:()=>new dt,providedIn:"root"});let n=e;return n})(),dt=class{parse(e){let r=new Ks(e);return new be(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(e){let r=`/${er(e.root,!0)}`,t=Ou(e.queryParams),s=typeof e.fragment=="string"?`#${Tu(e.fragment)}`:"";return`${r}${t}${s}`}},Eu=new dt;function pn(n){return n.segments.map(e=>Ca(e)).join("/")}function er(n,e){if(!n.hasChildren())return pn(n);if(e){let r=n.children[T]?er(n.children[T],!1):"",t=[];return Object.entries(n.children).forEach(([s,i])=>{s!==T&&t.push(`${s}:${er(i,!1)}`)}),t.length>0?`${r}(${t.join("//")})`:r}else{let r=_u(n,(t,s)=>s===T?[er(n.children[T],!1)]:[`${s}:${er(t,!1)}`]);return Object.keys(n.children).length===1&&n.children[T]!=null?`${pn(n)}/${r[0]}`:`${pn(n)}/(${r.join("//")})`}}function Aa(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hn(n){return Aa(n).replace(/%3B/gi,";")}function Tu(n){return encodeURI(n)}function Ws(n){return Aa(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gn(n){return decodeURIComponent(n)}function da(n){return gn(n.replace(/\+/g,"%20"))}function Ca(n){return`${Ws(n.path)}${Ru(n.parameters)}`}function Ru(n){return Object.entries(n).map(([e,r])=>`;${Ws(e)}=${Ws(r)}`).join("")}function Ou(n){let e=Object.entries(n).map(([r,t])=>Array.isArray(t)?t.map(s=>`${hn(r)}=${hn(s)}`).join("&"):`${hn(r)}=${hn(t)}`).filter(r=>r);return e.length?`?${e.join("&")}`:""}var Iu=/^[^\/()?;#]+/;function zs(n){let e=n.match(Iu);return e?e[0]:""}var Au=/^[^\/()?;=#]+/;function Cu(n){let e=n.match(Au);return e?e[0]:""}var xu=/^[^=?&#]+/;function Du(n){let e=n.match(xu);return e?e[0]:""}var ku=/^[^&#]+/;function Pu(n){let e=n.match(ku);return e?e[0]:""}var Ks=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new x([],{}):new x([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(e.length>0||Object.keys(r).length>0)&&(t[T]=new x(e,r)),t}parseSegment(){let e=zs(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new D(4009,!1);return this.capture(e),new Fe(gn(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let r=Cu(this.remaining);if(!r)return;this.capture(r);let t="";if(this.consumeOptional("=")){let s=zs(this.remaining);s&&(t=s,this.capture(t))}e[gn(r)]=gn(t)}parseQueryParam(e){let r=Du(this.remaining);if(!r)return;this.capture(r);let t="";if(this.consumeOptional("=")){let o=Pu(this.remaining);o&&(t=o,this.capture(t))}let s=da(r),i=da(t);if(e.hasOwnProperty(s)){let o=e[s];Array.isArray(o)||(o=[o],e[s]=o),o.push(i)}else e[s]=i}parseParens(e){let r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let t=zs(this.remaining),s=this.remaining[t.length];if(s!=="/"&&s!==")"&&s!==";")throw new D(4010,!1);let i;t.indexOf(":")>-1?(i=t.slice(0,t.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=T);let o=this.parseChildren();r[i]=Object.keys(o).length===1?o[T]:new x([],o),this.consumeOptional("//")}return r}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new D(4011,!1)}};function xa(n){return n.segments.length>0?new x([],{[T]:n}):n}function Da(n){let e={};for(let[t,s]of Object.entries(n.children)){let i=Da(s);if(t===T&&i.segments.length===0&&i.hasChildren())for(let[o,a]of Object.entries(i.children))e[o]=a;else(i.segments.length>0||i.hasChildren())&&(e[t]=i)}let r=new x(n.segments,e);return Mu(r)}function Mu(n){if(n.numberOfChildren===1&&n.children[T]){let e=n.children[T];return new x(n.segments.concat(e.segments),e.children)}return n}function Be(n){return n instanceof be}function ju(n,e,r=null,t=null){let s=ka(n);return Pa(s,e,r,t)}function ka(n){let e;function r(i){let o={};for(let l of i.children){let c=r(l);o[l.outlet]=c}let a=new x(i.url,o);return i===n&&(e=a),a}let t=r(n.root),s=xa(t);return e??s}function Pa(n,e,r,t){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return Bs(s,s,s,r,t);let i=Nu(e);if(i.toRoot())return Bs(s,s,new x([],{}),r,t);let o=Lu(i,s,n),a=o.processChildren?nr(o.segmentGroup,o.index,i.commands):ja(o.segmentGroup,o.index,i.commands);return Bs(s,o.segmentGroup,a,r,t)}function mn(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function or(n){return typeof n=="object"&&n!=null&&n.outlets}function Bs(n,e,r,t,s){let i={};t&&Object.entries(t).forEach(([l,c])=>{i[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;n===e?o=r:o=Ma(n,e,r);let a=xa(Da(o));return new be(a,i,s)}function Ma(n,e,r){let t={};return Object.entries(n.children).forEach(([s,i])=>{i===e?t[s]=r:t[s]=Ma(i,e,r)}),new x(n.segments,t)}var vn=class{constructor(e,r,t){if(this.isAbsolute=e,this.numberOfDoubleDots=r,this.commands=t,e&&t.length>0&&mn(t[0]))throw new D(4003,!1);let s=t.find(or);if(s&&s!==Ea(t))throw new D(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Nu(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new vn(!0,0,n);let e=0,r=!1,t=n.reduce((s,i,o)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...s,{outlets:a}]}if(i.segmentPath)return[...s,i.segmentPath]}return typeof i!="string"?[...s,i]:o===0?(i.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?r=!0:a===".."?e++:a!=""&&s.push(a))}),s):[...s,i]},[]);return new vn(r,e,t)}var ct=class{constructor(e,r,t){this.segmentGroup=e,this.processChildren=r,this.index=t}};function Lu(n,e,r){if(n.isAbsolute)return new ct(e,!0,0);if(!r)return new ct(e,!1,NaN);if(r.parent===null)return new ct(r,!0,0);let t=mn(n.commands[0])?0:1,s=r.segments.length-1+t;return Uu(r,s,n.numberOfDoubleDots)}function Uu(n,e,r){let t=n,s=e,i=r;for(;i>s;){if(i-=s,t=t.parent,!t)throw new D(4005,!1);s=t.segments.length}return new ct(t,!1,s-i)}function $u(n){return or(n[0])?n[0].outlets:{[T]:n}}function ja(n,e,r){if(n??=new x([],{}),n.segments.length===0&&n.hasChildren())return nr(n,e,r);let t=Fu(n,e,r),s=r.slice(t.commandIndex);if(t.match&&t.pathIndex<n.segments.length){let i=new x(n.segments.slice(0,t.pathIndex),{});return i.children[T]=new x(n.segments.slice(t.pathIndex),n.children),nr(i,0,s)}else return t.match&&s.length===0?new x(n.segments,{}):t.match&&!n.hasChildren()?Js(n,e,r):t.match?nr(n,0,s):Js(n,e,r)}function nr(n,e,r){if(r.length===0)return new x(n.segments,{});{let t=$u(r),s={};if(Object.keys(t).some(i=>i!==T)&&n.children[T]&&n.numberOfChildren===1&&n.children[T].segments.length===0){let i=nr(n.children[T],e,r);return new x(n.segments,i.children)}return Object.entries(t).forEach(([i,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(s[i]=ja(n.children[i],e,o))}),Object.entries(n.children).forEach(([i,o])=>{t[i]===void 0&&(s[i]=o)}),new x(n.segments,s)}}function Fu(n,e,r){let t=0,s=e,i={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(t>=r.length)return i;let o=n.segments[s],a=r[t];if(or(a))break;let l=`${a}`,c=t<r.length-1?r[t+1]:null;if(s>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!pa(l,c,o))return i;t+=2}else{if(!pa(l,{},o))return i;t++}s++}return{match:!0,pathIndex:s,commandIndex:t}}function Js(n,e,r){let t=n.segments.slice(0,e),s=0;for(;s<r.length;){let i=r[s];if(or(i)){let l=zu(i.outlets);return new x(t,l)}if(s===0&&mn(r[0])){let l=n.segments[e];t.push(new Fe(l.path,fa(r[0]))),s++;continue}let o=or(i)?i.outlets[T]:`${i}`,a=s<r.length-1?r[s+1]:null;o&&a&&mn(a)?(t.push(new Fe(o,fa(a))),s+=2):(t.push(new Fe(o,{})),s++)}return new x(t,{})}function zu(n){let e={};return Object.entries(n).forEach(([r,t])=>{typeof t=="string"&&(t=[t]),t!==null&&(e[r]=Js(new x([],{}),0,t))}),e}function fa(n){let e={};return Object.entries(n).forEach(([r,t])=>e[r]=`${t}`),e}function pa(n,e,r){return n==r.path&&le(e,r.parameters)}var sr="imperative",$=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}($||{}),Z=class{constructor(e,r){this.id=e,this.url=r}},ft=class extends Z{constructor(e,r,t="imperative",s=null){super(e,r),this.type=$.NavigationStart,this.navigationTrigger=t,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},se=class extends Z{constructor(e,r,t){super(e,r),this.urlAfterRedirects=t,this.type=$.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},J=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(J||{}),yn=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(yn||{}),we=class extends Z{constructor(e,r,t,s){super(e,r),this.reason=t,this.code=s,this.type=$.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ce=class extends Z{constructor(e,r,t,s){super(e,r),this.reason=t,this.code=s,this.type=$.NavigationSkipped}},ar=class extends Z{constructor(e,r,t,s){super(e,r),this.error=t,this.target=s,this.type=$.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wn=class extends Z{constructor(e,r,t,s){super(e,r),this.urlAfterRedirects=t,this.state=s,this.type=$.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xs=class extends Z{constructor(e,r,t,s){super(e,r),this.urlAfterRedirects=t,this.state=s,this.type=$.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ys=class extends Z{constructor(e,r,t,s,i){super(e,r),this.urlAfterRedirects=t,this.state=s,this.shouldActivate=i,this.type=$.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Zs=class extends Z{constructor(e,r,t,s){super(e,r),this.urlAfterRedirects=t,this.state=s,this.type=$.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qs=class extends Z{constructor(e,r,t,s){super(e,r),this.urlAfterRedirects=t,this.state=s,this.type=$.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ei=class{constructor(e){this.route=e,this.type=$.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ti=class{constructor(e){this.route=e,this.type=$.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ri=class{constructor(e){this.snapshot=e,this.type=$.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ni=class{constructor(e){this.snapshot=e,this.type=$.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},si=class{constructor(e){this.snapshot=e,this.type=$.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ii=class{constructor(e){this.snapshot=e,this.type=$.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bn=class{constructor(e,r,t){this.routerEvent=e,this.position=r,this.anchor=t,this.type=$.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},cr=class{},pt=class{constructor(e,r){this.url=e,this.navigationBehaviorOptions=r}};function Bu(n,e){return n.providers&&!n._injector&&(n._injector=Os(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ne(n){return n.outlet||T}function Vu(n,e){let r=n.filter(t=>ne(t)===e);return r.push(...n.filter(t=>ne(t)!==e)),r}function gr(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let r=e.routeConfig;if(r?._loadedInjector)return r._loadedInjector;if(r?._injector)return r._injector}return null}var oi=class{get injector(){return gr(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new mr(this.rootInjector),this.attachRef=null}},mr=(()=>{let e=class e{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,s){let i=this.getOrCreateContext(t);i.outlet=s,this.contexts.set(t,i)}onChildOutletDestroyed(t){let s=this.getContext(t);s&&(s.outlet=null,s.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let s=this.getContext(t);return s||(s=new oi(this.rootInjector),this.contexts.set(t,s)),s}getContext(t){return this.contexts.get(t)||null}};e.\u0275fac=function(s){return new(s||e)(v(Ue))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Sn=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let r=this.pathFromRoot(e);return r.length>1?r[r.length-2]:null}children(e){let r=ai(e,this._root);return r?r.children.map(t=>t.value):[]}firstChild(e){let r=ai(e,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(e){let r=ci(e,this._root);return r.length<2?[]:r[r.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return ci(e,this._root).map(r=>r.value)}};function ai(n,e){if(n===e.value)return e;for(let r of e.children){let t=ai(n,r);if(t)return t}return null}function ci(n,e){if(n===e.value)return[e];for(let r of e.children){let t=ci(n,r);if(t.length)return t.unshift(e),t}return[]}var K=class{constructor(e,r){this.value=e,this.children=r}toString(){return`TreeNode(${this.value})`}};function at(n){let e={};return n&&n.children.forEach(r=>e[r.value.outlet]=r),e}var _n=class extends Sn{constructor(e,r){super(e),this.snapshot=r,vi(this,e)}toString(){return this.snapshot.toString()}};function Na(n){let e=qu(n),r=new B([new Fe("",{})]),t=new B({}),s=new B({}),i=new B({}),o=new B(""),a=new xe(r,t,i,o,s,T,n,e.root);return a.snapshot=e.root,new _n(new K(a,[]),e)}function qu(n){let e={},r={},t={},s="",i=new lt([],e,t,s,r,T,n,null,{});return new Tn("",new K(i,[]))}var xe=class{constructor(e,r,t,s,i,o,a,l){this.urlSubject=e,this.paramsSubject=r,this.queryParamsSubject=t,this.fragmentSubject=s,this.dataSubject=i,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(I(c=>c[pr]))??_(void 0),this.url=e,this.params=r,this.queryParams=t,this.fragment=s,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(I(e=>ht(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(I(e=>ht(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function En(n,e,r="emptyOnly"){let t,{routeConfig:s}=n;return e!==null&&(r==="always"||s?.path===""||!e.component&&!e.routeConfig?.loadComponent)?t={params:m(m({},e.params),n.params),data:m(m({},e.data),n.data),resolve:m(m(m(m({},n.data),e.data),s?.data),n._resolvedData)}:t={params:m({},n.params),data:m({},n.data),resolve:m(m({},n.data),n._resolvedData??{})},s&&Ua(s)&&(t.resolve[pr]=s.title),t}var lt=class{get title(){return this.data?.[pr]}constructor(e,r,t,s,i,o,a,l,c){this.url=e,this.params=r,this.queryParams=t,this.fragment=s,this.data=i,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ht(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ht(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(t=>t.toString()).join("/"),r=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${r}')`}},Tn=class extends Sn{constructor(e,r){super(r),this.url=e,vi(this,r)}toString(){return La(this._root)}};function vi(n,e){e.value._routerState=n,e.children.forEach(r=>vi(n,r))}function La(n){let e=n.children.length>0?` { ${n.children.map(La).join(", ")} } `:"";return`${n.value}${e}`}function Vs(n){if(n.snapshot){let e=n.snapshot,r=n._futureSnapshot;n.snapshot=r,le(e.queryParams,r.queryParams)||n.queryParamsSubject.next(r.queryParams),e.fragment!==r.fragment&&n.fragmentSubject.next(r.fragment),le(e.params,r.params)||n.paramsSubject.next(r.params),vu(e.url,r.url)||n.urlSubject.next(r.url),le(e.data,r.data)||n.dataSubject.next(r.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function li(n,e){let r=le(n.params,e.params)&&Su(n.url,e.url),t=!n.parent!=!e.parent;return r&&!t&&(!n.parent||li(n.parent,e.parent))}function Ua(n){return typeof n.title=="string"||n.title===null}var Gu=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=T,this.activateEvents=new et,this.deactivateEvents=new et,this.attachEvents=new et,this.detachEvents=new et,this.parentContexts=g(mr),this.location=g(Oo),this.changeDetector=g(Yr),this.inputBinder=g(An,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:s,previousValue:i}=t.name;if(s)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new D(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new D(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new D(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,s){this.activated=t,this._activatedRoute=s,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,s){if(this.isActivated)throw new D(4013,!1);this._activatedRoute=t;let i=this.location,a=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new ui(t,l,i.injector);this.activated=i.createComponent(a,{index:i.length,injector:c,environmentInjector:s}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275dir=qr({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Gr]});let n=e;return n})(),ui=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,r,t){this.route=e,this.childContexts=r,this.parent=t}get(e,r){return e===xe?this.route:e===mr?this.childContexts:this.parent.get(e,r)}},An=new R(""),ga=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:s}=t,i=Br([s.queryParams,s.params,s.data]).pipe(W(([o,a,l],c)=>(l=m(m(m({},o),a),l),c===0?_(l):Promise.resolve(l)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==s||s.component===null){this.unsubscribeFromRouteData(t);return}let a=$o(s.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:l}of a.inputs)t.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(t,i)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac});let n=e;return n})();function Hu(n,e,r){let t=lr(n,e._root,r?r._root:void 0);return new _n(t,e)}function lr(n,e,r){if(r&&n.shouldReuseRoute(e.value,r.value.snapshot)){let t=r.value;t._futureSnapshot=e.value;let s=Wu(n,e,r);return new K(t,s)}else{if(n.shouldAttach(e.value)){let i=n.retrieve(e.value);if(i!==null){let o=i.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>lr(n,a)),o}}let t=Ku(e.value),s=e.children.map(i=>lr(n,i));return new K(t,s)}}function Wu(n,e,r){return e.children.map(t=>{for(let s of r.children)if(n.shouldReuseRoute(t.value,s.value.snapshot))return lr(n,t,s);return lr(n,t)})}function Ku(n){return new xe(new B(n.url),new B(n.params),new B(n.queryParams),new B(n.fragment),new B(n.data),n.outlet,n.component,n)}var ur=class{constructor(e,r){this.redirectTo=e,this.navigationBehaviorOptions=r}},$a="ngNavigationCancelingError";function Rn(n,e){let{redirectTo:r,navigationBehaviorOptions:t}=Be(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=Fa(!1,J.Redirect);return s.url=r,s.navigationBehaviorOptions=t,s}function Fa(n,e){let r=new Error(`NavigationCancelingError: ${n||""}`);return r[$a]=!0,r.cancellationCode=e,r}function Ju(n){return za(n)&&Be(n.url)}function za(n){return!!n&&n[$a]}var Xu=(n,e,r,t)=>I(s=>(new hi(e,s.targetRouterState,s.currentRouterState,r,t).activate(n),s)),hi=class{constructor(e,r,t,s,i){this.routeReuseStrategy=e,this.futureState=r,this.currState=t,this.forwardEvent=s,this.inputBindingEnabled=i}activate(e){let r=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,t,e),Vs(this.futureState.root),this.activateChildRoutes(r,t,e)}deactivateChildRoutes(e,r,t){let s=at(r);e.children.forEach(i=>{let o=i.value.outlet;this.deactivateRoutes(i,s[o],t),delete s[o]}),Object.values(s).forEach(i=>{this.deactivateRouteAndItsChildren(i,t)})}deactivateRoutes(e,r,t){let s=e.value,i=r?r.value:null;if(s===i)if(s.component){let o=t.getContext(s.outlet);o&&this.deactivateChildRoutes(e,r,o.children)}else this.deactivateChildRoutes(e,r,t);else i&&this.deactivateRouteAndItsChildren(r,t)}deactivateRouteAndItsChildren(e,r){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,r):this.deactivateRouteAndOutlet(e,r)}detachAndStoreRouteSubtree(e,r){let t=r.getContext(e.value.outlet),s=t&&e.value.component?t.children:r,i=at(e);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);if(t&&t.outlet){let o=t.outlet.detach(),a=t.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,r){let t=r.getContext(e.value.outlet),s=t&&e.value.component?t.children:r,i=at(e);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);t&&(t.outlet&&(t.outlet.deactivate(),t.children.onOutletDeactivated()),t.attachRef=null,t.route=null)}activateChildRoutes(e,r,t){let s=at(r);e.children.forEach(i=>{this.activateRoutes(i,s[i.value.outlet],t),this.forwardEvent(new ii(i.value.snapshot))}),e.children.length&&this.forwardEvent(new ni(e.value.snapshot))}activateRoutes(e,r,t){let s=e.value,i=r?r.value:null;if(Vs(s),s===i)if(s.component){let o=t.getOrCreateContext(s.outlet);this.activateChildRoutes(e,r,o.children)}else this.activateChildRoutes(e,r,t);else if(s.component){let o=t.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Vs(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=s,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,t)}},On=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ut=class{constructor(e,r){this.component=e,this.route=r}};function Yu(n,e,r){let t=n._root,s=e?e._root:null;return tr(t,s,r,[t.value])}function Zu(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function vt(n,e){let r=Symbol(),t=e.get(n,r);return t===r?typeof n=="function"&&!ao(n)?n:e.get(n):t}function tr(n,e,r,t,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=at(e);return n.children.forEach(o=>{Qu(o,i[o.value.outlet],r,t.concat([o.value]),s),delete i[o.value.outlet]}),Object.entries(i).forEach(([o,a])=>ir(a,r.getContext(o),s)),s}function Qu(n,e,r,t,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=n.value,o=e?e.value:null,a=r?r.getContext(n.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){let l=eh(o,i,i.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new On(t)):(i.data=o.data,i._resolvedData=o._resolvedData),i.component?tr(n,e,a?a.children:null,t,s):tr(n,e,r,t,s),l&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new ut(a.outlet.component,o))}else o&&ir(e,a,s),s.canActivateChecks.push(new On(t)),i.component?tr(n,null,a?a.children:null,t,s):tr(n,null,r,t,s);return s}function eh(n,e,r){if(typeof r=="function")return r(n,e);switch(r){case"pathParamsChange":return!ze(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ze(n.url,e.url)||!le(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!li(n,e)||!le(n.queryParams,e.queryParams);case"paramsChange":default:return!li(n,e)}}function ir(n,e,r){let t=at(n),s=n.value;Object.entries(t).forEach(([i,o])=>{s.component?e?ir(o,e.children.getContext(i),r):ir(o,null,r):ir(o,e,r)}),s.component?e&&e.outlet&&e.outlet.isActivated?r.canDeactivateChecks.push(new ut(e.outlet.component,s)):r.canDeactivateChecks.push(new ut(null,s)):r.canDeactivateChecks.push(new ut(null,s))}function vr(n){return typeof n=="function"}function th(n){return typeof n=="boolean"}function rh(n){return n&&vr(n.canLoad)}function nh(n){return n&&vr(n.canActivate)}function sh(n){return n&&vr(n.canActivateChild)}function ih(n){return n&&vr(n.canDeactivate)}function oh(n){return n&&vr(n.canMatch)}function Ba(n){return n instanceof Qi||n?.name==="EmptyError"}var dn=Symbol("INITIAL_VALUE");function gt(){return W(n=>Br(n.map(e=>e.pipe(ce(1),Vr(dn)))).pipe(I(e=>{for(let r of e)if(r!==!0){if(r===dn)return dn;if(r===!1||ah(r))return r}return!0}),q(e=>e!==dn),ce(1)))}function ah(n){return Be(n)||n instanceof ur}function ch(n,e){return z(r=>{let{targetSnapshot:t,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=r;return o.length===0&&i.length===0?_(N(m({},r),{guardsResult:!0})):lh(o,t,s,n).pipe(z(a=>a&&th(a)?uh(t,i,n,e):_(a)),I(a=>N(m({},r),{guardsResult:a})))})}function lh(n,e,r,t){return L(n).pipe(z(s=>gh(s.component,s.route,r,e,t)),Te(s=>s!==!0,!0))}function uh(n,e,r,t){return L(e).pipe(Ee(s=>eo(dh(s.route.parent,t),hh(s.route,t),ph(n,s.path,r),fh(n,s.route,r))),Te(s=>s!==!0,!0))}function hh(n,e){return n!==null&&e&&e(new si(n)),_(!0)}function dh(n,e){return n!==null&&e&&e(new ri(n)),_(!0)}function fh(n,e,r){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return _(!0);let s=t.map(i=>gs(()=>{let o=gr(e)??r,a=vt(i,o),l=nh(a)?a.canActivate(e,n):Y(o,()=>a(e,n));return De(l).pipe(Te())}));return _(s).pipe(gt())}function ph(n,e,r){let t=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(o=>Zu(o)).filter(o=>o!==null).map(o=>gs(()=>{let a=o.guards.map(l=>{let c=gr(o.node)??r,u=vt(l,c),h=sh(u)?u.canActivateChild(t,n):Y(c,()=>u(t,n));return De(h).pipe(Te())});return _(a).pipe(gt())}));return _(i).pipe(gt())}function gh(n,e,r,t,s){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return _(!0);let o=i.map(a=>{let l=gr(e)??s,c=vt(a,l),u=ih(c)?c.canDeactivate(n,e,r,t):Y(l,()=>c(n,e,r,t));return De(u).pipe(Te())});return _(o).pipe(gt())}function mh(n,e,r,t){let s=e.canLoad;if(s===void 0||s.length===0)return _(!0);let i=s.map(o=>{let a=vt(o,n),l=rh(a)?a.canLoad(e,r):Y(n,()=>a(e,r));return De(l)});return _(i).pipe(gt(),Va(t))}function Va(n){return Zi(U(e=>{if(typeof e!="boolean")throw Rn(n,e)}),I(e=>e===!0))}function vh(n,e,r,t){let s=e.canMatch;if(!s||s.length===0)return _(!0);let i=s.map(o=>{let a=vt(o,n),l=oh(a)?a.canMatch(e,r):Y(n,()=>a(e,r));return De(l)});return _(i).pipe(gt(),Va(t))}var hr=class{constructor(e){this.segmentGroup=e||null}},dr=class extends Error{constructor(e){super(),this.urlTree=e}};function ot(n){return ge(new hr(n))}function yh(n){return ge(new D(4e3,!1))}function wh(n){return ge(Fa(!1,J.GuardRejected))}var di=class{constructor(e,r){this.urlSerializer=e,this.urlTree=r}lineralizeSegments(e,r){let t=[],s=r.root;for(;;){if(t=t.concat(s.segments),s.numberOfChildren===0)return _(t);if(s.numberOfChildren>1||!s.children[T])return yh(`${e.redirectTo}`);s=s.children[T]}}applyRedirectCommands(e,r,t,s,i){if(typeof r!="string"){let a=r,{queryParams:l,fragment:c,routeConfig:u,url:h,outlet:f,params:p,data:y,title:b}=s,w=Y(i,()=>a({params:p,data:y,queryParams:l,fragment:c,routeConfig:u,url:h,outlet:f,title:b}));if(w instanceof be)throw new dr(w);r=w}let o=this.applyRedirectCreateUrlTree(r,this.urlSerializer.parse(r),e,t);if(r[0]==="/")throw new dr(o);return o}applyRedirectCreateUrlTree(e,r,t,s){let i=this.createSegmentGroup(e,r.root,t,s);return new be(i,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(e,r){let t={};return Object.entries(e).forEach(([s,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);t[s]=r[a]}else t[s]=i}),t}createSegmentGroup(e,r,t,s){let i=this.createSegments(e,r.segments,t,s),o={};return Object.entries(r.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,t,s)}),new x(i,o)}createSegments(e,r,t,s){return r.map(i=>i.path[0]===":"?this.findPosParam(e,i,s):this.findOrReturn(i,t))}findPosParam(e,r,t){let s=t[r.path.substring(1)];if(!s)throw new D(4001,!1);return s}findOrReturn(e,r){let t=0;for(let s of r){if(s.path===e.path)return r.splice(t),s;t++}return e}},fi={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bh(n,e,r,t,s){let i=qa(n,e,r);return i.matched?(t=Bu(e,t),vh(t,e,r,s).pipe(I(o=>o===!0?i:m({},fi)))):_(i)}function qa(n,e,r){if(e.path==="**")return Sh(r);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||r.length>0)?m({},fi):{matched:!0,consumedSegments:[],remainingSegments:r,parameters:{},positionalParamSegments:{}};let s=(e.matcher||mu)(r,n,e);if(!s)return m({},fi);let i={};Object.entries(s.posParams??{}).forEach(([a,l])=>{i[a]=l.path});let o=s.consumed.length>0?m(m({},i),s.consumed[s.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:s.consumed,remainingSegments:r.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function Sh(n){return{matched:!0,parameters:n.length>0?Ea(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function ma(n,e,r,t){return r.length>0&&Th(n,r,t)?{segmentGroup:new x(e,Eh(t,new x(r,n.children))),slicedSegments:[]}:r.length===0&&Rh(n,r,t)?{segmentGroup:new x(n.segments,_h(n,r,t,n.children)),slicedSegments:r}:{segmentGroup:new x(n.segments,n.children),slicedSegments:r}}function _h(n,e,r,t){let s={};for(let i of r)if(Cn(n,e,i)&&!t[ne(i)]){let o=new x([],{});s[ne(i)]=o}return m(m({},t),s)}function Eh(n,e){let r={};r[T]=e;for(let t of n)if(t.path===""&&ne(t)!==T){let s=new x([],{});r[ne(t)]=s}return r}function Th(n,e,r){return r.some(t=>Cn(n,e,t)&&ne(t)!==T)}function Rh(n,e,r){return r.some(t=>Cn(n,e,t))}function Cn(n,e,r){return(n.hasChildren()||e.length>0)&&r.pathMatch==="full"?!1:r.path===""}function Oh(n,e,r){return e.length===0&&!n.children[r]}var pi=class{};function Ih(n,e,r,t,s,i,o="emptyOnly"){return new gi(n,e,r,t,s,o,i).recognize()}var Ah=31,gi=class{constructor(e,r,t,s,i,o,a){this.injector=e,this.configLoader=r,this.rootComponentType=t,this.config=s,this.urlTree=i,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new di(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new D(4002,`'${e.segmentGroup}'`)}recognize(){let e=ma(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(I(({children:r,rootSnapshot:t})=>{let s=new K(t,r),i=new Tn("",s),o=ju(t,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(o),{state:i,tree:o}}))}match(e){let r=new lt([],Object.freeze({}),Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),T,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,T,r).pipe(I(t=>({children:t,rootSnapshot:r})),ae(t=>{if(t instanceof dr)return this.urlTree=t.urlTree,this.match(t.urlTree.root);throw t instanceof hr?this.noMatchError(t):t}))}processSegmentGroup(e,r,t,s,i){return t.segments.length===0&&t.hasChildren()?this.processChildren(e,r,t,i):this.processSegment(e,r,t,t.segments,s,!0,i).pipe(I(o=>o instanceof K?[o]:[]))}processChildren(e,r,t,s){let i=[];for(let o of Object.keys(t.children))o==="primary"?i.unshift(o):i.push(o);return L(i).pipe(Ee(o=>{let a=t.children[o],l=Vu(r,o);return this.processSegmentGroup(e,l,a,o,s)}),oo((o,a)=>(o.push(...a),o)),Xe(null),so(),z(o=>{if(o===null)return ot(t);let a=Ga(o);return Ch(a),_(a)}))}processSegment(e,r,t,s,i,o,a){return L(r).pipe(Ee(l=>this.processSegmentAgainstRoute(l._injector??e,r,l,t,s,i,o,a).pipe(ae(c=>{if(c instanceof hr)return _(null);throw c}))),Te(l=>!!l),ae(l=>{if(Ba(l))return Oh(t,s,i)?_(new pi):ot(t);throw l}))}processSegmentAgainstRoute(e,r,t,s,i,o,a,l){return ne(t)!==o&&(o===T||!Cn(s,i,t))?ot(s):t.redirectTo===void 0?this.matchSegmentAgainstRoute(e,s,t,i,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,s,r,t,i,o,l):ot(s)}expandSegmentAgainstRouteUsingRedirect(e,r,t,s,i,o,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:h,remainingSegments:f}=qa(r,s,i);if(!l)return ot(r);typeof s.redirectTo=="string"&&s.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Ah&&(this.allowRedirects=!1));let p=new lt(i,c,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,va(s),ne(s),s.component??s._loadedComponent??null,s,ya(s)),y=En(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(y.params),p.data=Object.freeze(y.data);let b=this.applyRedirects.applyRedirectCommands(u,s.redirectTo,h,p,e);return this.applyRedirects.lineralizeSegments(s,b).pipe(z(w=>this.processSegment(e,t,r,w.concat(f),o,!1,a)))}matchSegmentAgainstRoute(e,r,t,s,i,o){let a=bh(r,t,s,e,this.urlSerializer);return t.path==="**"&&(r.children={}),a.pipe(W(l=>l.matched?(e=t._injector??e,this.getChildConfig(e,t,s).pipe(W(({routes:c})=>{let u=t._loadedInjector??e,{parameters:h,consumedSegments:f,remainingSegments:p}=l,y=new lt(f,h,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,va(t),ne(t),t.component??t._loadedComponent??null,t,ya(t)),b=En(y,o,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);let{segmentGroup:w,slicedSegments:E}=ma(r,f,p,c);if(E.length===0&&w.hasChildren())return this.processChildren(u,c,w,y).pipe(I(M=>new K(y,M)));if(c.length===0&&E.length===0)return _(new K(y,[]));let P=ne(t)===i;return this.processSegment(u,c,w,E,P?T:i,!0,y).pipe(I(M=>new K(y,M instanceof K?[M]:[])))}))):ot(r)))}getChildConfig(e,r,t){return r.children?_({routes:r.children,injector:e}):r.loadChildren?r._loadedRoutes!==void 0?_({routes:r._loadedRoutes,injector:r._loadedInjector}):mh(e,r,t,this.urlSerializer).pipe(z(s=>s?this.configLoader.loadChildren(e,r).pipe(U(i=>{r._loadedRoutes=i.routes,r._loadedInjector=i.injector})):wh(r))):_({routes:[],injector:e})}};function Ch(n){n.sort((e,r)=>e.value.outlet===T?-1:r.value.outlet===T?1:e.value.outlet.localeCompare(r.value.outlet))}function xh(n){let e=n.value.routeConfig;return e&&e.path===""}function Ga(n){let e=[],r=new Set;for(let t of n){if(!xh(t)){e.push(t);continue}let s=e.find(i=>t.value.routeConfig===i.value.routeConfig);s!==void 0?(s.children.push(...t.children),r.add(s)):e.push(t)}for(let t of r){let s=Ga(t.children);e.push(new K(t.value,s))}return e.filter(t=>!r.has(t))}function va(n){return n.data||{}}function ya(n){return n.resolve||{}}function Dh(n,e,r,t,s,i){return z(o=>Ih(n,e,r,t,o.extractedUrl,s,i).pipe(I(({state:a,tree:l})=>N(m({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function kh(n,e){return z(r=>{let{targetSnapshot:t,guards:{canActivateChecks:s}}=r;if(!s.length)return _(r);let i=new Set(s.map(l=>l.route)),o=new Set;for(let l of i)if(!o.has(l))for(let c of Ha(l))o.add(c);let a=0;return L(o).pipe(Ee(l=>i.has(l)?Ph(l,t,n,e):(l.data=En(l,l.parent,n).resolve,_(void 0))),U(()=>a++),vs(1),z(l=>a===o.size?_(r):oe))})}function Ha(n){let e=n.children.map(r=>Ha(r)).flat();return[n,...e]}function Ph(n,e,r,t){let s=n.routeConfig,i=n._resolve;return s?.title!==void 0&&!Ua(s)&&(i[pr]=s.title),Mh(i,n,e,t).pipe(I(o=>(n._resolvedData=o,n.data=En(n,n.parent,r).resolve,null)))}function Mh(n,e,r,t){let s=Hs(n);if(s.length===0)return _({});let i={};return L(s).pipe(z(o=>jh(n[o],e,r,t).pipe(Te(),U(a=>{if(a instanceof ur)throw Rn(new dt,a);i[o]=a}))),vs(1),to(i),ae(o=>Ba(o)?oe:ge(o)))}function jh(n,e,r,t){let s=gr(e)??t,i=vt(n,s),o=i.resolve?i.resolve(e,r):Y(s,()=>i(e,r));return De(o)}function qs(n){return W(e=>{let r=n(e);return r?L(r).pipe(I(()=>e)):_(e)})}var Wa=(()=>{let e=class e{buildTitle(t){let s,i=t.root;for(;i!==void 0;)s=this.getResolvedTitleForRoute(i)??s,i=i.children.find(o=>o.outlet===T);return s}getResolvedTitleForRoute(t){return t.data[pr]}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:()=>g(Nh),providedIn:"root"});let n=e;return n})(),Nh=(()=>{let e=class e extends Wa{constructor(t){super(),this.title=t}updateTitle(t){let s=this.buildTitle(t);s!==void 0&&this.title.setTitle(s)}};e.\u0275fac=function(s){return new(s||e)(v(ua))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),yr=new R("",{providedIn:"root",factory:()=>({})}),Lh=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=uo({type:e,selectors:[["ng-component"]],standalone:!0,features:[No],decls:1,vars:0,template:function(s,i){s&1&&Do(0,"router-outlet")},dependencies:[Gu],encapsulation:2});let n=e;return n})();function yi(n){let e=n.children&&n.children.map(yi),r=e?N(m({},n),{children:e}):m({},n);return!r.component&&!r.loadComponent&&(e||r.loadChildren)&&r.outlet&&r.outlet!==T&&(r.component=Lh),r}var fr=new R(""),wi=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=g(Xr)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return _(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let s=De(t.loadComponent()).pipe(I(Ka),U(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ye(()=>{this.componentLoaders.delete(t)})),i=new ps(s,()=>new H).pipe(fs());return this.componentLoaders.set(t,i),i}loadChildren(t,s){if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return _({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);let o=Uh(s,this.compiler,t,this.onLoadEndListener).pipe(Ye(()=>{this.childrenLoaders.delete(s)})),a=new ps(o,()=>new H).pipe(fs());return this.childrenLoaders.set(s,a),a}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Uh(n,e,r,t){return De(n.loadChildren()).pipe(I(Ka),z(s=>s instanceof Ao||Array.isArray(s)?_(s):L(e.compileModuleAsync(s))),I(s=>{t&&t(n);let i,o,a=!1;return Array.isArray(s)?(o=s,a=!0):(i=s.create(r).injector,o=i.get(fr,[],{optional:!0,self:!0}).flat()),{routes:o.map(yi),injector:i}}))}function $h(n){return n&&typeof n=="object"&&"default"in n}function Ka(n){return $h(n)?n.default:n}var bi=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:()=>g(Fh),providedIn:"root"});let n=e;return n})(),Fh=(()=>{let e=class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,s){return t}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ja=new R(""),Xa=new R("");function zh(n,e,r){let t=n.get(Xa),s=n.get(V);return n.get(j).runOutsideAngular(()=>{if(!s.startViewTransition||t.skipNextTransition)return t.skipNextTransition=!1,new Promise(c=>setTimeout(c));let i,o=new Promise(c=>{i=c}),a=s.startViewTransition(()=>(i(),Bh(n))),{onViewTransitionCreated:l}=t;return l&&Y(n,()=>l({transition:a,from:e,to:r})),o})}function Bh(n){return new Promise(e=>{Co({read:()=>setTimeout(e)},{injector:n})})}var Vh=new R(""),xn=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new H,this.transitionAbortSubject=new H,this.configLoader=g(wi),this.environmentInjector=g(Ue),this.urlSerializer=g(mt),this.rootContexts=g(mr),this.location=g(Gt),this.inputBindingEnabled=g(An,{optional:!0})!==null,this.titleStrategy=g(Wa),this.options=g(yr,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=g(bi),this.createViewTransition=g(Ja,{optional:!0}),this.navigationErrorHandler=g(Vh,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>_(void 0),this.rootComponentType=null;let t=i=>this.events.next(new ei(i)),s=i=>this.events.next(new ti(i));this.configLoader.onLoadEndListener=s,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let s=++this.navigationId;this.transitions?.next(N(m(m({},this.transitions.value),t),{id:s}))}setupNavigations(t,s,i){return this.transitions=new B({id:0,currentUrlTree:s,currentRawUrl:s,extractedUrl:this.urlHandlingStrategy.extract(s),urlAfterRedirects:this.urlHandlingStrategy.extract(s),rawUrl:s,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:sr,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(q(o=>o.id!==0),I(o=>N(m({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),W(o=>{let a=!1,l=!1;return _(o).pipe(W(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",J.SupersededByNewNavigation),oe;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?N(m({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&h!=="reload"){let f="";return this.events.next(new Ce(c.id,this.urlSerializer.serialize(c.rawUrl),f,yn.IgnoredSameUrlNavigation)),c.resolve(!1),oe}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return _(c).pipe(W(f=>{let p=this.transitions?.getValue();return this.events.next(new ft(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),p!==this.transitions?.getValue()?oe:Promise.resolve(f)}),Dh(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),U(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=N(m({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let p=new wn(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:p,source:y,restoredState:b,extras:w}=c,E=new ft(f,this.urlSerializer.serialize(p),y,b);this.events.next(E);let P=Na(this.rootComponentType).snapshot;return this.currentTransition=o=N(m({},c),{targetSnapshot:P,urlAfterRedirects:p,extras:N(m({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,_(o)}else{let f="";return this.events.next(new Ce(c.id,this.urlSerializer.serialize(c.extractedUrl),f,yn.IgnoredByUrlHandlingStrategy)),c.resolve(!1),oe}}),U(c=>{let u=new Xs(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),I(c=>(this.currentTransition=o=N(m({},c),{guards:Yu(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),ch(this.environmentInjector,c=>this.events.next(c)),U(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Rn(this.urlSerializer,c.guardsResult);let u=new Ys(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),q(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",J.GuardRejected),!1)),qs(c=>{if(c.guards.canActivateChecks.length)return _(c).pipe(U(u=>{let h=new Zs(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),W(u=>{let h=!1;return _(u).pipe(kh(this.paramsInheritanceStrategy,this.environmentInjector),U({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",J.NoDataFromResolver)}}))}),U(u=>{let h=new Qs(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),qs(c=>{let u=h=>{let f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(U(p=>{h.component=p}),I(()=>{})));for(let p of h.children)f.push(...u(p));return f};return Br(u(c.targetSnapshot.root)).pipe(Xe(null),ce(1))}),qs(()=>this.afterPreactivation()),W(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return h?L(h).pipe(I(()=>o)):_(o)}),I(c=>{let u=Hu(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=N(m({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),U(()=>{this.events.next(new cr)}),Xu(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ce(1),U({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new se(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Re(this.transitionAbortSubject.pipe(U(c=>{throw c}))),Ye(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",J.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ae(c=>{if(l=!0,za(c))this.events.next(new we(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),Ju(c)?this.events.next(new pt(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let u=new ar(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let h=Y(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(h instanceof ur){let{message:f,cancellationCode:p}=Rn(this.urlSerializer,h);this.events.next(new we(o.id,this.urlSerializer.serialize(o.extractedUrl),f,p)),this.events.next(new pt(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(u);let f=t.errorHandler(c);o.resolve(!!f)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return oe}))}))}cancelNavigationTransition(t,s,i){let o=new we(t.id,this.urlSerializer.serialize(t.extractedUrl),s,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),s=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==s?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function qh(n){return n!==sr}var Gh=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:()=>g(Hh),providedIn:"root"});let n=e;return n})(),mi=class{shouldDetach(e){return!1}store(e,r){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,r){return e.routeConfig===r.routeConfig}},Hh=(()=>{let e=class e extends mi{};e.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ze(e)))(i||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ya=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:()=>g(Wh),providedIn:"root"});let n=e;return n})(),Wh=(()=>{let e=class e extends Ya{constructor(){super(...arguments),this.location=g(Gt),this.urlSerializer=g(mt),this.options=g(yr,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=g(bi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new be,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Na(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(s=>{s.type==="popstate"&&t(s.url,s.state)})}handleRouterEvent(t,s){if(t instanceof ft)this.stateMemento=this.createStateMemento();else if(t instanceof Ce)this.rawUrlTree=s.initialUrl;else if(t instanceof wn){if(this.urlUpdateStrategy==="eager"&&!s.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(s.finalUrl,s.initialUrl);this.setBrowserUrl(s.targetBrowserUrl??i,s)}}else t instanceof cr?(this.currentUrlTree=s.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(s.finalUrl,s.initialUrl),this.routerState=s.targetRouterState,this.urlUpdateStrategy==="deferred"&&!s.extras.skipLocationChange&&this.setBrowserUrl(s.targetBrowserUrl??this.rawUrlTree,s)):t instanceof we&&(t.code===J.GuardRejected||t.code===J.NoDataFromResolver)?this.restoreHistory(s):t instanceof ar?this.restoreHistory(s,!0):t instanceof se&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,s){let i=t instanceof be?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||s.extras.replaceUrl){let o=this.browserPageId,a=m(m({},s.extras.state),this.generateNgRouterState(s.id,o));this.location.replaceState(i,"",a)}else{let o=m(m({},s.extras.state),this.generateNgRouterState(s.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,s=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(s&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,s){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:s}:{navigationId:t}}};e.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ze(e)))(i||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),rr=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(rr||{});function Za(n,e){n.events.pipe(q(r=>r instanceof se||r instanceof we||r instanceof ar||r instanceof Ce),I(r=>r instanceof se||r instanceof Ce?rr.COMPLETE:(r instanceof we?r.code===J.Redirect||r.code===J.SupersededByNewNavigation:!1)?rr.REDIRECTING:rr.FAILED),q(r=>r!==rr.REDIRECTING),ce(1)).subscribe(()=>{e()})}function Kh(n){throw n}var Jh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Xh={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ue=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=g(Kr),this.stateManager=g(Ya),this.options=g(yr,{optional:!0})||{},this.pendingTasks=g(Wr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=g(xn),this.urlSerializer=g(mt),this.location=g(Gt),this.urlHandlingStrategy=g(bi),this._events=new H,this.errorHandler=this.options.errorHandler||Kh,this.navigated=!1,this.routeReuseStrategy=g(Gh),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=g(fr,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!g(An,{optional:!0}),this.eventsSubscription=new Yi,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(s=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(s,o),s instanceof we&&s.code!==J.Redirect&&s.code!==J.SupersededByNewNavigation)this.navigated=!0;else if(s instanceof se)this.navigated=!0;else if(s instanceof pt){let a=s.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(s.url,i.currentRawUrl),c=m({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||qh(i.source)},a);this.scheduleNavigation(l,sr,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Zh(s)&&this._events.next(s)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),sr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,s)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",s)},0)})}navigateToSyncWithBrowser(t,s,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let c=m({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(t);this.scheduleNavigation(l,s,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(yi),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,s={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=s,u=c?this.currentUrlTree.fragment:a,h=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":h=m(m({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let p=i?i.snapshot:this.routerState.snapshot.root;f=ka(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return Pa(f,t,h,u??null)}navigateByUrl(t,s={skipLocationChange:!1}){let i=Be(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,sr,null,s)}navigate(t,s={skipLocationChange:!1}){return Yh(t),this.navigateByUrl(this.createUrlTree(t,s),s)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,s){let i;if(s===!0?i=m({},Jh):s===!1?i=m({},Xh):i=s,Be(t))return ha(this.currentUrlTree,t,i);let o=this.parseUrl(t);return ha(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((s,[i,o])=>(o!=null&&(s[i]=o),s),{})}scheduleNavigation(t,s,i,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((f,p)=>{l=f,c=p});let h=this.pendingTasks.add();return Za(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:s,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Yh(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new D(4008,!1)}function Zh(n){return!(n instanceof cr)&&!(n instanceof pt)}var wa=(()=>{let e=class e{constructor(t,s,i,o,a,l){this.router=t,this.route=s,this.tabIndexAttribute=i,this.renderer=o,this.el=a,this.locationStrategy=l,this.href=null,this.onChanges=new H,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof se&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Be(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,s,i,o,a){let l=this.urlTree;if(l===null||this.isAnchorElement&&(t!==0||s||i||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let s=this.href===null?null:Eo(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",s)}applyAttributeValue(t,s){let i=this.renderer,o=this.el.nativeElement;s!==null?i.setAttribute(o,t,s):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Be(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(s){return new(s||e)(re(ue),re(xe),fo("tabindex"),re(Ts),re(Ss),re(qt))},e.\u0275dir=qr({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(s,i){s&1&&ko("click",function(a){return i.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),s&2&&xo("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Zr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Zr],replaceUrl:[2,"replaceUrl","replaceUrl",Zr],routerLink:"routerLink"},standalone:!0,features:[Io,Gr]});let n=e;return n})(),rg=(()=>{let e=class e{get isActive(){return this._isActive}constructor(t,s,i,o,a){this.router=t,this.element=s,this.renderer=i,this.cdr=o,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new et,this.routerEventsSubscription=t.events.subscribe(l=>{l instanceof se&&this.update()})}ngAfterContentInit(){_(this.links.changes,_(null)).pipe(Nt()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(s=>!!s).map(s=>s.onChanges);this.linkInputChangesSubscription=L(t).pipe(Nt()).subscribe(s=>{this._isActive!==this.isLinkActive(this.router)(s)&&this.update()})}set routerLinkActive(t){let s=Array.isArray(t)?t:t.split(" ");this.classes=s.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(s=>{t?this.renderer.addClass(this.element.nativeElement,s):this.renderer.removeClass(this.element.nativeElement,s)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let s=Qh(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,s):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}};e.\u0275fac=function(s){return new(s||e)(re(ue),re(Ss),re(Ts),re(Yr),re(wa,8))},e.\u0275dir=qr({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(s,i,o){if(s&1&&Po(o,wa,5),s&2){let a;Mo(a=jo())&&(i.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Gr]});let n=e;return n})();function Qh(n){return!!n.paths}var In=class{};var ed=(()=>{let e=class e{constructor(t,s,i,o,a){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(q(t=>t instanceof se),Ee(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,s){let i=[];for(let o of s){o.providers&&!o._injector&&(o._injector=Os(o.providers,t,`Route: ${o.path}`));let a=o._injector??t,l=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(l,o.children??o._loadedRoutes))}return L(i).pipe(Nt())}preloadConfig(t,s){return this.preloadingStrategy.preload(s,()=>{let i;s.loadChildren&&s.canLoad===void 0?i=this.loader.loadChildren(t,s):i=_(null);let o=i.pipe(z(a=>a===null?_(void 0):(s._loadedRoutes=a.routes,s._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(s.loadComponent&&!s._loadedComponent){let a=this.loader.loadComponent(s);return L([o,a]).pipe(Nt())}else return o})}};e.\u0275fac=function(s){return new(s||e)(v(ue),v(Xr),v(Ue),v(In),v(wi))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Si=new R(""),Qa=(()=>{let e=class e{constructor(t,s,i,o,a={}){this.urlSerializer=t,this.transitions=s,this.viewportScroller=i,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ft?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof se?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ce&&t.code===yn.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof bn&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,s){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new bn(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,s))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(s){To()},e.\u0275prov=S({token:e,factory:e.\u0275fac});let n=e;return n})();function ng(n,...e){return me([{provide:fr,multi:!0,useValue:n},[],{provide:xe,useFactory:ec,deps:[ue]},{provide:nt,multi:!0,useFactory:tc},e.map(r=>r.\u0275providers)])}function ec(n){return n.routerState.root}function yt(n,e){return{\u0275kind:n,\u0275providers:e}}function sg(n={}){return yt(4,[{provide:Si,useFactory:()=>{let r=g(Cs),t=g(j),s=g(xn),i=g(mt);return new Qa(i,s,r,t,n)}}])}function tc(){let n=g(Qe);return e=>{let r=n.get(Jr);if(e!==r.components[0])return;let t=n.get(ue),s=n.get(rc);n.get(_i)===1&&t.initialNavigation(),n.get(nc,null,ys.Optional)?.setUpPreloading(),n.get(Si,null,ys.Optional)?.init(),t.resetRootComponentType(r.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var rc=new R("",{factory:()=>new H}),_i=new R("",{providedIn:"root",factory:()=>1});function td(){return yt(2,[{provide:_i,useValue:0},{provide:Is,multi:!0,deps:[Qe],useFactory:e=>{let r=e.get(Bo,Promise.resolve());return()=>r.then(()=>new Promise(t=>{let s=e.get(ue),i=e.get(rc);Za(s,()=>{t(!0)}),e.get(xn).afterPreactivation=()=>(t(!0),i.closed?_(void 0):i),s.initialNavigation()}))}}])}function rd(){return yt(3,[{provide:Is,multi:!0,useFactory:()=>{let e=g(ue);return()=>{e.setUpLocationChangeListener()}}},{provide:_i,useValue:2}])}var nc=new R("");function nd(n){return yt(0,[{provide:nc,useExisting:ed},{provide:In,useExisting:n}])}function sd(){return yt(8,[ga,{provide:An,useExisting:ga}])}function id(n){let e=[{provide:Ja,useValue:zh},{provide:Xa,useValue:m({skipNextTransition:!!n?.skipInitialTransition},n)}];return yt(9,e)}var ba=new R("ROUTER_FORROOT_GUARD"),od=[Gt,{provide:mt,useClass:dt},ue,mr,{provide:xe,useFactory:ec,deps:[ue]},wi,[]],ig=(()=>{let e=class e{constructor(t){}static forRoot(t,s){return{ngModule:e,providers:[od,[],{provide:fr,multi:!0,useValue:t},{provide:ba,useFactory:ud,deps:[[ue,new ws,new co]]},{provide:yr,useValue:s||{}},s?.useHash?cd():ld(),ad(),s?.preloadingStrategy?nd(s.preloadingStrategy).\u0275providers:[],s?.initialNavigation?hd(s):[],s?.bindToComponentInputs?sd().\u0275providers:[],s?.enableViewTransitions?id().\u0275providers:[],dd()]}}static forChild(t){return{ngModule:e,providers:[{provide:fr,multi:!0,useValue:t}]}}};e.\u0275fac=function(s){return new(s||e)(v(ba,8))},e.\u0275mod=Ft({type:e}),e.\u0275inj=Lt({});let n=e;return n})();function ad(){return{provide:Si,useFactory:()=>{let n=g(Cs),e=g(j),r=g(yr),t=g(xn),s=g(mt);return r.scrollOffset&&n.setOffset(r.scrollOffset),new Qa(s,t,n,e,r)}}}function cd(){return{provide:qt,useClass:qo}}function ld(){return{provide:qt,useClass:Vo}}function ud(n){return"guarded"}function hd(n){return[n.initialNavigation==="disabled"?rd().\u0275providers:[],n.initialNavigation==="enabledBlocking"?td().\u0275providers:[]]}var Sa=new R("");function dd(){return[{provide:Sa,useFactory:tc},{provide:nt,multi:!0,useExisting:Sa}]}function fd(n){n||(bs(fd),n=g(Hr));let e=new pe(r=>n.onDestroy(r.next.bind(r)));return r=>r.pipe(Re(e))}function Ei(n,e){let r=!e?.manualCleanup;r&&!e?.injector&&bs(Ei);let t=r?e?.injector?.get(Hr)??g(Hr):null,s=pd(e?.equal),i;e?.requireSync?i=Rs({kind:0},{equal:s}):i=Rs({kind:1,value:e?.initialValue},{equal:s});let o=n.subscribe({next:a=>i.set({kind:1,value:a}),error:a=>{if(e?.rejectErrors)throw a;i.set({kind:2,error:a})}});if(e?.requireSync&&i().kind===0)throw new D(601,!1);return t?.onDestroy(o.unsubscribe.bind(o)),Qr(()=>{let a=i();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new D(601,!1)}},{equal:e?.equal})}function pd(n=Object.is){return(e,r)=>e.kind===1&&r.kind===1&&n(e.value,r.value)}var he="NGXS_META",Oi="NGXS_OPTIONS_META",Ti="NGXS_SELECTOR_META";function Ii(n){if(!n.hasOwnProperty(he)){let e={name:null,actions:{},defaults:{},path:null,makeRootSelector(r){return r.getStateGetter(e.name)},children:[]};Object.defineProperty(n,he,{value:e})}return wt(n)}function wt(n){return n[he]}function sc(n){return n.hasOwnProperty(Ti)||Object.defineProperty(n,Ti,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),Ai(n)}function Ai(n){return n[Ti]}function gd(n,e){return n===e}function md(n,e,r){if(e===null||r===null||e.length!==r.length)return!1;let t=e.length;for(let s=0;s<t;s++)if(!n(e[s],r[s]))return!1;return!0}function kn(n,e=gd){let r=null,t=null;function s(){return md(e,r,arguments)||(t=n.apply(null,arguments)),r=arguments,t}return s.reset=function(){r=null,t=null},s}var vd=!1,yd=(()=>{let e=class e{static set(t){this._value=t}static pop(){let t=this._value;return this._value={},t}};e._value={};let n=e;return n})(),Ci=new R(vd?"INITIAL_STATE_TOKEN":"",{providedIn:"root",factory:()=>yd.pop()}),Pn=(()=>{let e=class e extends Mt{constructor(){super(1)}bootstrap(){this.next(!0),this.complete()}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ic=!1,oc=new R(ic?"\u0275NGXS_STATE_FACTORY":""),ac=new R(ic?"\u0275NGXS_STATE_CONTEXT_FACTORY":"");function cc(n){let e=[],r=!1;return function(...s){if(r){e.unshift(s);return}for(r=!0,n(...s);e.length>0;){let i=e.pop();i&&n(...i)}r=!1}}var Dn=class extends H{constructor(){super(...arguments),this._orderedNext=cc(e=>super.next(e))}next(e){this._orderedNext(e)}},Ri=class extends B{constructor(e){super(e),this._orderedNext=cc(r=>super.next(r)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}};function xi(n){return e=>new pe(r=>e.subscribe({next(t){n(()=>r.next(t))},error(t){n(()=>r.error(t))},complete(){n(()=>r.complete())}}))}var Mn=(()=>{let e=class e extends Ri{constructor(){super({}),this.state=Ei(this.pipe(xi(As)),{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.complete()}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var jn=(()=>{let e=class e{};e.type="@@INIT";let n=e;return n})(),Nn=(()=>{let e=class e{constructor(t){this.addedStates=t}};e.type="@@UPDATE_STATE";let n=e;return n})(),bd=!1,Di=new R(bd?"NGXS_PLUGINS":"");function wr(n){return n.constructor?.type||n.type}var ki=(n,e,r)=>{n=m({},n);let t=e.split("."),s=t.length-1;return t.reduce((i,o,a)=>(a===s?i[o]=r:i[o]=Array.isArray(i[o])?i[o].slice():m({},i[o]),i&&i[o]),n),n},Ln=(n,e)=>e.split(".").reduce((r,t)=>r&&r[t],n);function lc(n){return typeof n=="function"}var Sd=(()=>{let e=class e{enter(t){return t()}leave(t){return t()}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function _d(n,e,r){throw new Error(`State name '${n}' from ${e} already exists in ${r}.`)}function Ed(n){throw new Error(`States must be decorated with @State() decorator, but "${n}" isn't.`)}function Td(n){return`'${n}' class should be decorated with @Injectable() right after the @State() decorator`}function Rd(n){let e="You have an invalid state initialization order. This typically occurs when `NgxsModule.forFeature`\nor `provideStates` is called before `NgxsModule.forRoot` or `provideStore`.\nOne example is when `NgxsRouterPluginModule.forRoot` is called before `NgxsModule.forRoot`.";if(n){let r=Object.keys(n).map(t=>`"${t}"`);e+=`
Feature states added before the store initialization is complete: ${r.join(", ")}.`}return e}var mc=(()=>{let e=class e{constructor(t,s){this._ngZone=t,this._platformId=s}enter(t){return st(this._platformId)?this.runInsideAngular(t):this.runOutsideAngular(t)}leave(t){return this.runInsideAngular(t)}runInsideAngular(t){return j.isInAngularZone()?t():this._ngZone.run(t)}runOutsideAngular(t){return j.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()}};e.\u0275fac=function(s){return new(s||e)(v(j),v(ve))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var vc=!1,yc=new R(vc?"CUSTOM_NGXS_EXECUTION_STRATEGY":""),Od=new R(vc?"NGXS_EXECUTION_STRATEGY":"",{providedIn:"root",factory:()=>{let n=g(j),e=g(lo),r=e.get(yc),t=n instanceof j;return r?e.get(r):e.get(t?mc:Sd)}}),wc=(()=>{let e=class e{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}};e.\u0275fac=function(s){return new(s||e)(v(Od))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),bc=n=>(...e)=>n.shift()(...e,(...t)=>bc(n)(...t));function $n(n){return xi(e=>n.leave(e))}var Sc=(()=>{let e=class e extends Dn{ngOnDestroy(){this.complete()}};e.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ze(e)))(i||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Mi=(()=>{let e=class e{constructor(t,s){this._parentManager=t,this._pluginHandlers=s,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){let t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(s=>s.handle?s.handle.bind(s):s)}};e.\u0275fac=function(s){return new(s||e)(v(e,12),v(Di,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let n=e;return n})(),ji=new WeakMap,uc=ds.onUnhandledError;ds.onUnhandledError=function(n){let e=ji.get(n);if(e)e();else if(uc)uc.call(this,n);else throw n};function Id(n){let e=ji.get(n);return e?(e(),!0):!1}function Ad(n,e){if(n!==null&&typeof n=="object"){let r=!1;ji.set(n,()=>{r||(r=!0,e())})}return n}function Cd(n){return e=>{let r=e.subscribe({error:t=>{n.runOutsideAngular(()=>{queueMicrotask(()=>{r&&Id(t)})})}});return new pe(t=>(r?.unsubscribe(),r=null,e.subscribe(t)))}}var _c=(()=>{let e=class e extends H{};e.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ze(e)))(i||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),xd=(()=>{let e=class e{constructor(t,s,i,o,a,l){this._ngZone=t,this._actions=s,this._actionResults=i,this._pluginManager=o,this._stateStream=a,this._ngxsExecutionStrategy=l}dispatch(t){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t)).pipe(Cd(this._ngZone),$n(this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?t.length===0?_(void 0):ms(t.map(s=>this.dispatchSingle(s))).pipe(I(()=>{})):this.dispatchSingle(t)}dispatchSingle(t){let s=this._stateStream.getValue(),i=this._pluginManager.plugins;return bc([...i,(o,a)=>{o!==s&&this._stateStream.next(o);let l=this.getActionResultStream(a);return l.subscribe(c=>this._actions.next(c)),this._actions.next({action:a,status:"DISPATCHED"}),this.createDispatchObservable(l)}])(s,t).pipe(Le())}getActionResultStream(t){return this._actionResults.pipe(q(s=>s.action===t&&s.status!=="DISPATCHED"),ce(1),Le())}createDispatchObservable(t){return t.pipe(no(s=>{switch(s.status){case"SUCCESSFUL":return _(this._stateStream.getValue());case"ERRORED":return ge(()=>s.error);default:return oe}})).pipe(Le())}};e.\u0275fac=function(s){return new(s||e)(v(j),v(Sc),v(_c),v(Mi),v(Mn),v(wc))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ni=!1,Ec=new R(Ni?"ROOT_STATE_TOKEN":""),Tc=new R(Ni?"FEATURE_STATE_TOKEN":""),Rc=new R(Ni?"NGXS_OPTIONS":""),br=(()=>{let e=class e{constructor(){this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=mc,this.selectorOptions={injectContainerState:!1,suppressErrors:!1}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:()=>(()=>{let t=new e,s=g(Rc);return N(m(m({},t),s),{selectorOptions:m(m({},t.selectorOptions),s.selectorOptions)})})(),providedIn:"root"});let n=e;return n})(),Pi=class{constructor(e,r,t){this.previousValue=e,this.currentValue=r,this.firstChange=t}};var Sr=(()=>{let e=class e{constructor(t,s,i){this._stateStream=t,this._dispatcher=s,this._config=i}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:s=>this._stateStream.next(s),dispatch:s=>this._dispatcher.dispatch(s)}}setStateToTheCurrentWithNew(t){let s=this.getRootStateOperations(),i=s.getState();s.setState(m(m({},i),t.defaults))}};e.\u0275fac=function(s){return new(s||e)(v(Mn),v(xd),v(br))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Dd=!1;function kd(n,e,r){return t=>{let{argumentSelectorFunctions:s,selectorOptions:i}=Md(t,n,e),{suppressErrors:o}=i;return function(l){let c=s.map(u=>u(l));try{return r(...c)}catch(u){if(o&&u instanceof TypeError)return;throw Dd&&console.error("The selector below has thrown an error upon invocation. Please check for any unsafe property access that may result in null or undefined values.",n.originalFn),u}}}}function Pd(n,e){let r=e&&e.containerClass,s=kn(function(...o){let a=n.apply(r,o);return a instanceof Function?kn.apply(null,[a]):a});return Object.setPrototypeOf(s,n),s}function Md(n,e,r=[]){let t=e.getSelectorOptions(),s=n.getSelectorOptions(t),o=jd(r,s,e.containerClass).map(a=>Oc(a)(n));return{selectorOptions:s,argumentSelectorFunctions:o}}function jd(n=[],e,r){let t=[],s=e.injectContainerState||n.length===0;return r&&s&&wt(r)&&t.push(r),t.push(...n),t}function Oc(n){let e=Ai(n)||wt(n);return e&&e.makeRootSelector||(()=>n)}var Li=!1;function Nd(n){return e=>{for(let r=0;r<n.length;r++){if(!e)return;e=e[n[r]]}return e}}function Ld(n){let e=n,r="store."+e[0],t=0,s=e.length,i=r;for(;++t<s;)i=i+" && "+(r=r+"."+e[t]);return new Function("store","return "+i+";")}var Ud=new R(Li?"PROP_GETTER":"",{providedIn:"root",factory:()=>g(br).compatibility?.strictContentSecurityPolicy?Nd:Ld});function $d(n){let e=r=>{let t=n.find(s=>s===r);if(Li&&!t)throw new Error(`Child state not found: ${r}. \r
You may have forgotten to add states to module`);return t[he].name};return n.reduce((r,t)=>{let{name:s,children:i}=t[he];return r[s]=(i||[]).map(e),r},{})}function Fd(n){return n.reduce((e,r)=>{let t=r[he];return e[t.name]=r,e},{})}function zd(n,e={}){let r=(t,s)=>{for(let i in t)if(t.hasOwnProperty(i)&&t[i].indexOf(s)>=0){let o=r(t,i);return o!==null?`${o}.${i}`:i}return null};for(let t in n)if(n.hasOwnProperty(t)){let s=r(n,t);e[t]=s?`${s}.${t}`:t}return e}function Bd(n){let e=[],r={},t=(s,i=[])=>{Array.isArray(i)||(i=[]),i.push(s),r[s]=!0,n[s].forEach(o=>{if(Li&&i.indexOf(o)>=0)throw new Error(`Circular dependency '${o}' is required by '${s}': ${i.join(" -> ")}`);r[o]||t(o,i.slice(0))}),e.indexOf(s)<0&&e.push(s)};return Object.keys(n).forEach(s=>t(s)),e.reverse()}function Vd(...n){return qd(n,["DISPATCHED"])}function qd(n,e,r=Hd){let t=Wd(n),s=e&&Kd(e);return function(i){return i.pipe(Gd(t,s),r())}}function Gd(n,e){return q(r=>{let t=wr(r.action),s=n[t],i=e?e[r.status]:!0;return s&&i})}function Hd(){return I(n=>n.action)}function Wd(n){return n.reduce((e,r)=>(e[wr(r)]=!0,e),{})}function Kd(n){return n.reduce((e,r)=>(e[r]=!0,e),{})}function Jd(n){return e=>{let r=m({},e);for(let t in n)r[t]=n[t];return r}}var Ui=(()=>{let e=class e{constructor(t){this._internalStateOperations=t}createStateContext(t){let s=this._internalStateOperations.getRootStateOperations();return{getState(){let i=s.getState();return Ac(i,t.path)},patchState(i){let o=s.getState(),a=Jd(i);hc(s,o,a,t.path)},setState(i){let o=s.getState();lc(i)?hc(s,o,i,t.path):Ic(s,o,i,t.path)},dispatch(i){return s.dispatch(i)}}}};e.\u0275fac=function(s){return new(s||e)(v(Sr))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Ic(n,e,r,t){let s=ki(e,t,r);return n.setState(s),s}function hc(n,e,r,t){let s=Ac(e,t),i=r(s);return Ic(n,e,i,t)}function Ac(n,e){return Ln(n,e)}var Lg=new RegExp("^[a-zA-Z0-9_]+$");function Xd(n,e,r){let t=r[n];t&&t!==e&&_d(n,e.name,t.name)}function Yd(n){n.forEach(e=>{wt(e)||Ed(e.name)})}function Zd(n){ef(n)||Qd(n)||console.warn(Td(n.name))}function Qd(n){return!!n.\u0275prov}function ef(n){return(n.__annotations__||[]).some(r=>r?.ngMetadataName==="Injectable")}var tf=!1,rf=new R(tf?"NGXS_DEVELOPMENT_OPTIONS":"",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})}),nf=(()=>{let e=class e{constructor(t){this._ignoredActions=new Set([jn.type,Nn.type]),typeof t.warnOnUnhandledActions=="object"&&this.ignoreActions(...t.warnOnUnhandledActions.ignore)}ignoreActions(...t){for(let s of t)this._ignoredActions.add(s.type)}warn(t){Array.from(this._ignoredActions).some(i=>i===wr(t))||(t=t.constructor&&t.constructor.name!=="Object"?t.constructor.name:t.type,console.warn(`The ${t} action has been dispatched but hasn't been handled. This may happen if the state with an action handler for this action is not registered.`))}};e.\u0275fac=function(s){return new(s||e)(v(rf))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let n=e;return n})(),sf=(()=>{let e=class e{constructor(){this._ngZone=g(j),this._errorHandler=g(zt)}handleError(t,s){this._ngZone.runOutsideAngular(()=>this._errorHandler.handleError(t))}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Un=!1;function of(n){let e=n===void 0?{}:n;return n&&(Array.isArray(n)?e=n.slice():typeof n=="object"&&(e=m({},n))),e}var bt=(()=>{let e=class e{constructor(t,s,i,o,a,l,c){this._injector=t,this._config=s,this._parentFactory=i,this._actions=o,this._actionResults=a,this._stateContextFactory=l,this._initialState=c,this._actionsSubscription=null,this._propGetter=g(Ud),this._ngxsUnhandledErrorHandler=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=kn(()=>{let u=this,h=u._propGetter;function f(y){let b=u.statePaths[y];return b?h(b.split(".")):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(y){let b=f(y);return b||((...w)=>(b||(b=f(y)),b?b(...w):void 0))},getSelectorOptions(y){let b=u._config.selectorOptions;return m(m({},b),y||{})}}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}ngOnDestroy(){this._actionsSubscription?.unsubscribe()}add(t){Un&&Yd(t);let{newStates:s}=this.addToStatesMap(t);if(!s.length)return[];let i=$d(s),o=Bd(i),a=zd(i),l=Fd(s),c=[];for(let u of o){let h=l[u],f=a[u],p=h[he];this.addRuntimeInfoToMeta(p,f),Un&&Zd(h);let y={name:u,path:f,isInitialised:!1,actions:p.actions,instance:this._injector.get(h),defaults:of(p.defaults)};this.hasBeenMountedAndBootstrapped(u,f)||c.push(y),this.states.push(y)}return c}addAndReturnDefaults(t){let s=t||[],i=this.add(s);return{defaults:i.reduce((a,l)=>ki(a,l.path,l.defaults),{}),states:i}}connectActionHandlers(){if(this._parentFactory||this._actionsSubscription!==null)return;let t=new H;this._actionsSubscription=this._actions.pipe(q(s=>s.status==="DISPATCHED"),z(s=>{t.next(s);let i=s.action;return this.invokeActions(t,i).pipe(I(()=>({action:i,status:"SUCCESSFUL"})),Xe({action:i,status:"CANCELED"}),ae(o=>{let a=this._ngxsUnhandledErrorHandler||=this._injector.get(sf),l=Ad(o,()=>a.handleError(o,{action:i}));return _({action:i,status:"ERRORED",error:l})}))})).subscribe(s=>this._actionResults.next(s))}invokeActions(t,s){let i=wr(s),o=[],a=!1;for(let l of this.states){let c=l.actions[i];if(c)for(let u of c){let h=this._stateContextFactory.createStateContext(l);try{let f=l.instance[u.fn](h,s);Vt(f)&&(f=L(f)),jt(f)?(f=f.pipe(z(p=>Vt(p)?L(p):jt(p)?p:_(p)),Xe({})),u.options.cancelUncompleted&&(f=f.pipe(Re(t.pipe(Vd(s)))))):f=_({}).pipe(Le()),o.push(f)}catch(f){o.push(ge(f))}a=!0}}if(Un&&!a){let l=this._injector.get(nf,null);l&&l.warn(s)}return o.length||o.push(_({})),ms(o)}addToStatesMap(t){let s=[],i=this.statesByName;for(let o of t){let a=wt(o).name;Un&&Xd(a,o,i),!i[a]&&(s.push(o),i[a]=o)}return{newStates:s}}addRuntimeInfoToMeta(t,s){this.statePaths[t.name]=s,t.path=s}hasBeenMountedAndBootstrapped(t,s){let i=Ln(this._initialState,s)!==void 0;return this.statesByName[t]&&i}};e.\u0275fac=function(s){return new(s||e)(v(Qe),v(br),v(e,12),v(Sc),v(_c),v(Ui),v(Ci,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let n=e;return n})(),St=(()=>{let e=class e{constructor(t,s,i,o,a,l){this._stateStream=t,this._internalStateOperations=s,this._config=i,this._internalExecutionStrategy=o,this._stateFactory=a,this._selectableStateStream=this._stateStream.pipe($n(this._internalExecutionStrategy),Le({bufferSize:1,refCount:!0})),this.initStateStream(l)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){let s=this.getStoreBoundSelectorFn(t);return this._selectableStateStream.pipe(I(s),ae(i=>this._config.selectorOptions.suppressErrors&&i instanceof TypeError?_(void 0):ge(i)),ro(),$n(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(ce(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}selectSignal(t){let s=this.getStoreBoundSelectorFn(t);return Qr(()=>s(this._stateStream.state()))}subscribe(t){return this._selectableStateStream.pipe($n(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){let s=Oc(t),i=this._stateFactory.getRuntimeSelectorContext();return s(i)}initStateStream(t){let s=this._stateStream.value;(!s||Object.keys(s).length===0)&&this._stateStream.next(t)}};e.\u0275fac=function(s){return new(s||e)(v(Mn),v(Sr),v(br),v(wc),v(bt),v(Ci,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),af=!1,cf=new R(af?"NGXS_PREBOOT_FNS":"");var lf=(()=>{let e=class e{constructor(t,s){e.store=t,e.config=s}ngOnDestroy(){e.store=null,e.config=null}};e.store=null,e.config=null,e.\u0275fac=function(s){return new(s||e)(v(St),v(br))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),uf=!1,Cc=(()=>{let e=class e{constructor(t,s,i,o){this._store=t,this._internalStateOperations=s,this._stateContextFactory=i,this._appBootstrappedState=o,this._destroy$=new Mt(1)}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(t,s){uf&&(t instanceof jn?this._initStateHasBeenDispatched=!0:t instanceof Nn&&!this._initStateHasBeenDispatched&&console.error(Rd(t.addedStates))),this._internalStateOperations.getRootStateOperations().dispatch(t).pipe(q(()=>!!s),U(()=>this._invokeInitOnStates(s.states)),z(()=>this._appBootstrappedState),q(i=>!!i),Re(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(s.states))}_invokeInitOnStates(t){for(let s of t){let i=s.instance;i.ngxsOnChanges&&this._store.select(o=>Ln(o,s.path)).pipe(Vr(void 0),io(),Re(this._destroy$)).subscribe(([o,a])=>{let l=new Pi(o,a,!s.isInitialised);i.ngxsOnChanges(l)}),i.ngxsOnInit&&i.ngxsOnInit(this._getStateContext(s)),s.isInitialised=!0}}_invokeBootstrapOnStates(t){for(let s of t){let i=s.instance;i.ngxsAfterBootstrap&&i.ngxsAfterBootstrap(this._getStateContext(s))}}_getStateContext(t){return this._stateContextFactory.createStateContext(t)}};e.\u0275fac=function(s){return new(s||e)(v(St),v(Sr),v(Ui),v(Pn))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),xc=!1;function hf(){(g(cf,{optional:!0})||[]).forEach(o=>o());let e=g(bt),r=g(Sr);g(St),g(lf);let t=g(Ec,{optional:!0})||[],s=g(Cc),i=e.addAndReturnDefaults(t);r.setStateToTheCurrentWithNew(i),e.connectActionHandlers(),s.ngxsBootstrap(new jn,i)}function df(){g(St);let n=g(Sr),e=g(bt),r=g(Tc,{optional:!0})||[],t=g(Cc),s=r.reduce((o,a)=>o.concat(a),[]),i=e.addAndReturnDefaults(s);i.states.length&&(n.setStateToTheCurrentWithNew(i),t.ngxsBootstrap(new Nn(i.defaults),i))}var dc=new R(xc?"NGXS_ROOT_STORE_INITIALIZER":""),fc=new R(xc?"NGXS_FEATURE_STORE_INITIALIZER":""),ff=[{provide:dc,useFactory:hf},{provide:Ut,multi:!0,useFactory(){return()=>g(dc)}}],pf=[{provide:fc,useFactory:df},{provide:Ut,multi:!0,useFactory(){return()=>g(fc)}}];function gf(n,e){return[bt,Mi,...n,{provide:Ec,useValue:n},{provide:nt,useFactory:()=>{let r=g(Pn);return()=>r.bootstrap()},multi:!0},{provide:Rc,useValue:e},{provide:yc,useValue:e.executionStrategy},{provide:ac,useExisting:Ui},{provide:oc,useExisting:bt}]}function mf(n){return[bt,Mi,...n,{provide:Tc,multi:!0,useValue:n}]}function Dc(n,e){return(r,t,s)=>{let i=Ii(r.constructor),o=Array.isArray(n)?n:[n];for(let a of o){let l=a.type;i.actions[l]||(i.actions[l]=[]),i.actions[l].push({fn:t,options:e||{},type:l})}}}function kc(n){return e=>{let r=e,t=Ii(r),s=Object.getPrototypeOf(r),i=vf(s,n);yf({meta:t,inheritedStateClass:s,optionsWithInheritance:i}),r[Oi]=i}}function vf(n,e){let r=n[Oi]||{};return m(m({},r),e)}function yf(n){let{meta:e,inheritedStateClass:r,optionsWithInheritance:t}=n,{children:s,defaults:i,name:o}=t,a=typeof o=="string"?o:o&&o.getName()||null;if(r.hasOwnProperty(he)){let l=r[he]||{};e.actions=m(m({},e.actions),l.actions)}e.children=s,e.defaults=i,e.name=a}var pc="NGXS_SELECTOR_OPTIONS_META",gc={getOptions:n=>n&&n[pc]||{},defineOptions:(n,e)=>{n&&(n[pc]=e)}};function wf(n,e){let r=sc(n);r.originalFn=n;let t=()=>({});e&&(r.containerClass=e.containerClass,r.selectorName=e.selectorName||null,t=e.getSelectorOptions||t);let s=m({},r);return r.getSelectorOptions=()=>bf(s,t()),r}function bf(n,e){return m(m(m(m({},gc.getOptions(n.containerClass)||{}),gc.getOptions(n.originalFn)||{}),n.getSelectorOptions()||{}),e)}function Sf(n,e,r){let t=Pd(e,r),s=wf(e,r);return s.makeRootSelector=kd(s,n,t),t}function Pc(n){return(e,r,t)=>{t||=Object.getOwnPropertyDescriptor(e,r);let s=t?.value,i=Sf(n,s,{containerClass:e,selectorName:r.toString(),getSelectorOptions(){return{}}});return{configurable:!0,get(){return i},originalFn:s}}}function Ug(n=[],...e){let r=[],t={};return e.length>0&&(_f(e[0])?r.push(...e):(t=e[0],r.push(...e.slice(1)))),me([...gf(n,t),ff,r])}function _f(n){return!!n.\u0275providers}function $g(n,...e){return me([...mf(n),e,pf])}function Fg(n){return me([{provide:Di,useClass:n,multi:!0}])}function zg(n){return g(St).selectSignal(n)}function Mc(n){let e=g(St);return(...r)=>e.dispatch(new n(...r))}var zn=(()=>{class n{session;static type="[Session] Set Auth Session";constructor(r){this.session=r}}return n})(),Bn=class Fn{static session(e){return e.session}setAuthSession(e,r){r?.session&&e.patchState({session:r.session})}static \u0275fac=function(r){return new(r||Fn)};static \u0275prov=S({token:Fn,factory:Fn.\u0275fac})};zr([Dc(zn),Ne("design:type",Function),Ne("design:paramtypes",[Object,zn]),Ne("design:returntype",void 0)],Bn.prototype,"setAuthSession",null);zr([Pc(),Ne("design:type",Function),Ne("design:paramtypes",[Object]),Ne("design:returntype",void 0)],Bn,"session",null);Bn=zr([kc({name:"session_state",defaults:{session:void 0}})],Bn);var jc=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...r)=>import("./chunk-AEV6P355.js").then(({default:t})=>t(...r)):e=fetch,(...r)=>e(...r)};var _r=class extends Error{constructor(e,r="FunctionsError",t){super(e),this.name=r,this.context=t}},Vn=class extends _r{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},qn=class extends _r{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Gn=class extends _r{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var Ef=function(n,e,r,t){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(t.next(u))}catch(h){o(h)}}function l(u){try{c(t.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((t=t.apply(n,e||[])).next())})},Er=class{constructor(e,{headers:r={},customFetch:t}={}){this.url=e,this.headers=r,this.fetch=jc(t)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var t;return Ef(this,void 0,void 0,function*(){try{let{headers:s,method:i,body:o}=r,a={},l;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));let c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:l}).catch(p=>{throw new Vn(p)}),u=c.headers.get("x-relay-error");if(u&&u==="true")throw new qn(c);if(!c.ok)throw new Gn(c);let h=((t=c.headers.get("Content-Type"))!==null&&t!==void 0?t:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield c.json():h==="application/octet-stream"?f=yield c.blob():h==="multipart/form-data"?f=yield c.formData():f=yield c.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}};var Hn=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};var Tr=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=nn:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let t=this.fetch,s=t(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(i=>d(this,null,function*(){var o,a,l;let c=null,u=null,h=null,f=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){let E=yield i.text();E===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=E:u=JSON.parse(E))}let b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");b&&w&&w.length>1&&(h=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{let b=yield i.text();try{c=JSON.parse(b),Array.isArray(c)&&i.status===404&&(u=[],c=null,f=200,p="OK")}catch{i.status===404&&b===""?(f=204,p="No Content"):c={message:b}}if(c&&this.isMaybeSingle&&(!((l=c?.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new Hn(c)}return{error:c,data:u,count:h,status:f,statusText:p}}));return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:`${(a=i?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}};var Rr=class extends Tr{select(e){let r=!1,t=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",t),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:t,foreignTable:s,referencedTable:i=s}={}){let o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${r?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:t=r}={}){let s=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:t,referencedTable:s=t}={}){let i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:t=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;let l=[e?"analyze":null,r?"verbose":null,t?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};var ie=class extends Rr{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){let t=r.map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${t})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:t,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");let o=t===void 0?"":`(${t})`;return this.url.searchParams.append(e,`${i}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,t])=>{this.url.searchParams.append(r,`eq.${t}`)}),this}not(e,r,t){return this.url.searchParams.append(e,`not.${r}.${t}`),this}or(e,{foreignTable:r,referencedTable:t=r}={}){let s=t?`${t}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,t){return this.url.searchParams.append(e,`${r}.${t}`),this}};var Or=class{constructor(e,{headers:r={},schema:t,fetch:s}){this.url=e,this.headers=r,this.schema=t,this.fetch=s}select(e,{head:r=!1,count:t}={}){let s=r?"HEAD":"GET",i=!1,o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),t&&(this.headers.Prefer=`count=${t}`),new ie({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:t=!0}={}){let s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),t||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){let o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){let a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ie({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:t=!1,count:s,defaultToNull:i=!0}={}){let o="POST",a=[`resolution=${t?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){let l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){let c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new ie({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){let t="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new ie({method:t,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let r="DELETE",t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new ie({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var Nc="1.9.2";var Lc={"X-Client-Info":`postgrest-js/${Nc}`};var Ir=class n{constructor(e,{headers:r={},schema:t,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Lc),r),this.schemaName=t,this.fetch=s}from(e){let r=new URL(`${this.url}/${e}`);return new Or(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new n(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:t=!1,count:s}={}){let i,o=new URL(`${this.url}/rpc/${e}`),a;t?(i="HEAD",Object.entries(r).forEach(([c,u])=>{o.searchParams.append(c,`${u}`)})):(i="POST",a=r);let l=Object.assign({},this.headers);return s&&(l.Prefer=`count=${s}`),new ie({method:i,url:o,headers:l,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}};var Uc="2.9.3";var $c={"X-Client-Info":`realtime-js/${Uc}`},Fc="1.0.0",Wn=1e4,zc=1e3,_t=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(_t||{}),X=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(X||{}),Q=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(Q||{}),$i=function(n){return n.websocket="websocket",n}($i||{}),Ve=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(Ve||{});var Et=class{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Kn=class{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){let r=new DataView(e),t=new TextDecoder;return this._decodeBroadcast(e,r,t)}_decodeBroadcast(e,r,t){let s=r.getUint8(1),i=r.getUint8(2),o=this.HEADER_LENGTH+2,a=t.decode(e.slice(o,o+s));o=o+s;let l=t.decode(e.slice(o,o+i));o=o+i;let c=JSON.parse(t.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}};var Tt=class{constructor(e,r,t={},s=Wn){this.channel=e,this.event=r,this.payload=t,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var t;return this._hasReceived(e)&&r((t=this.receivedResp)===null||t===void 0?void 0:t.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(t=>t.status===e).forEach(t=>t.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var Ar=class n{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let t=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(t.state,{},s=>{let{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=n.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(t.diff,{},s=>{let{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=n.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,t,s){let i=this.cloneDeep(e),o=this.transformState(r),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{let h=i[c];if(h){let f=u.map(w=>w.presence_ref),p=h.map(w=>w.presence_ref),y=u.filter(w=>p.indexOf(w.presence_ref)<0),b=h.filter(w=>f.indexOf(w.presence_ref)<0);y.length>0&&(a[c]=y),b.length>0&&(l[c]=b)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},t,s)}static syncDiff(e,r,t,s){let{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return t||(t=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;let u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){let h=e[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}t(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;let u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(t=>r(t,e[t]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,t)=>{let s=e[t];return"metas"in s?r[t]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[t]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var k=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(k||{}),zi=(n,e,r={})=>{var t;let s=(t=r.skipTypes)!==null&&t!==void 0?t:[];return Object.keys(e).reduce((i,o)=>(i[o]=Tf(o,n,e,s),i),{})},Tf=(n,e,r,t)=>{let s=e.find(a=>a.name===n),i=s?.type,o=r[n];return i&&!t.includes(i)?Bc(i,o):Fi(o)},Bc=(n,e)=>{if(n.charAt(0)==="_"){let r=n.slice(1,n.length);return Af(e,r)}switch(n){case k.bool:return Rf(e);case k.float4:case k.float8:case k.int2:case k.int4:case k.int8:case k.numeric:case k.oid:return Of(e);case k.json:case k.jsonb:return If(e);case k.timestamp:return Cf(e);case k.abstime:case k.date:case k.daterange:case k.int4range:case k.int8range:case k.money:case k.reltime:case k.text:case k.time:case k.timestamptz:case k.timetz:case k.tsrange:case k.tstzrange:return Fi(e);default:return Fi(e)}},Fi=n=>n,Rf=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Of=n=>{if(typeof n=="string"){let e=parseFloat(n);if(!Number.isNaN(e))return e}return n},If=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Af=(n,e)=>{if(typeof n!="string")return n;let r=n.length-1,t=n[r];if(n[0]==="{"&&t==="}"){let i,o=n.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Bc(e,a))}return n},Cf=n=>typeof n=="string"?n.replace(" ","T"):n;var Cr=class n{constructor(e,r={config:{}},t){this.topic=e,this.params=r,this.socket=t,this.bindings={},this.state=X.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},r.config),this.timeout=this.socket.timeout,this.joinPush=new Tt(this,Q.join,this.params,this.timeout),this.rejoinTimer=new Et(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=X.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=X.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=X.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=X.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Q.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Ar(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,r=this.timeout){var t,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:i,presence:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));let a={},l={broadcast:i,presence:o,postgres_changes:(s=(t=this.bindings.postgres_changes)===null||t===void 0?void 0:t.map(c=>c.filter))!==null&&s!==void 0?s:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{let h=this.bindings.postgres_changes,f=(u=h?.length)!==null&&u!==void 0?u:0,p=[];for(let y=0;y<f;y++){let b=h[y],{filter:{event:w,schema:E,table:P,filter:M}}=b,C=c&&c[y];if(C&&C.event===w&&C.schema===E&&C.table===P&&C.filter===M)p.push(Object.assign(Object.assign({},b),{id:C.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(t){return d(this,arguments,function*(e,r={}){return yield this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)})}untrack(){return d(this,arguments,function*(e={}){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,r,t){return this._on(e,r,t)}send(t){return d(this,arguments,function*(e,r={}){var s,i;if(!this._canPush()&&e.type==="broadcast"){let{event:o,payload:a}=e,l={method:"POST",headers:{apikey:(s=this.socket.apiKey)!==null&&s!==void 0?s:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a}]})};try{return(yield this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=r.timeout)!==null&&i!==void 0?i:this.timeout)).ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,c;let u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=X.leaving;let r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Q.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(t=>{let s=new Tt(this,Q.leave,{},e);s.receive("ok",()=>{r(),t("ok")}).receive("timeout",()=>{r(),t("timed out")}).receive("error",()=>{t("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}_fetchWithTimeout(e,r,t){return d(this,null,function*(){let s=new AbortController,i=setTimeout(()=>s.abort(),t),o=yield this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o})}_push(e,r,t=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Tt(this,e,r,t);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,r,t){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,t){var s,i;let o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Q;if(t&&[a,l,c,u].indexOf(o)>=0&&t!==this._joinRef())return;let f=this._onMessage(o,r,t);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var y,b,w;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(b=p.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(p=>p.callback(f,t)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var y,b,w,E,P,M;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){let C=p.id,G=(y=p.filter)===null||y===void 0?void 0:y.event;return C&&((b=r.ids)===null||b===void 0?void 0:b.includes(C))&&(G==="*"||G?.toLocaleLowerCase()===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{let C=(P=(E=p?.filter)===null||E===void 0?void 0:E.event)===null||P===void 0?void 0:P.toLocaleLowerCase();return C==="*"||C===((M=r?.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){let y=f.data,{schema:b,table:w,commit_timestamp:E,type:P,errors:M}=y;f=Object.assign(Object.assign({},{schema:b,table:w,commit_timestamp:E,eventType:P,new:{},old:{},errors:M}),this._getPayloadRecords(y))}p.callback(f,t)})}_isClosed(){return this.state===X.closed}_isJoined(){return this.state===X.joined}_isJoining(){return this.state===X.joining}_isLeaving(){return this.state===X.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,t){let s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:t};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){let t=e.toLocaleLowerCase();return this.bindings[t]=this.bindings[t].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===t&&n.isEqual(s.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(let t in e)if(e[t]!==r[t])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Q.close,{},e)}_onError(e){this._on(Q.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=X.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=zi(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=zi(e.columns,e.old_record)),r}};var Df=()=>{},kf=typeof WebSocket<"u",xr=class{constructor(e,r){var t;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=$c,this.params={},this.timeout=Wn,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Df,this.conn=null,this.sendBuffer=[],this.serializer=new Kn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>import("./chunk-AEV6P355.js").then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${$i.websocket}`,r?.transport?this.transport=r.transport:this.transport=null,r?.params&&(this.params=r.params),r?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r?.timeout&&(this.timeout=r.timeout),r?.logger&&(this.logger=r.logger),r?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);let s=(t=r?.params)===null||t===void 0?void 0:t.apikey;s&&(this.accessToken=s,this.apiKey=s),this.reconnectAfterMs=r?.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r?.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r?.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Et(()=>d(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(kf){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Bi(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),import("./chunk-WMWYEAXO.js").then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return d(this,null,function*(){let r=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),r})}removeAllChannels(){return d(this,null,function*(){let e=yield Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),e})}log(e,r,t){this.logger(e,r,t)}connectionState(){switch(this.conn&&this.conn.readyState){case _t.connecting:return Ve.Connecting;case _t.open:return Ve.Open;case _t.closing:return Ve.Closing;default:return Ve.Closed}}isConnected(){return this.connectionState()===Ve.Open}channel(e,r={config:{}}){let t=new Cr(`realtime:${e}`,r,this);return this.channels.push(t),t}push(e){let{topic:r,event:t,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${t} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(r=>{e&&r.updateJoinPayload({access_token:e}),r.joinedOnce&&r._isJoined()&&r._push(Q.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Fc}))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:t,event:s,payload:i,ref:o}=r;(o&&o===this.pendingHeartbeatRef||s===i?.type)&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${t} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(t)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(r))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Q.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;let t=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${t}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(zc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}};var Bi=class{constructor(e,r,t){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=_t.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=t.close}};var Rt=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function F(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Jn=class extends Rt{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Dr=class extends Rt{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}};var Pf=function(n,e,r,t){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(t.next(u))}catch(h){o(h)}}function l(u){try{c(t.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((t=t.apply(n,e||[])).next())})},Xn=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...r)=>import("./chunk-AEV6P355.js").then(({default:t})=>t(...r)):e=fetch,(...r)=>e(...r)},Vc=()=>Pf(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-AEV6P355.js")).Response:Response});var Ot=function(n,e,r,t){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(t.next(u))}catch(h){o(h)}}function l(u){try{c(t.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((t=t.apply(n,e||[])).next())})},Vi=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Mf=(n,e)=>Ot(void 0,void 0,void 0,function*(){let r=yield Vc();n instanceof r?n.json().then(t=>{e(new Jn(Vi(t),n.status||500))}).catch(t=>{e(new Dr(Vi(t),t))}):e(new Dr(Vi(n),n))}),jf=(n,e,r,t)=>{let s={method:n,headers:e?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(t),Object.assign(Object.assign({},s),r))};function Yn(n,e,r,t,s,i){return Ot(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(r,jf(e,t,s,i)).then(l=>{if(!l.ok)throw l;return t?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Mf(l,a))})})}function kr(n,e,r,t){return Ot(this,void 0,void 0,function*(){return Yn(n,"GET",e,r,t)})}function de(n,e,r,t,s){return Ot(this,void 0,void 0,function*(){return Yn(n,"POST",e,t,s,r)})}function qc(n,e,r,t,s){return Ot(this,void 0,void 0,function*(){return Yn(n,"PUT",e,t,s,r)})}function Zn(n,e,r,t,s){return Ot(this,void 0,void 0,function*(){return Yn(n,"DELETE",e,t,s,r)})}var ee=function(n,e,r,t){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(t.next(u))}catch(h){o(h)}}function l(u){try{c(t.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((t=t.apply(n,e||[])).next())})},Nf={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Qn=class{constructor(e,r={},t,s){this.url=e,this.headers=r,this.bucketId=t,this.fetch=Xn(s)}uploadOrUpdate(e,r,t,s){return ee(this,void 0,void 0,function*(){try{let i,o=Object.assign(Object.assign({},Gc),s),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&t instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",t)):typeof FormData<"u"&&t instanceof FormData?(i=t,i.append("cacheControl",o.cacheControl)):(i=t,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);let l=this._removeEmptyFolders(r),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:a},o?.duplex?{duplex:o.duplex}:{})),h=yield u.json();return u.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(F(i))return{data:null,error:i};throw i}})}upload(e,r,t){return ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,t)})}uploadToSignedUrl(e,r,t,s){return ee(this,void 0,void 0,function*(){let i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l,c=Object.assign({upsert:Gc.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&t instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",t)):typeof FormData<"u"&&t instanceof FormData?(l=t,l.append("cacheControl",c.cacheControl)):(l=t,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);let h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(F(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return ee(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),t=yield de(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:this.headers}),s=new URL(this.url+t.url),i=s.searchParams.get("token");if(!i)throw new Rt("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(r){if(F(r))return{data:null,error:r};throw r}})}update(e,r,t){return ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,t)})}move(e,r){return ee(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers}),error:null}}catch(t){if(F(t))return{data:null,error:t};throw t}})}copy(e,r){return ee(this,void 0,void 0,function*(){try{return{data:{path:(yield de(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers})).Key},error:null}}catch(t){if(F(t))return{data:null,error:t};throw t}})}createSignedUrl(e,r,t){return ee(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield de(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},t?.transform?{transform:t.transform}:{}),{headers:this.headers}),o=t?.download?`&download=${t.download===!0?"":t.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(F(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,t){return ee(this,void 0,void 0,function*(){try{let s=yield de(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=t?.download?`&download=${t.download===!0?"":t.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(F(s))return{data:null,error:s};throw s}})}download(e,r){return ee(this,void 0,void 0,function*(){let s=typeof r?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(r?.transform||{}),o=i?`?${i}`:"";try{let a=this._getFinalPath(e);return{data:yield(yield kr(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(F(a))return{data:null,error:a};throw a}})}getPublicUrl(e,r){let t=this._getFinalPath(e),s=[],i=r?.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);let a=typeof r?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(r?.transform||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${t}${c}`)}}}remove(e){return ee(this,void 0,void 0,function*(){try{return{data:yield Zn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(F(r))return{data:null,error:r};throw r}})}list(e,r,t){return ee(this,void 0,void 0,function*(){try{let s=Object.assign(Object.assign(Object.assign({},Nf),r),{prefix:e||""});return{data:yield de(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(F(s))return{data:null,error:s};throw s}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}};var Hc="2.5.5";var Wc={"X-Client-Info":`storage-js/${Hc}`};var It=function(n,e,r,t){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(t.next(u))}catch(h){o(h)}}function l(u){try{c(t.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((t=t.apply(n,e||[])).next())})},es=class{constructor(e,r={},t){this.url=e,this.headers=Object.assign(Object.assign({},Wc),r),this.fetch=Xn(t)}listBuckets(){return It(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(F(e))return{data:null,error:e};throw e}})}getBucket(e){return It(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(F(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return It(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(F(t))return{data:null,error:t};throw t}})}updateBucket(e,r){return It(this,void 0,void 0,function*(){try{return{data:yield qc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(F(t))return{data:null,error:t};throw t}})}emptyBucket(e){return It(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(F(r))return{data:null,error:r};throw r}})}deleteBucket(e){return It(this,void 0,void 0,function*(){try{return{data:yield Zn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(F(r))return{data:null,error:r};throw r}})}};var Pr=class extends es{constructor(e,r={},t){super(e,r,t)}from(e){return new Qn(this.url,this.headers,e,this.fetch)}};var Kc="2.40.0";var Mr="";typeof Deno<"u"?Mr="deno":typeof document<"u"?Mr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Mr="react-native":Mr="node";var Lf={"X-Client-Info":`supabase-js-${Mr}/${Kc}`},Jc={headers:Lf},Xc={schema:"public"},Yc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Zc={};var Uf=function(n,e,r,t){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(t.next(u))}catch(h){o(h)}}function l(u){try{c(t.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((t=t.apply(n,e||[])).next())})},$f=n=>{let e;return n?e=n:typeof fetch>"u"?e=nn:e=fetch,(...r)=>e(...r)},Ff=()=>typeof Headers>"u"?Ho:Headers,Qc=(n,e,r)=>{let t=$f(r),s=Ff();return(i,o)=>Uf(void 0,void 0,void 0,function*(){var a;let l=(a=yield e())!==null&&a!==void 0?a:n,c=new s(o?.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),t(i,Object.assign(Object.assign({},o),{headers:c}))})};function el(n){return n.replace(/\/$/,"")}function tl(n,e){let{db:r,auth:t,realtime:s,global:i}=n,{db:o,auth:a,realtime:l,global:c}=e;return{db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},a),t),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),i)}}function rl(n){return Math.round(Date.now()/1e3)+n}function nl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}var te=()=>typeof document<"u",qe={tested:!1,writable:!1},ke=()=>{if(!te())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qe.tested)return qe.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),qe.tested=!0,qe.writable=!0}catch{qe.tested=!0,qe.writable=!1}return qe.writable};function ts(n){let e={},r=new URL(n);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((t,s)=>{e[s]=t}),e}var rs=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...r)=>import("./chunk-AEV6P355.js").then(({default:t})=>t(...r)):e=fetch,(...r)=>e(...r)},sl=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Pe=(n,e,r)=>d(void 0,null,function*(){yield n.setItem(e,JSON.stringify(r))}),Nr=(n,e)=>d(void 0,null,function*(){let r=yield n.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}}),ns=(n,e)=>d(void 0,null,function*(){yield n.removeItem(e)});function zf(n){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="",t,s,i,o,a,l,c,u=0;for(n=n.replace("-","+").replace("_","/");u<n.length;)o=e.indexOf(n.charAt(u++)),a=e.indexOf(n.charAt(u++)),l=e.indexOf(n.charAt(u++)),c=e.indexOf(n.charAt(u++)),t=o<<2|a>>4,s=(a&15)<<4|l>>2,i=(l&3)<<6|c,r=r+String.fromCharCode(t),l!=64&&s!=0&&(r=r+String.fromCharCode(s)),c!=64&&i!=0&&(r=r+String.fromCharCode(i));return r}var jr=class n{constructor(){this.promise=new n.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}};jr.promiseConstructor=Promise;function qi(n){let e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=n.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");let t=r[1];return JSON.parse(zf(t))}function il(n){return d(this,null,function*(){return yield new Promise(e=>{setTimeout(()=>e(null),n)})})}function ol(n,e){return new Promise((t,s)=>{d(this,null,function*(){for(let i=0;i<1/0;i++)try{let o=yield n(i);if(!e(i,null,o)){t(o);return}}catch(o){if(!e(i,o)){s(o);return}}})})}function Bf(n){return("0"+n.toString(16)).substr(-2)}function Ge(){let e=new Uint32Array(56);if(typeof crypto>"u"){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=r.length,s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,Bf).join("")}function Vf(n){return d(this,null,function*(){let r=new TextEncoder().encode(n),t=yield crypto.subtle.digest("SHA-256",r),s=new Uint8Array(t);return Array.from(s).map(i=>String.fromCharCode(i)).join("")})}function qf(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function He(n){return d(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let r=yield Vf(n);return qf(r)})}var Lr=class extends Error{constructor(e,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r}};function O(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var ss=class extends Lr{constructor(e,r){super(e,r),this.name="AuthApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}};function al(n){return O(n)&&n.name==="AuthApiError"}var At=class extends Lr{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}},Se=class extends Lr{constructor(e,r,t){super(e),this.name=r,this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}},_e=class extends Se{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}},Ct=class extends Se{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}},We=class extends Se{constructor(e){super(e,"AuthInvalidCredentialsError",400)}},Ke=class extends Se{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Ur=class extends Se{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},xt=class extends Se{constructor(e,r){super(e,"AuthRetryableFetchError",r)}};function os(n){return O(n)&&n.name==="AuthRetryableFetchError"}var is=class extends Se{constructor(e,r,t){super(e,"AuthWeakPasswordError",r),this.reasons=t}};var Gf=function(n,e){var r={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&e.indexOf(t)<0&&(r[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(n);s<t.length;s++)e.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(n,t[s])&&(r[t[s]]=n[t[s]]);return r},Dt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Hf=[502,503,504];function cl(n){return d(this,null,function*(){if(!sl(n))throw new xt(Dt(n),0);if(Hf.includes(n.status))throw new xt(Dt(n),n.status);let e;try{e=yield n.json()}catch(r){throw new At(Dt(r),r)}throw typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((r,t)=>r&&typeof t=="string",!0)?new is(Dt(e),n.status,e.weak_password.reasons):new ss(Dt(e),n.status||500)})}var Wf=(n,e,r,t)=>{let s={method:n,headers:e?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(t),Object.assign(Object.assign({},s),r))};function A(n,e,r,t){return d(this,null,function*(){var s;let i=Object.assign({},t?.headers);t?.jwt&&(i.Authorization=`Bearer ${t.jwt}`);let o=(s=t?.query)!==null&&s!==void 0?s:{};t?.redirectTo&&(o.redirect_to=t.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=yield Kf(n,e,r+a,{headers:i,noResolveJson:t?.noResolveJson},{},t?.body);return t?.xform?t?.xform(l):{data:Object.assign({},l),error:null}})}function Kf(n,e,r,t,s,i){return d(this,null,function*(){let o=Wf(e,t,s,i),a;try{a=yield n(r,o)}catch(l){throw console.error(l),new xt(Dt(l),0)}if(a.ok||(yield cl(a)),t?.noResolveJson)return a;try{return yield a.json()}catch(l){yield cl(l)}})}function Me(n){var e;let r=null;Jf(n)&&(r=Object.assign({},n),n.expires_at||(r.expires_at=rl(n.expires_in)));let t=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:r,user:t},error:null}}function Gi(n){let e=Me(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((r,t)=>r&&typeof t=="string",!0)&&(e.data.weak_password=n.weak_password),e}function fe(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function ll(n){return{data:n,error:null}}function ul(n){let{action_link:e,email_otp:r,hashed_token:t,redirect_to:s,verification_type:i}=n,o=Gf(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:t,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function hl(n){return n}function Jf(n){return n.access_token&&n.refresh_token&&n.expires_in}var Xf=function(n,e){var r={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&e.indexOf(t)<0&&(r[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(n);s<t.length;s++)e.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(n,t[s])&&(r[t[s]]=n[t[s]]);return r},kt=class{constructor({url:e="",headers:r={},fetch:t}){this.url=e,this.headers=r,this.fetch=rs(t),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e,r="global"){return d(this,null,function*(){try{return yield A(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(t){if(O(t))return{data:null,error:t};throw t}})}inviteUserByEmail(t){return d(this,arguments,function*(e,r={}){try{return yield A(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:fe})}catch(s){if(O(s))return{data:{user:null},error:s};throw s}})}generateLink(e){return d(this,null,function*(){try{let{options:r}=e,t=Xf(e,["options"]),s=Object.assign(Object.assign({},t),r);return"newEmail"in t&&(s.new_email=t?.newEmail,delete s.newEmail),yield A(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:ul,redirectTo:r?.redirectTo})}catch(r){if(O(r))return{data:{properties:null,user:null},error:r};throw r}})}createUser(e){return d(this,null,function*(){try{return yield A(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:fe})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}})}listUsers(e){return d(this,null,function*(){var r,t,s,i,o,a,l;try{let c={nextPage:null,lastPage:0,total:0},u=yield A(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(t=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&t!==void 0?t:"",per_page:(i=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:hl});if(u.error)throw u.error;let h=yield u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{let b=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);c[`${w}Page`]=b}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(O(c))return{data:{users:[]},error:c};throw c}})}getUserById(e){return d(this,null,function*(){try{return yield A(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:fe})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}})}updateUserById(e,r){return d(this,null,function*(){try{return yield A(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:fe})}catch(t){if(O(t))return{data:{user:null},error:t};throw t}})}deleteUser(e,r=!1){return d(this,null,function*(){try{return yield A(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:fe})}catch(t){if(O(t))return{data:{user:null},error:t};throw t}})}_listFactors(e){return d(this,null,function*(){try{let{data:r,error:t}=yield A(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:t}}catch(r){if(O(r))return{data:null,error:r};throw r}})}_deleteFactor(e){return d(this,null,function*(){try{return{data:yield A(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}})}};var as="0.0.0";var dl="http://localhost:9999",fl="supabase.auth.token";var pl={"X-Client-Info":`gotrue-js/${as}`},Hi=10;var gl={getItem:n=>ke()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{ke()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{ke()&&globalThis.localStorage.removeItem(n)}};function Wi(n={}){return{getItem:e=>n[e]||null,setItem:(e,r)=>{n[e]=r},removeItem:e=>{delete n[e]}}}function ml(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var Je={debug:!!(globalThis&&ke()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},$r=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},cs=class extends $r{};function Ki(n,e,r){return d(this,null,function*(){Je.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);let t=new globalThis.AbortController;return e>0&&setTimeout(()=>{t.abort(),Je.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),yield globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:t.signal},s=>d(this,null,function*(){if(s){Je.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return yield r()}finally{Je.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw Je.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new cs(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Je.debug)try{let i=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield r()}}))})}ml();var Yf={url:dl,storageKey:fl,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:pl,flowType:"implicit",debug:!1},Fr=30*1e3,vl=3;function yl(n,e,r){return d(this,null,function*(){return yield r()})}var ls=(()=>{class n{constructor(r){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&te()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let i=Object.assign(Object.assign({},Yf),r);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new kt({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=rs(i.fetch),this.lock=i.lock||yl,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,i.lock?this.lock=i.lock:te()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=Ki:this.lock=yl,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:ke()?this.storage=gl:(this.memoryStorage={},this.storage=Wi(this.memoryStorage)):(this.memoryStorage={},this.storage=Wi(this.memoryStorage)),te()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",o=>d(this,null,function*(){this._debug("received broadcast notification from other tab or client",o),yield this._notifyAllSubscribers(o.data.event,o.data.session,!1)}))}this.initialize()}_debug(...r){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${as}) ${new Date().toISOString()}`,...r),this}initialize(){return d(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=d(this,null,function*(){return yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return d(this,null,function*(){try{let r=te()?yield this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",r),r||this.detectSessionInUrl&&this._isImplicitGrantFlow()){let{data:t,error:s}=yield this._getSessionFromURL(r);if(s)return this._debug("#_initialize()","error detecting session from URL",s),s?.message==="Identity is already linked"||s?.message==="Identity is already linked to another user"?{error:s}:(yield this._removeSession(),{error:s});let{session:i,redirectType:o}=t;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),yield this._saveSession(i),setTimeout(()=>d(this,null,function*(){o==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",i):yield this._notifyAllSubscribers("SIGNED_IN",i)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return O(r)?{error:r}:{error:new At("Unexpected error during initialization",r)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signUp(r){return d(this,null,function*(){var t,s,i;try{yield this._removeSession();let o;if("email"in r){let{email:h,password:f,options:p}=r,y=null,b=null;if(this.flowType==="pkce"){let w=Ge();yield Pe(this.storage,`${this.storageKey}-code-verifier`,w),y=yield He(w),b=w===y?"plain":"s256"}o=yield A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p?.emailRedirectTo,body:{email:h,password:f,data:(t=p?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:y,code_challenge_method:b},xform:Me})}else if("phone"in r){let{phone:h,password:f,options:p}=r;o=yield A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(s=p?.data)!==null&&s!==void 0?s:{},channel:(i=p?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Me})}else throw new We("You must provide either an email or phone number and a password");let{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};let c=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(O(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithPassword(r){return d(this,null,function*(){try{yield this._removeSession();let t;if("email"in r){let{email:o,password:a,options:l}=r;t=yield A(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Gi})}else if("phone"in r){let{phone:o,password:a,options:l}=r;t=yield A(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Gi})}else throw new We("You must provide either an email or phone number and a password");let{data:s,error:i}=t;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Ct}:(s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(t){if(O(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOAuth(r){return d(this,null,function*(){var t,s,i,o;return yield this._removeSession(),yield this._handleProviderSignIn(r.provider,{redirectTo:(t=r.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=r.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=r.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=r.options)===null||o===void 0?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(r){return d(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>d(this,null,function*(){return this._exchangeCodeForSession(r)}))})}_exchangeCodeForSession(r){return d(this,null,function*(){let t=yield Nr(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(t??"").split("/"),{data:o,error:a}=yield A(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:s},xform:Me});return yield ns(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Ct}:(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})})}signInWithIdToken(r){return d(this,null,function*(){yield this._removeSession();try{let{options:t,provider:s,token:i,access_token:o,nonce:a}=r,l=yield A(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Me}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ct}:(c.session&&(yield this._saveSession(c.session),yield this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(t){if(O(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOtp(r){return d(this,null,function*(){var t,s,i,o,a;try{if(yield this._removeSession(),"email"in r){let{email:l,options:c}=r,u=null,h=null;if(this.flowType==="pkce"){let p=Ge();yield Pe(this.storage,`${this.storageKey}-code-verifier`,p),u=yield He(p),h=p===u?"plain":"s256"}let{error:f}=yield A(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in r){let{phone:l,options:c}=r,{data:u,error:h}=yield A(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c?.data)!==null&&i!==void 0?i:{},create_user:(o=c?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:h}}throw new We("You must provide either an email or phone number.")}catch(l){if(O(l))return{data:{user:null,session:null},error:l};throw l}})}verifyOtp(r){return d(this,null,function*(){var t,s;try{r.type!=="email_change"&&r.type!=="phone_change"&&(yield this._removeSession());let i,o;"options"in r&&(i=(t=r.options)===null||t===void 0?void 0:t.redirectTo,o=(s=r.options)===null||s===void 0?void 0:s.captchaToken);let{data:a,error:l}=yield A(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Me});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let c=a.session,u=a.user;return c?.access_token&&(yield this._saveSession(c),yield this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(O(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithSSO(r){return d(this,null,function*(){var t,s,i;try{yield this._removeSession();let o=null,a=null;if(this.flowType==="pkce"){let l=Ge();yield Pe(this.storage,`${this.storageKey}-code-verifier`,l),o=yield He(l),a=l===o?"plain":"s256"}return yield A(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(s=(t=r.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=r?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:ll})}catch(o){if(O(o))return{data:null,error:o};throw o}})}reauthenticate(){return d(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return d(this,null,function*(){try{return yield this._useSession(r=>d(this,null,function*(){let{data:{session:t},error:s}=r;if(s)throw s;if(!t)throw new _e;let{error:i}=yield A(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}}))}catch(r){if(O(r))return{data:{user:null,session:null},error:r};throw r}})}resend(r){return d(this,null,function*(){try{r.type!="email_change"&&r.type!="phone_change"&&(yield this._removeSession());let t=`${this.url}/resend`;if("email"in r){let{email:s,type:i,options:o}=r,{error:a}=yield A(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in r){let{phone:s,type:i,options:o}=r,{data:a,error:l}=yield A(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new We("You must provide either an email or phone number and a type")}catch(t){if(O(t))return{data:{user:null,session:null},error:t};throw t}})}getSession(){return d(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>d(this,null,function*(){return this._useSession(r=>d(this,null,function*(){return r}))}))})}_acquireLock(r,t){return d(this,null,function*(){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){let s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=d(this,null,function*(){return yield s,yield t()});return this.pendingInLock.push(d(this,null,function*(){try{yield i}catch{}})),i}return yield this.lock(`lock:${this.storageKey}`,r,()=>d(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let s=t();for(this.pendingInLock.push(d(this,null,function*(){try{yield s}catch{}})),yield s;this.pendingInLock.length;){let i=[...this.pendingInLock];yield Promise.all(i),this.pendingInLock.splice(0,i.length)}return yield s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(r){return d(this,null,function*(){this._debug("#_useSession","begin");try{let t=yield this.__loadSession();return yield r(t)}finally{this._debug("#_useSession","end")}})}__loadSession(){return d(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null,t=yield Nr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?r=t:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!r)return{data:{session:null},error:null};let s=r.expires_at?r.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",r.expires_at),!s)return{data:{session:r},error:null};let{session:i,error:o}=yield this._callRefreshToken(r.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(r){return d(this,null,function*(){return r?yield this._getUser(r):(yield this.initializePromise,this._acquireLock(-1,()=>d(this,null,function*(){return yield this._getUser()})))})}_getUser(r){return d(this,null,function*(){try{return r?yield A(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:fe}):yield this._useSession(t=>d(this,null,function*(){var s,i;let{data:o,error:a}=t;if(a)throw a;return yield A(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:fe})}))}catch(t){if(O(t))return{data:{user:null},error:t};throw t}})}updateUser(s){return d(this,arguments,function*(r,t={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._updateUser(r,t)}))})}_updateUser(s){return d(this,arguments,function*(r,t={}){try{return yield this._useSession(i=>d(this,null,function*(){let{data:o,error:a}=i;if(a)throw a;if(!o.session)throw new _e;let l=o.session,c=null,u=null;if(this.flowType==="pkce"&&r.email!=null){let p=Ge();yield Pe(this.storage,`${this.storageKey}-code-verifier`,p),c=yield He(p),u=p===c?"plain":"s256"}let{data:h,error:f}=yield A(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:c,code_challenge_method:u}),jwt:l.access_token,xform:fe});if(f)throw f;return l.user=h.user,yield this._saveSession(l),yield this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}}))}catch(i){if(O(i))return{data:{user:null},error:i};throw i}})}_decodeJWT(r){return qi(r)}setSession(r){return d(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._setSession(r)}))})}_setSession(r){return d(this,null,function*(){try{if(!r.access_token||!r.refresh_token)throw new _e;let t=Date.now()/1e3,s=t,i=!0,o=null,a=qi(r.access_token);if(a.exp&&(s=a.exp,i=s<=t),i){let{session:l,error:c}=yield this._callRefreshToken(r.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{let{data:l,error:c}=yield this._getUser(r.access_token);if(c)throw c;o={access_token:r.access_token,refresh_token:r.refresh_token,user:l.user,token_type:"bearer",expires_in:s-t,expires_at:s},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(O(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(r){return d(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._refreshSession(r)}))})}_refreshSession(r){return d(this,null,function*(){try{return yield this._useSession(t=>d(this,null,function*(){var s;if(!r){let{data:a,error:l}=t;if(l)throw l;r=(s=a.session)!==null&&s!==void 0?s:void 0}if(!r?.refresh_token)throw new _e;let{session:i,error:o}=yield this._callRefreshToken(r.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}}))}catch(t){if(O(t))return{data:{user:null,session:null},error:t};throw t}})}_getSessionFromURL(r){return d(this,null,function*(){try{if(!te())throw new Ke("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Ke("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!r)throw new Ur("Not a valid PKCE flow url.");let t=ts(window.location.href);if(r){if(!t.code)throw new Ur("No code detected.");let{data:M,error:C}=yield this._exchangeCodeForSession(t.code);if(C)throw C;let G=new URL(window.location.href);return G.searchParams.delete("code"),window.history.replaceState(window.history.state,"",G.toString()),{data:{session:M.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new Ke(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});let{provider_token:s,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!o||!l||!a||!u)throw new Ke("No session defined in URL");let h=Math.round(Date.now()/1e3),f=parseInt(l),p=h+f;c&&(p=parseInt(c));let y=p-h;y*1e3<=Fr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${f}s`);let b=p-f;h-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,p,h):h-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",b,p,h);let{data:w,error:E}=yield this._getUser(o);if(E)throw E;let P={provider_token:s,provider_refresh_token:i,access_token:o,expires_in:f,expires_at:p,refresh_token:a,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:P,redirectType:t.type},error:null}}catch(t){if(O(t))return{data:{session:null,redirectType:null},error:t};throw t}})}_isImplicitGrantFlow(){let r=ts(window.location.href);return!!(te()&&(r.access_token||r.error_description))}_isPKCEFlow(){return d(this,null,function*(){let r=ts(window.location.href),t=yield Nr(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&t)})}signOut(){return d(this,arguments,function*(r={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._signOut(r)}))})}_signOut(){return d(this,arguments,function*({scope:r}={scope:"global"}){return yield this._useSession(t=>d(this,null,function*(){var s;let{data:i,error:o}=t;if(o)return{error:o};let a=(s=i.session)===null||s===void 0?void 0:s.access_token;if(a){let{error:l}=yield this.admin.signOut(a,r);if(l&&!(al(l)&&(l.status===404||l.status===401)))return{error:l}}return r!=="others"&&(yield this._removeSession(),yield ns(this.storage,`${this.storageKey}-code-verifier`),yield this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}}))})}onAuthStateChange(r){let t=nl(),s={id:t,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),d(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){this._emitInitialSession(t)}))}),{data:{subscription:s}}}_emitInitialSession(r){return d(this,null,function*(){return yield this._useSession(t=>d(this,null,function*(){var s,i;try{let{data:{session:o},error:a}=t;if(a)throw a;yield(s=this.stateChangeEmitters.get(r))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o),this._debug("INITIAL_SESSION","callback id",r,"session",o)}catch(o){yield(i=this.stateChangeEmitters.get(r))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",r,"error",o),console.error(o)}}))})}resetPasswordForEmail(s){return d(this,arguments,function*(r,t={}){let i=null,o=null;if(this.flowType==="pkce"){let a=Ge();yield Pe(this.storage,`${this.storageKey}-code-verifier`,`${a}/PASSWORD_RECOVERY`),i=yield He(a),o=a===i?"plain":"s256"}try{return yield A(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(O(a))return{data:null,error:a};throw a}})}getUserIdentities(){return d(this,null,function*(){var r;try{let{data:t,error:s}=yield this.getUser();if(s)throw s;return{data:{identities:(r=t.user.identities)!==null&&r!==void 0?r:[]},error:null}}catch(t){if(O(t))return{data:null,error:t};throw t}})}linkIdentity(r){return d(this,null,function*(){var t;try{let{data:s,error:i}=yield this._useSession(o=>d(this,null,function*(){var a,l,c,u,h;let{data:f,error:p}=o;if(p)throw p;let y=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(a=r.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=r.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=r.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return yield A(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})}));if(i)throw i;return te()&&!(!((t=r.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:r.provider,url:s?.url},error:null}}catch(s){if(O(s))return{data:{provider:r.provider,url:null},error:s};throw s}})}unlinkIdentity(r){return d(this,null,function*(){try{return yield this._useSession(t=>d(this,null,function*(){var s,i;let{data:o,error:a}=t;if(a)throw a;return yield A(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})}))}catch(t){if(O(t))return{data:null,error:t};throw t}})}_refreshAccessToken(r){return d(this,null,function*(){let t=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(t,"begin");try{let s=Date.now();return yield ol(i=>d(this,null,function*(){return yield il(i*200),this._debug(t,"refreshing attempt",i),yield A(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Me})}),(i,o,a)=>a&&a.error&&os(a.error)&&Date.now()+(i+1)*200-s<Fr)}catch(s){if(this._debug(t,"error",s),O(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}})}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}_handleProviderSignIn(r,t){return d(this,null,function*(){let s=yield this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",t,"url",s),te()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:r,url:s},error:null}})}_recoverAndRefresh(){return d(this,null,function*(){var r;let t="#_recoverAndRefresh()";this._debug(t,"begin");try{let s=yield Nr(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&(yield this._removeSession());return}let i=Math.round(Date.now()/1e3),o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)<i+Hi;if(this._debug(t,`session has${o?"":" not"} expired with margin of ${Hi}s`),o){if(this.autoRefreshToken&&s.refresh_token){let{error:a}=yield this._callRefreshToken(s.refresh_token);a&&(console.error(a),os(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}})}_callRefreshToken(r){return d(this,null,function*(){var t,s;if(!r)throw new _e;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let i=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new jr;let{data:o,error:a}=yield this._refreshAccessToken(r);if(a)throw a;if(!o.session)throw new _e;yield this._saveSession(o.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(i,"error",o),O(o)){let a={session:null,error:o};return os(o)||(yield this._removeSession(),yield this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}})}_notifyAllSubscribers(r,t,s=!0){return d(this,null,function*(){let i=`#_notifyAllSubscribers(${r})`;this._debug(i,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:r,session:t});let o=[],a=Array.from(this.stateChangeEmitters.values()).map(l=>d(this,null,function*(){try{yield l.callback(r,t)}catch(c){o.push(c)}}));if(yield Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(i,"end")}})}_saveSession(r){return d(this,null,function*(){this._debug("#_saveSession()",r),yield Pe(this.storage,this.storageKey,r)})}_removeSession(){return d(this,null,function*(){this._debug("#_removeSession()"),yield ns(this.storage,this.storageKey)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&te()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(t){console.error("removing visibilitychange callback failed",t)}}_startAutoRefresh(){return d(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let r=setInterval(()=>this._autoRefreshTokenTick(),Fr);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(()=>d(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return d(this,null,function*(){this._debug("#_stopAutoRefresh()");let r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)})}startAutoRefresh(){return d(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return d(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return d(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>d(this,null,function*(){try{let r=Date.now();try{return yield this._useSession(t=>d(this,null,function*(){let{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let i=Math.floor((s.expires_at*1e3-r)/Fr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Fr}ms, refresh threshold is ${vl} ticks`),i<=vl&&(yield this._callRefreshToken(s.refresh_token))}))}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(r){if(r.isAcquireTimeout||r instanceof $r)this._debug("auto refresh token tick lock not available");else throw r}})}_handleVisibilityChange(){return d(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!te()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>d(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}})}_onVisibilityChanged(r){return d(this,null,function*(){let t=`#_onVisibilityChanged(${r})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(r,t,s){return d(this,null,function*(){let i=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){let o=Ge();yield Pe(this.storage,`${this.storageKey}-code-verifier`,o);let a=yield He(o),l=o===a?"plain":"s256";this._debug("PKCE","code verifier",`${o.substring(0,5)}...`,"code challenge",a,"method",l);let c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(c.toString())}if(s?.queryParams){let o=new URLSearchParams(s.queryParams);i.push(o.toString())}return s?.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${r}?${i.join("&")}`})}_unenroll(r){return d(this,null,function*(){try{return yield this._useSession(t=>d(this,null,function*(){var s;let{data:i,error:o}=t;return o?{data:null,error:o}:yield A(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})}))}catch(t){if(O(t))return{data:null,error:t};throw t}})}_enroll(r){return d(this,null,function*(){try{return yield this._useSession(t=>d(this,null,function*(){var s,i;let{data:o,error:a}=t;if(a)return{data:null,error:a};let{data:l,error:c}=yield A(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:r.friendlyName,factor_type:r.factorType,issuer:r.issuer},headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(!((i=l?.totp)===null||i===void 0)&&i.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})}))}catch(t){if(O(t))return{data:null,error:t};throw t}})}_verify(r){return d(this,null,function*(){return this._acquireLock(-1,()=>d(this,null,function*(){try{return yield this._useSession(t=>d(this,null,function*(){var s;let{data:i,error:o}=t;if(o)return{data:null,error:o};let{data:a,error:l}=yield A(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:{code:r.code,challenge_id:r.challengeId},headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})}))}catch(t){if(O(t))return{data:null,error:t};throw t}}))})}_challenge(r){return d(this,null,function*(){return this._acquireLock(-1,()=>d(this,null,function*(){try{return yield this._useSession(t=>d(this,null,function*(){var s;let{data:i,error:o}=t;return o?{data:null,error:o}:yield A(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})}))}catch(t){if(O(t))return{data:null,error:t};throw t}}))})}_challengeAndVerify(r){return d(this,null,function*(){let{data:t,error:s}=yield this._challenge({factorId:r.factorId});return s?{data:null,error:s}:yield this._verify({factorId:r.factorId,challengeId:t.id,code:r.code})})}_listFactors(){return d(this,null,function*(){let{data:{user:r},error:t}=yield this.getUser();if(t)return{data:null,error:t};let s=r?.factors||[],i=s.filter(o=>o.factor_type==="totp"&&o.status==="verified");return{data:{all:s,totp:i},error:null}})}_getAuthenticatorAssuranceLevel(){return d(this,null,function*(){return this._acquireLock(-1,()=>d(this,null,function*(){return yield this._useSession(r=>d(this,null,function*(){var t,s;let{data:{session:i},error:o}=r;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let a=this._decodeJWT(i.access_token),l=null;a.aal&&(l=a.aal);let c=l;((s=(t=i.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");let h=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}))})}}return n.nextInstanceID=0,n})();var us=class extends ls{constructor(e){super(e)}};var Zf=function(n,e,r,t){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(t.next(u))}catch(h){o(h)}}function l(u){try{c(t.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((t=t.apply(n,e||[])).next())})},hs=class{constructor(e,r,t){var s,i,o,a,l,c,u,h;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");let f=el(e);this.realtimeUrl=`${f}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${f}/auth/v1`,this.storageUrl=`${f}/storage/v1`,this.functionsUrl=`${f}/functions/v1`;let p=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,y={db:Xc,realtime:Zc,auth:Object.assign(Object.assign({},Yc),{storageKey:p}),global:Jc},b=tl(t??{},y);this.storageKey=(i=(s=b.auth)===null||s===void 0?void 0:s.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=(o=b.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=b.auth)!==null&&l!==void 0?l:{},this.headers,(c=b.global)===null||c===void 0?void 0:c.fetch),this.fetch=Qc(r,this._getAccessToken.bind(this),(u=b.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},b.realtime)),this.rest=new Ir(`${f}/rest/v1`,{headers:this.headers,schema:(h=b.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Er(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Pr(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},t={}){return this.rest.rpc(e,r,t)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Zf(this,void 0,void 0,function*(){let{data:t}=yield this.auth.getSession();return(r=(e=t.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:t,storage:s,storageKey:i,flowType:o,debug:a},l,c){let u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new us({url:this.authUrl,headers:Object.assign(Object.assign({},u),l),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:t,storage:s,flowType:o,debug:a,fetch:c})}_initRealtimeClient(e){return new xr(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,t)=>{this._handleTokenChanged(r,"CLIENT",t?.access_token)})}_handleTokenChanged(e,r,t){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t??null),this.changedAccessToken=t):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var wl=(n,e,r)=>new hs(n,e,r);var Ji={production:!1,supabaseUrl:"https://rwgsmxdqfratrzycmsnf.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ3Z3NteGRxZnJhdHJ6eWNtc25mIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjU1NjM1NTYsImV4cCI6MjA0MTEzOTU1Nn0.yE7hYaVHxpOgAI-kCE3L2fmrZvfvXyAX3Rlq0VNJ6fM"};var By=(()=>{class n{setAuthSession=Mc(zn);supabase;_session=null;currentUser=new B(null);constructor(){this.supabase=wl(Ji.supabaseUrl,Ji.supabaseKey),this.supabase.auth.onAuthStateChange((r,t)=>{this.setAuthSession(t),r==="SIGNED_IN"||r==="TOKEN_REFRESHED"?t?.user&&this.currentUser.next(t.user):this.currentUser.next(null)})}get session(){return this.supabase.auth.getSession().then(({data:r})=>{this._session=r.session}),this._session}profile(r){return this.supabase.from("profiles").select("username, website, avatar_url").eq("id",r.id).single()}authChanges(r){return this.supabase.auth.onAuthStateChange(r)}signInGoogle(){return this.supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:"/"}})}signInOTP(r){return this.supabase.auth.signInWithOtp({email:r})}signInPW(r,t){return this.supabase.auth.signInWithPassword({email:r,password:t})}signOut(){return this.supabase.auth.signOut()}updateProfile(r){let t=N(m({},r),{updated_at:new Date});return this.supabase.from("profiles").upsert(t)}getPlayers(){return d(this,null,function*(){let r=(yield this.supabase.from("players").select("*")).data;return r?r.sort((t,s)=>t.trikot-s.trikot):[]})}getGameStats(r){return d(this,null,function*(){return yield this.supabase.rpc("getGameStats",{game_id:r})})}downLoadImage(r){return this.supabase.storage.from("profile_pictures").download(r)}uploadAvatar(r,t){return d(this,null,function*(){return(yield this.supabase.storage.from("profile_pictures").upload(r,t)).data?.path})}getCurrentUser(){return this.currentUser.asObservable()}getCurrentUserId(){return this.currentUser.value?this.currentUser.value.id:"null"}getProfile(r){return d(this,null,function*(){return this.supabase.from("profiles").select("*").eq("id",r).single()})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=S({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();export{Al as a,fp as b,na as c,Np as d,Lp as e,ua as f,fu as g,se as h,xe as i,Gu as j,ue as k,wa as l,rg as m,ng as n,sg as o,ig as p,fd as q,jn as r,wr as s,St as t,Ug as u,$g as v,Fg as w,zg as x,Mc as y,zn as z,Bn as A,By as B};
