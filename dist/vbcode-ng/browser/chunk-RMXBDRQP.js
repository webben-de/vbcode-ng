import{a as Vt,b as At}from"./chunk-HSIPPX3X.js";import{a as Et}from"./chunk-YD5EW25E.js";import{a as wt,b as Ct}from"./chunk-NDCLUC4R.js";import{a as Rt,e as Mt,f as St}from"./chunk-CL4REFVJ.js";import{b as ut,f as _t,k as pt,n as mt,t as vt,u as ft}from"./chunk-LSGJARMQ.js";import"./chunk-3ACIU7HM.js";import{a as Lt}from"./chunk-BCCPXHBQ.js";import"./chunk-22WJ2TVG.js";import{a as xt,b as yt}from"./chunk-RHCUBNMR.js";import{b as lt,c as dt}from"./chunk-Z5LCR3JO.js";import{a as B}from"./chunk-ZNAIGONW.js";import{a as bt}from"./chunk-VPMAAHZC.js";import{H as Tt,Q as kt,V as It,a as gt}from"./chunk-IGCTOUO2.js";import{C as ct,e as st,f as at,i as nt,k as D,l as rt,p as ot,y as ht}from"./chunk-GTPAEQNT.js";import{$b as F,B as q,Da as E,Ea as w,Eb as _,Gb as N,Jb as y,Kb as C,Mb as V,Nb as A,Ob as o,Pa as I,Pb as l,Qb as v,Sb as L,Vb as R,Xb as f,ac as W,ba as G,bc as X,ec as J,fc as P,gc as c,gd as it,ha as Z,hc as g,ia as Y,ib as n,ic as M,jc as j,kd as U,lc as z,mc as H,na as u,nc as Q,oc as tt,sc as S,ta as k,ua as K,vc as et,yc as p,zb as x,zc as m}from"./chunk-EGQDYXLC.js";import"./chunk-SECEFDB3.js";import{a as O,f as Nt,i as T}from"./chunk-GK2WYAVW.js";var Pt=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=K({type:e}),e.\u0275inj=Y({imports:[Tt,kt]});let i=e;return i})();var b=Nt(Lt());var Ft={title:"App Title",description:"App description",author:"Daniil Baunov",keywords:["Angular","meta tags","Angular Universal"],type:"website"},Ut=(()=>{let e=class e{constructor(){this.meta=u(st),this.titleService=u(at),this.router=u(D)}updateMetadata(t,s=!0){let a=O(O({},Ft),t),h=this.generateMetaDefinitions(a);this.meta.addTags([...h,{name:"robots",content:s?"index, follow":"noindex"},{name:"viewport",content:"width=device-width, initial-scale=1"},{"http-equiv":"Content-Type",content:"text/html; charset=utf-8"}]),this.titleService.setTitle(a.title)}generateMetaDefinitions(t){return[{name:"title",content:t.title},{property:"og:title",content:t.title},{name:"description",content:t.description},{property:"og:description",content:t.description},{name:"author",content:t.author},{property:"og:author",content:t.author},{name:"keywords",content:t.keywords.join(", ")},{property:"og:type",content:t.type}]}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Dt=(()=>{let e=class e{constructor(){this.currentRotation=I.required(),this.index=I.required(),this.toggleTrikot=I.required(),this.roatedPlayer=I.required(),this.rotationIndexMap=new Map().set(1,"4").set(2,"3").set(3,"2").set(4,"5").set(5,"6").set(6,"1"),this.rotationMap=new Map().set("1",new Map().set(1,4).set(2,3).set(3,2).set(4,5).set(5,6).set(6,1)).set("2",new Map().set(1,5).set(2,4).set(3,3).set(4,6).set(5,1).set(6,2)).set("3",new Map().set(1,6).set(2,5).set(3,4).set(4,1).set(5,2).set(6,3)).set("4",new Map().set(1,1).set(2,6).set(3,5).set(4,2).set(5,3).set(6,4)).set("5",new Map().set(1,2).set(2,1).set(3,6).set(4,3).set(5,4).set(6,5)).set("6",new Map().set(1,3).set(2,2).set(3,1).set(4,4).set(5,5).set(6,6))}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=k({type:e,selectors:[["app-grid-item"]],hostAttrs:[1,"p-5","border","border-1","flex","justify-center","items-center","h-full"],inputs:{currentRotation:[1,"currentRotation"],index:[1,"index"],toggleTrikot:[1,"toggleTrikot"],roatedPlayer:[1,"roatedPlayer"]},standalone:!0,features:[S],decls:8,vars:4,consts:[[1,"flex","flex-col","justify-center","items-center","gap-2"],[1,"bg-neutral","rounded-box","text-neutral-content","flex","flex-col","p-2"],[1,"countdown","font-league","text-5xl","text-center","text-primary"],[1,"swap","font-league","uppercase"]],template:function(s,a){if(s&1&&(o(0,"div",0),tt(1)(2),o(3,"div",1)(4,"span",2),v(5,"span"),l()(),o(6,"label",3),c(7),l()()),s&2){let h=a.rotationMap.get(a.currentRotation()),d=a.roatedPlayer().get(h.get(a.index()));n(5),P("--value:",a.toggleTrikot()?d==null?null:d.trikot:a.rotationIndexMap.get(a.index()),";"),n(2),M(" ",d==null?null:d.name," ")}},dependencies:[U],encapsulation:2});let i=e;return i})();var Wt=["rangeSlider"],Xt=(i,e)=>[i,e];function jt(i,e){if(i&1&&(o(0,"mat-option",5),c(1),l()),i&2){let r=e.$implicit;_("value",r.id),n(),M(" ",r.title," ")}}function zt(i,e){if(i&1){let r=L();o(0,"a",9),c(1),p(2,"transloco"),l(),o(3,"button",10),R("click",function(){E(r);let s=f();return w(s.copyLinkToClipboard())}),o(4,"mat-icon",11),c(5,"link"),l()()}if(i&2){let r=f();_("routerLink",et(4,Xt,r.ROUTES.root+r.ROUTES.editGame,r.selectedEvent)),n(),g(m(2,2,"edit-this-event"))}}function Ht(i,e){i&1&&(o(0,"p"),c(1),p(2,"transloco"),l()),i&2&&(n(),g(m(2,1,"move-the-slider-preview-each-rotation-on-the-curt")))}function Qt(i,e){if(i&1&&(o(0,"div",19)(1,"div",20)(2,"span",21),v(3,"span"),l()(),o(4,"label",22),c(5),l()()),i&2){let r=e.$implicit;n(3),P("--value:",r==null?null:r.trikot,";"),n(2),M(" ",r==null?null:r.name," ")}}function $t(i,e){if(i&1){let r=L();o(0,"div",7)(1,"h6",12),c(2),p(3,"transloco"),l(),o(4,"mat-slide-toggle",13,0)(6,"span",14),c(7),p(8,"transloco"),p(9,"transloco"),p(10,"transloco"),l()(),o(11,"div",15),v(12,"app-grid-item",16)(13,"app-grid-item",16)(14,"app-grid-item",16)(15,"app-grid-item",16)(16,"app-grid-item",16)(17,"app-grid-item",16),l(),o(18,"input",17,1),Q("ngModelChange",function(s){E(r);let a=f();return H(a.rotationSlider,s)||(a.rotationSlider=s),w(s)}),R("ngModelChange",function(){E(r);let s=f();return w(s.hasMoved=!0)}),l(),x(20,Ht,3,3,"p"),v(21,"hr"),o(22,"h3"),c(23,"Bank"),l(),o(24,"div",18),V(25,Qt,6,4,"div",19,C),l()()}if(i&2){let r=J(5),t=f();n(2),j("",m(3,33,"rotation"),": ",t.rotationSlider,""),n(2),_("checked",!0),n(3),j(" ",m(8,35,"show")," ",r.checked?m(9,37,"Trikotnumber"):m(10,39,"BasePosition"),""),n(5),_("currentRotation",t.slider)("index",1)("toggleTrikot",r.checked)("roatedPlayer",t.roatedPlayer),n(),_("currentRotation",t.slider)("index",2)("toggleTrikot",r.checked)("roatedPlayer",t.roatedPlayer),n(),_("currentRotation",t.slider)("index",3)("toggleTrikot",r.checked)("roatedPlayer",t.roatedPlayer),n(),_("currentRotation",t.slider)("index",4)("toggleTrikot",r.checked)("roatedPlayer",t.roatedPlayer),n(),_("currentRotation",t.slider)("index",5)("toggleTrikot",r.checked)("roatedPlayer",t.roatedPlayer),n(),_("currentRotation",t.slider)("index",6)("toggleTrikot",r.checked)("roatedPlayer",t.roatedPlayer),n(),N("tooltip",!t.hasMoved),z("ngModel",t.rotationSlider),n(2),y(t.hasMoved?-1:20),n(5),A(t.bank)}}function qt(i,e){i&1&&(o(0,"div",8)(1,"mat-icon",23),c(2,"swipe_up"),l(),o(3,"p"),c(4),p(5,"transloco"),l()()),i&2&&(n(4),g(m(5,1,"please-select-an-event-to-see-information-here")))}var ti=(()=>{let e=class e{constructor(){this.ROUTES=B,this.router=u(D),this.snack=u(Et),this.meta=u(Ut),this.route=u(nt),this.eventService=u(bt),this.playerService=u(gt),this.session=ht(ct.session),this.events=this.eventService.getEvents(),this.roatedPlayer=new Map,this.rotationSlider=1,this.hasMoved=!1,this.bank=[]}copyLinkToClipboard(){navigator.clipboard.writeText(document.location.href),this.snack.open("Copy to clipboard")}get slider(){return String(this.rotationSlider)}ngOnInit(){return T(this,null,function*(){this.route.data.subscribe(t=>T(this,null,function*(){this.event=t.game,this.selectedEvent=this.event?.id,yield this.updateProps(),this.meta.updateMetadata({title:`${this.event?.title}-> Rotation Planer`,description:"Plan your rotation for your next game",type:"website"},!0)})),q(4e3).pipe(G(()=>!this.hasMoved)).subscribe(()=>{this.rotationSlider===6?this.rotationSlider=1:this.rotationSlider+=1})})}updateProps(){return T(this,null,function*(){let t=new Map;if(!this.event)return;this.router.navigate([B.root+B.roationPlaner,this.event.id]);let s=Object.entries(this.event?.home_team_start_rotation),a=Object.values(Object.fromEntries(s)),h=yield this.playerService.getPlayerList([...s.map(d=>d[1]),...(0,b.without)(this.event.attendees,...a)]);s.forEach(([d,Bt])=>{t.set(Number(d),h.find(Ot=>Ot.id===Bt))}),this.roatedPlayer=t,console.log((0,b.without)(this.event.attendees,...a)),this.bank=(0,b.without)(this.event.attendees,...a).map(d=>(0,b.find)(h,{id:d}))})}handleGameChange(t){return T(this,null,function*(){this.event=yield this.eventService.getEvent(t),this.updateProps()})}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=k({type:e,selectors:[["app-rotation-planer"]],viewQuery:function(s,a){if(s&1&&F(Wt,5),s&2){let h;W(h=X())&&(a.rangeSlider=h.first)}},hostAttrs:[1,"w-full","flex","h-full"],standalone:!0,features:[S],decls:15,vars:8,consts:[["toggleTrikot",""],["rangeSlider",""],[1,"flex","flex-col","w-full","h-full","p-5","justify-center","gap-8"],[1,"flex","flex-col"],["placeholder","Select Game",3,"ngModelChange","valueChange","ngModel"],[3,"value"],[1,"flex","justify-between"],[1,"flex","flex-col","justify-evenly","gap-4"],[1,"flex","flex-col","items-center"],[3,"routerLink"],[1,"btn","w-16","h-8",3,"click"],[1,"text-primary"],[1,"text-md"],[3,"checked"],[1,"!text-primary"],[1,"grid","grid-cols-3","gap-8","grid-rows-2","justify-center","border-2","p-8"],[3,"currentRotation","index","toggleTrikot","roatedPlayer"],["type","range","min","1","max","6","value","1","data-tip","move to stop auto-rotation",1,"tooltip","tooltip-open","tooltip-secondary",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-6","gap-2","grid-rows-1","justify-center"],[1,"flex","flex-col","justify-center","items-center","gap-2","border","border-1","p-3"],[1,"bg-neutral","rounded-box","text-neutral-content","flex","flex-col","p-2"],[1,"countdown","font-league","text-5xl","text-center","text-primary"],[1,"swap","font-league","uppercase"],[1,"!h-20"]],template:function(s,a){if(s&1&&(o(0,"div",2)(1,"div",3)(2,"mat-form-field")(3,"mat-label"),c(4),p(5,"transloco"),l(),o(6,"mat-select",4),Q("ngModelChange",function(d){return H(a.selectedEvent,d)||(a.selectedEvent=d),d}),R("valueChange",function(d){return a.handleGameChange(d)}),V(7,jt,2,2,"mat-option",5,C),p(9,"async"),l()(),o(10,"div",6),x(11,zt,6,7),l()(),v(12,"hr"),x(13,$t,27,41,"div",7)(14,qt,6,3,"div",8),l()),s&2){let h;n(4),g(m(5,4,"event")),n(2),z("ngModel",a.selectedEvent),n(),A(m(9,6,a.events)),n(4),y(((h=a.session())==null||h.user==null?null:h.user.id)===(a.event==null?null:a.event.owner)?11:-1),n(2),y(a.event?13:14)}},dependencies:[U,it,vt,ut,mt,_t,pt,ot,rt,ft,St,Mt,Rt,Ct,wt,It,Pt,At,Vt,yt,xt,Dt,dt,lt],encapsulation:2});let i=e;return i})();export{ti as RotationPlanerPageComponent};
